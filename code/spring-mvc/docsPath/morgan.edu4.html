<doc>
<filename>morgan.edu4.html</filename>
<url>http://mail.morgan.edu/</url>
<ip>142.250.68.19</ip>
<title>Sign In</title>
<body>
<div id="noScript" style="position:static; width:100%; height:100%; z-index:100"> 
 <h1>JavaScript required</h1> 
 <p>JavaScript is required. This web browser does not support JavaScript or JavaScript in this web browser is not enabled.</p> 
 <p>To find out if your web browser supports JavaScript or to enable JavaScript, see web browser help.</p> 
</div> 
<script type="text/javascript" language="JavaScript">
         document.getElementById("noScript").style.display = "none";
    </script> 
<div id="fullPage"> 
 <div id="brandingWrapper" class="float"> 
  <div id="branding"></div> 
 </div> 
 <div id="contentWrapper" class="float"> 
  <div id="content"> 
   <div id="header"> 
    <img class="logoImage" id="companyLogo" src="/adfs/portal/logo/logo.png?id=9F2E42099433C2CA6106D6BA2A8D3CFC776F43710B28B11CE40C5DE056378260" alt="Test Alex Co.name"> 
   </div> 
   <div id="workArea"> 
    <div id="authArea" class="groupMargin"> 
     <div id="loginArea"> 
      <div id="loginMessage" class="groupMargin">
       Sign in with your organizational account
      </div> 
      <form method="post" id="loginForm" autocomplete="off" novalidate onkeypress="if (event &amp;&amp; event.keyCode == 13) Login.submitLoginRequest();" action="/adfs/ls?SAMLRequest=fVLJTsMwEL0j8Q%2BW79kKEshqUpUiRCSWiAYO3Fxnmjh4CR6nhb8nTUHAob0%2Bv3nLeKazD63IBhxKa1KahDElYIStpKlT%2BlzeBJd0lp2eTJFr1bF57xvzBO89oCfDpEE2PqS0d4ZZjhKZ4RqQecGW8%2Fs7Nglj1jnrrbCKkvw6pbpdNVJq3VR1vVLQSN4pA0q%2BdU27lq3m3LZVIwwlLz%2BxJrtYOWIPuUHPjR%2BgeJIE8VmQXJRxzM4Slpy%2FUlJ8O11Js29wLNZqT0J2W5ZFUDwuy1FgIytwDwM7pbW1tYJQWL2zLzii3AzwmisESuaI4PwQcGEN9hrcEtxGCnh%2Buktp432HLIq22234KxPxSFtXcxNC1UdcIM3GzbKxnPuz0uPR%2BY81zQ6IT6M%2Futn39%2B1a5deFVVJ8krlSdrtwwP1Qybt%2BaHRjneb%2BsHUSJiMiq2A9UllvsAMh1xIqSqJs7%2Fr%2FTobr%2BQI%3D&amp;RelayState=https%3A%2F%2Fwww.google.com%2Fa%2Fmorgan.edu%2FServiceLogin%3Fservice%3Dmail%26passive%3Dtrue%26rm%3Dfalse%26continue%3Dhttps%253A%252F%252Fmail.google.com%252Fmail%252F%26ss%3D1%26ltmpl%3Ddefault%26ltmplcache%3D2%26emr%3D1%26osid%3D1&amp;client-request-id=a65ccba9-aeea-436c-300f-00800000009a"> 
       <div id="error" class="fieldMargin error smallText"> <span id="errorText" for=""></span> 
       </div> 
       <div id="formsAuthenticationArea"> 
        <div id="userNameArea"> <label id="userNameInputLabel" for="userNameInput" class="hidden">User Account</label> 
         <input id="userNameInput" name="UserName" type="email" value="" tabindex="1" class="text fullWidth" spellcheck="false" placeholder="someone@example.com" autocomplete="off"> 
        </div> 
        <div id="passwordArea"> <label id="passwordInputLabel" for="passwordInput" class="hidden">Password</label> 
         <input id="passwordInput" name="Password" type="password" tabindex="2" class="text fullWidth" placeholder="Password" autocomplete="off"> 
        </div> 
        <div id="kmsiArea" style="display:none"> 
         <input type="checkbox" name="Kmsi" id="kmsiInput" value="true" tabindex="3"> <label for="kmsiInput">Keep me signed in</label> 
        </div> 
        <div id="submissionArea" class="submitMargin"> <span id="submitButton" class="submit" tabindex="4" role="button" onkeypress="if (event &amp;&amp; event.keyCode == 32) Login.submitLoginRequest();" onclick="return Login.submitLoginRequest();">Sign in</span> 
        </div> 
       </div> 
       <input id="optionForms" type="hidden" name="AuthMethod" value="FormsAuthentication"> 
      </form> 
      <div id="authOptions"> 
       <form id="options" method="post" action="https://adfs.morgan.edu:443/adfs/ls?SAMLRequest=fVLJTsMwEL0j8Q%2BW79kKEshqUpUiRCSWiAYO3Fxnmjh4CR6nhb8nTUHAob0%2Bv3nLeKazD63IBhxKa1KahDElYIStpKlT%2BlzeBJd0lp2eTJFr1bF57xvzBO89oCfDpEE2PqS0d4ZZjhKZ4RqQecGW8%2Fs7Nglj1jnrrbCKkvw6pbpdNVJq3VR1vVLQSN4pA0q%2BdU27lq3m3LZVIwwlLz%2BxJrtYOWIPuUHPjR%2BgeJIE8VmQXJRxzM4Slpy%2FUlJ8O11Js29wLNZqT0J2W5ZFUDwuy1FgIytwDwM7pbW1tYJQWL2zLzii3AzwmisESuaI4PwQcGEN9hrcEtxGCnh%2Buktp432HLIq22234KxPxSFtXcxNC1UdcIM3GzbKxnPuz0uPR%2BY81zQ6IT6M%2Futn39%2B1a5deFVVJ8krlSdrtwwP1Qybt%2BaHRjneb%2BsHUSJiMiq2A9UllvsAMh1xIqSqJs7%2Fr%2FTobr%2BQI%3D&amp;RelayState=https%3A%2F%2Fwww.google.com%2Fa%2Fmorgan.edu%2FServiceLogin%3Fservice%3Dmail%26passive%3Dtrue%26rm%3Dfalse%26continue%3Dhttps%253A%252F%252Fmail.google.com%252Fmail%252F%26ss%3D1%26ltmpl%3Ddefault%26ltmplcache%3D2%26emr%3D1%26osid%3D1&amp;client-request-id=a65ccba9-aeea-436c-300f-00800000009a"> 
        <script type="text/javascript">
                function SelectOption(option) {
                    var i = document.getElementById('optionSelection');
                    i.value = option;
                    document.forms['options'].submit();
                    return false;
                }
            </script> 
        <input id="optionSelection" type="hidden" name="AuthMethod"> 
        <div id="authOptionLinks" class="groupMargin"></div> 
       </form> 
      </div> 
      <div id="introduction" class="groupMargin">
        By logging into this system, I agree to the <a href="http://www.morgan.edu/OITpolicies">MSU Technology Policies, Standards and Guidelines</a> as well as this 
       <script language="javascript">  function toggle() { 	var ele = document.getElementById('toggleText'); 	var text = document.getElementById('displayText'); 	if(ele.style.display == 'block') {     		ele.style.display = 'none'; 		text.innerHTML = 'notice.';   	} 	else { 		ele.style.display = 'block'; 		text.innerHTML = 'notice.'; 	} }  </script> <a id="displayText" href="javascript:toggle();">notice.</a>
       <br>
       <br> 
       <div id="toggleText" style="display: none">
        Access to this system is restricted to authorized users only and limited to approved business purposes. By using this system, you expressly consent to the monitoring of all activities. Any unauthorized access or use of this system is prohibited and could be subject to criminal and civil penalties. All records, reports, e-mail, software, and other data generated by or residing upon this system are the property of State of Maryland and may be used by the State of Maryland for any purpose. 
       </div> <a href="http://www.morgan.edu/accessibility">Accessibility</a> 
      </div> 
      <script type="text/javascript">
        //<![CDATA[

            function Login() {
            }

            Login.userNameInput = 'userNameInput';
            Login.passwordInput = 'passwordInput';

            Login.initialize = function () {

                var u = new InputUtil();

                u.checkError();
                u.setInitialFocus(Login.userNameInput);
                u.setInitialFocus(Login.passwordInput);
            }();

            Login.submitLoginRequest = function () { 
                var u = new InputUtil();
                var e = new LoginErrors();

                var userName = document.getElementById(Login.userNameInput);
                var password = document.getElementById(Login.passwordInput);

                if (!userName.value || !userName.value.match('[@\\\\]')) {
                    u.setError(userName, e.userNameFormatError);
                    return false;
                }

                if (!password.value) {
                    u.setError(password, e.passwordEmpty);
                    return false;
                }

                if (password.value.length > maxPasswordLength) {
                    u.setError(password, e.passwordTooLong);
                    return false;
                }

                document.forms['loginForm'].submit();
                return false;
            };

            InputUtil.makePlaceholder(Login.userNameInput);
            InputUtil.makePlaceholder(Login.passwordInput);
        //]]>
        </script> 
     </div> 
    </div> 
   </div> 
   <div id="footerPlaceholder"></div> 
  </div> 
  <div id="footer"> 
   <div id="footerLinks" class="floatReverse"> 
    <div>
     <span id="copyright">© 2016 Microsoft</span>
    </div> 
   </div> 
  </div> 
 </div> 
</div> 
<script type="text/javascript">
//<![CDATA[
// Copyright (c) Microsoft Corporation.  All rights reserved.

// This file contains several workarounds on inconsistent browser behaviors that administrators may customize.
"use strict";

// iPhone email friendly keyboard does not include "\" key, use regular keyboard instead.
// Note change input type does not work on all versions of all browsers.
if (navigator.userAgent.match(/iPhone/i) != null) {
    var emails = document.querySelectorAll("input[type='email']");
    if (emails) {
        for (var i = 0; i < emails.length; i++) {
            emails[i].type = 'text';
        }
    }
}

// In the CSS file we set the ms-viewport to be consistent with the device dimensions, 
// which is necessary for correct functionality of immersive IE. 
// However, for Windows 8 phone we need to reset the ms-viewport's dimension to its original
// values (auto), otherwise the viewport dimensions will be wrong for Windows 8 phone.
// Windows 8 phone has agent string 'IEMobile 10.0'
if (navigator.userAgent.match(/IEMobile\/10\.0/)) {
    var msViewportStyle = document.createElement("style");
    msViewportStyle.appendChild(
        document.createTextNode(
            "@-ms-viewport{width:auto!important}"
        )
    );
    msViewportStyle.appendChild(
        document.createTextNode(
            "@-ms-viewport{height:auto!important}"
        )
    );
    document.getElementsByTagName("head")[0].appendChild(msViewportStyle);
}

// If the innerWidth is defined, use it as the viewport width.
if (window.innerWidth && window.outerWidth && window.innerWidth !== window.outerWidth) {
    var viewport = document.querySelector("meta[name=viewport]");
    viewport.setAttribute('content', 'width=' + window.innerWidth + ', initial-scale=1.0, user-scalable=1');
}

// Gets the current style of a specific property for a specific element.
function getStyle(element, styleProp) {
    var propStyle = null;

    if (element && element.currentStyle) {
        propStyle = element.currentStyle[styleProp];
    }
    else if (element && window.getComputedStyle) {
        propStyle = document.defaultView.getComputedStyle(element, null).getPropertyValue(styleProp);
    }

    return propStyle;
}

// The script below is used for downloading the illustration image 
// only when the branding is displaying. This script work together
// with the code in PageBase.cs that sets the html inline style
// containing the class 'illustrationClass' with the background image.
var computeLoadIllustration = function () {
    var branding = document.getElementById("branding");
    var brandingDisplay = getStyle(branding, "display");
    var brandingWrapperDisplay = getStyle(document.getElementById("brandingWrapper"), "display");

    if (brandingDisplay && brandingDisplay !== "none" &&
        brandingWrapperDisplay && brandingWrapperDisplay !== "none") {
        var newClass = "illustrationClass";

        if (branding.classList && branding.classList.add) {
            branding.classList.add(newClass);
        } else if (branding.className !== undefined) {
            branding.className += " " + newClass;
        }
        if (window.removeEventListener) {
            window.removeEventListener('load', computeLoadIllustration, false);
            window.removeEventListener('resize', computeLoadIllustration, false);
        }
        else if (window.detachEvent) {
            window.detachEvent('onload', computeLoadIllustration);
            window.detachEvent('onresize', computeLoadIllustration);
        }
    }
};

if (window.addEventListener) {
    window.addEventListener('resize', computeLoadIllustration, false);
    window.addEventListener('load', computeLoadIllustration, false);
}
else if (window.attachEvent) {
    window.attachEvent('onresize', computeLoadIllustration);
    window.attachEvent('onload', computeLoadIllustration);
}

// Function to change illustration image. Usage example below.
function SetIllustrationImage(imageUri) {
    var illustrationImageClass = '.illustrationClass {background-image:url(' + imageUri + ');}';

    var css = document.createElement('style');
    css.type = 'text/css';

    if (css.styleSheet) css.styleSheet.cssText = illustrationImageClass;
    else css.appendChild(document.createTextNode(illustrationImageClass));

    document.getElementsByTagName("head")[0].appendChild(css);
}

// Example to change illustration image on HRD page after adding the image to active theme:
// PSH> Set-AdfsWebTheme -TargetName <activeTheme> -AdditionalFileResource @{uri='/adfs/portal/images/hrd.jpg';path='.\hrd.jpg'}
//
//if (typeof HRD != 'undefined') {
//    SetIllustrationImage('/adfs/portal/images/hrd.jpg');
//}

// Dane Rideout 12/28/17
// Allow short login names
// https://chrisreinking.com/using-samaccountname-to-login-to-adfs-in-windows-server-2012r2-2016-2/

if (typeof Login != 'undefined'){  
    Login.submitLoginRequest = function () {   
    var u = new InputUtil();  
    var e = new LoginErrors();  
    var userName = document.getElementById(Login.userNameInput);  
    var password = document.getElementById(Login.passwordInput);  
    if (userName.value && !userName.value.match('[@\\\\]'))   
    {  
        var userNameValue = 'morgan.edu\\' + userName.value;  
        document.forms['loginForm'].UserName.value = userNameValue;  
    }  
    if (!userName.value) {  
       u.setError(userName, e.userNameFormatError);  
       return false;  
    }  
    if (!password.value)   
    {  
        u.setError(password, e.passwordEmpty);  
        return false;  
    }  
    document.forms['loginForm'].submit();  
    return false;  
};  
}

// Dane Rideout 7/12/19
// Adjust username placeholder text
// https://deploywindows.com/2015/05/05/customize-your-adfs-login-page/\
// ** THIS DID NOT WORK
// document.forms[‘loginForm’].UserName.placeholder = ‘Username’;


// Dane Rideout 7/12/19
// Adjust username placeholder text
// https://crossan007.dev/blog/identity-management/adfs-username-behavior/
function UpdatePlaceholders() {
    var userName;
    if (typeof Login != 'undefined'){
        userName = document.getElementById(Login.userNameInput) 
    }
    if (typeof UpdatePassword != 'undefined'){
        userName = document.getElementById(UpdatePassword.userNameInput);
    }
    if (typeof userName != 'undefined'){
        userName.setAttribute("placeholder","Username");
    }
}
 
document.addEventListener("DOMContentLoaded", function(){
  // Handler when the DOM is fully loaded
  UpdatePlaceholders()
});
// PortalGuard sidecar changes below

var DEBUG = false;
var prev_handler;
var bAllowSubmit = false;	// Controls whether we allow a manual user login to continue
var sidecarfrm = null;

var THIS_USER_FLD = "userNameInput";
var THIS_PASS_FLD = "passwordInput";
var THIS_SUBMIT_BTN = "submitButton";
var PG_FLDNAME_USER = "_PG_Login_Field_Username_";
var PG_FLDNAME_PASS = "_PG_Login_Field_Password_";


document.domain = "morgan.edu";
var strAutoLoginURL = "https://mypassword.morgan.edu/_layouts/PG/loginSidecar.aspx?ReturnUrl=%2fdefault.aspx&pgautopop=1&pgautouser=1&pgautopass=1&pg_js_callback=" + escape("callback($ret, $xml, $isvaliduser)");
var strSelfServURL = "https://mypassword.morgan.edu/_layouts/PG/loginSidecar.aspx?ReturnUrl=%2fdefault.aspx&pgautopop=18&pgautouser=1&pgautopass=1";


function adfsInit() {
	createUIElements();
	setTimeout("setHandler()", 1000);
}

function createUIElements() {
	// Iframe
	var ifrm = document.createElement("iframe");
	ifrm.src = "about:blank";
	ifrm.id = "ifrmDestFrame";
	ifrm.name = "ifrmDestFrame";
	ifrm.style.display = "none";
	document.body.appendChild(ifrm);
	
	// Help/self-service link
	var para = document.createElement("p");
	para.id = "pgSSLinkContainer";	// So we can style it in CSS, it needs a top margin
	var lnk = document.createElement("a");
	lnk.href = "javascript:AccountSelfService()";
	lnk.innerHTML = "Forgot your password?";
	para.appendChild(lnk);
	// Put it after the 'Sign In' button
	document.getElementById("submissionArea").appendChild(para);	
}

function setHandler(frm) {
	if (DEBUG) alert("in setHandler");
	sidecarfrm = document.forms["loginForm"];
	// For 'Enter' key within form
	sidecarfrm.onkeypress = handleEnterKey;
	var btn = document.getElementById(THIS_SUBMIT_BTN);
	// For clicking the button
	btn.onclick = function() { doCallout(); return false; }
	// For tabbing focus to it, then pressing space bar
	btn.onkeypress = function() { if (event && event.keyCode == 32) doCallout();}
}

function handleEnterKey(e) {
	e = e || window.event;
	var key = e.charCode ? e.charCode : (e.keyCode ? e.keyCode : 0);
	if (key == 13) {
		doCallout();
		return false;
	} else
		return true;
}

function isIEBrowser() {
	var rv = false;
	if (navigator.appName == "Microsoft Internet Explorer") {
		var ua = navigator.userAgent;
		var re  = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
		if (re.exec(ua) != null)
			rv = true;
	}
	return rv;
}

function isChromeBrowser() {
	var rv = false;
	if (navigator.appName == "Netscape") {
		var ua = navigator.userAgent;
		var re  = new RegExp("(Chrome/)");
		if (re.exec(ua) != null)
			rv = true;
	}

	return rv;
}

function launchURL(popURL) {
	if (popURL.length > 0) {
		try {
			var ifrm = showIframe();
			ifrm.src = popURL;
		} catch (e) {
			alert("launchURL() error\nDescription: " + e);
		}
	} else {
		if (DEBUG) alert("Target URL not set");
	}
}

function showIframe() {
	try {
		var ifrm = document.getElementById("ifrmDestFrame");
		ifrm.style.display = "";
		return ifrm;
	} catch (e) {
		alert("showIframe() error\nDescription: " + e);
	}
	return null;
}

function closeIframe(bSubmit) {
	document.getElementById("ifrmDestFrame").style.display = "none";
	if (bSubmit) {
		if (DEBUG) alert("Submitting form...");
		doSubmit();
	}
}

function AccountSelfService() {
	launchURL(strSelfServURL);
}

function doCallout() {
	var frm = this;
	if (DEBUG) alert("In doCallout()");


	if (bAllowSubmit) {
		if (document.getElementById(THIS_USER_FLD).value.length == 0) {
			document.getElementById(THIS_USER_FLD).focus();
			if (DEBUG) alert("Submit prevented because username field is blank");
			return false;
		} else if (document.getElementById(THIS_PASS_FLD).value.length == 0) {
			document.getElementById(THIS_PASS_FLD).focus();
			if (DEBUG) alert("Submit prevented because password field is blank");
			return false;
		} else {
			try {	// In case previous handler is not defined
				if (prev_handler) {
					prev_handler();
				}
			} catch (e) {}
			if (DEBUG) alert("Allowing submit to continue");
			return true;	// Allows original POST to continue
		}
	} else {
		try {
			var theurl = strAutoLoginURL;
			var ifrm = document.getElementById("ifrmDestFrame");
			if (DEBUG) alert("doCallout()\nPreventing original post\nNew URL: " + theurl);
			ifrm.src = theurl;
		} catch (e) {
			var outp = "doCallout(): Error setting iframe src\n==========\n";
			for (var i in e)
				outp = outp + i + ": " + e[i] + "\n";
			alert(outp);
		}
		return false;	// Stops original POST...
	}
}


// Callback that controls when PG should be shown for the more generic error cases
function suppressPG(bBadUser, bBadPass, bLockedAcct) {
	if (bLockedAcct)	// Can be both locked and bad pw so check lockout first
		return false;
	
	if (bBadUser)
		return false;
		
	if (bBadPass)
		return false;
		
	return false;	// Default
}


function fetchUsername() {
	return document.getElementById(THIS_USER_FLD).value;
}

function fetchPasssword() {
	return document.getElementById(THIS_PASS_FLD).value;
}

function setUsername(val) {
	if (DEBUG)
		alert("Setting base form username: " + val);
	document.getElementById(THIS_USER_FLD).value = val;
}

function setPassword(val) {
	if (DEBUG)
		alert("Setting base form password, len: " + val.length);
	document.getElementById(THIS_PASS_FLD).value = val;
}

function doSubmit() {
	bAllowSubmit = true;
	if (DEBUG) alert("Allowing submit to continue");
	try {
		sidecarfrm.onsubmit = null;
		Login.submitLoginRequest();
	} catch(ex) {
		alert("doSubmit(), Caught exception: " + ex);
	}
}

// Start the initialization last...
adfsInit();
//]]>
</script>
</body>
</doc>