<doc>
<filename>monmouth.edu4.html</filename>
<url>http://mubookstore.monmouth.edu/ShoppingCart</url>
<ip>67.133.85.172</ip>
<title>Shopping Cart</title>
<body>
<header> 
 <div data-role="header"> 
 </div> 
</header> <a href="#contentSection" tabindex="0" class="hidden_label">Skip to main content</a> 
<p class="hiddenForm" hidden></p> 
<div class="reloadPage" hidden>
 No
</div> 
<main id="page_wrapper"> 
 <div id="topSection"> 
  <div class="container-fluid"> 
   <div class="topHeader"> 
    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 head"> <a href="http://mubookstore.monmouth.edu/Home"><img class="img-responsive" alt="Monmouth University Store Logo" src="/SiteImages/27-SchoolImages/27-2019%20Redesign/27-top/27-UniversityStoreD.jpg"></a>
    </div> 
    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 head mob-bg"> 
     <div class=" topRight"> <a class="topLink" href="http://mubookstore.monmouth.edu/RegisterType"><em class="fa fa-pencil" aria-hidden="true"></em>&nbsp;Register</a> <a class="topLink" href="http://mubookstore.monmouth.edu/Login"><em class="fa fa-sign-in" aria-hidden="true"></em>&nbsp;Login</a> <a class="topLink" href="http://mubookstore.monmouth.edu/ShoppingCart"><em class="fa fa-shopping-cart" aria-hidden="true"></em>&nbsp;Cart</a> <span class="search-here"></span> 
     </div> 
    </div> 
   </div> 
  </div> 
  <input name="9280902" type="hidden" value="{ id = Text_Id }">
  <nav class="navbar navbar-default"> 
   <div class="container-fluid"> 
    <div class="navbar-header"> <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#myNavbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> 
    </div> 
    <div class="collapse navbar-collapse" id="myNavbar"> 
     <ul class="nav navbar-nav"> 
      <li class="dropdown"> <a class="dropdown-toggle" href="#" data-toggle="dropdown">Textbooks <span class="caret mob-caret"></span></a> 
       <ul class="dropdown-menu"> 
        <li><a href="http://mubookstore.monmouth.edu/selecttermdept">Order Textbooks</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74457">Ordering Instructions</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74454">Textbook Rental Policies</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74455">eBook Information</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/FacultyAdoptions/DefaultN">Faculty Adoptions</a></li> 
        <li><a href="http://onlinebuyback.mbsbooks.com/index.php?jde=8406" target="_blank">Online Buyback</a></li> 
       </ul> </li> 
      <li><a href="http://mubookstore.monmouth.edu/MerchList?ID=1968">Tradebooks</a></li> <!-- <li><a href="http://mubookstore.monmouth.edu/Buyback">Buyback</a></li>-----> 
      <li class="dropdown"> <a class="dropdown-toggle" href="#" data-toggle="dropdown">Apparel <span class="caret mob-caret"></span></a> 
       <ul class="dropdown-menu"> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74447">Men's Apparel</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74448">Women's Apparel</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74449">Kid's Apparel</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=75454">Family Apparel</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=75455">Under Armour</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=75456">Gear</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=75458">Champion</a></li> 
       </ul> </li> 
      <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74450">Gifts</a></li> 
      <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74458">MU Sports</a></li> 
      <li><a href="http://mubookstore.monmouth.edu/MerchList?ID=5240">Course Materials</a></li> 
      <li><a href="#">Office Supplies</a></li> 
      <li class="dropdown"> <a class="dropdown-toggle" href="#" data-toggle="dropdown">About <span class="caret mob-caret"></span></a> 
       <ul class="dropdown-menu"> 
        <li><a href="http://mubookstore.monmouth.edu/storeabout">About Us</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/contact">Contact</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74451">Return Policy</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74452">Shipping Policy</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74453">Miscellaneous Policies</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74454">Textbook Rental Policies</a></li> 
       </ul> </li> 
     </ul> 
    </div> <!--collapse--------> 
   </div> <!--.container-----> 
  </nav> <!--/.navbar navbar-default----> 
  <input name="9280904" type="hidden" value="{ id = Text_Id }">
  <div id="stripe">
   &nbsp;
  </div> 
  <input name="9280903" type="hidden" value="{ id = Text_Id }"> 
  <div class="clear"></div> 
 </div> 
 <div> 
  <div id="ContainDiv" class="contain container clear"> 
   <div id="contentSection" class="col-lg-12 col-md-12 col-sm-12 col-xs-12"> 
    <div class="validation-summary-errors validation-summary-errors clear red" id="val">
     <ul>
      <li>There are no items in your cart.</li> 
     </ul>
    </div> 
    <div class="center"> 
     <h1 class="page_header">Shopping Cart</h1> 
    </div> 
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"> 
     <div class="prev_link"> <a href="#">Return to Previous Page</a> 
     </div> 
    </div> 
    <form action="/ShoppingCart" method="post">
     <input name="__RequestVerificationToken" type="hidden" value="Im0V8CXdyQyIz76n4GVLZde0x9ipT106ASHjHmlvQeKfawBzIdHm9LAR4UDsD6Pg-7lNbe4yaHZR-dUg4by3cDEIE4E1"> 
     <input type="hidden" id="hiddenInput"> 
     <input type="hidden" id="shoppingCartPage" value="ShoppingCart"> 
     <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 textr Continue_Shopping"> <a id="Shopping_Button" class="btn btn-primary Continue_Checkout_btn floatn">Continue Shopping</a> <button type="button" class="btn btn-primary Continue_Checkout_btn floatn" id="CheckoutBtn">Continue Checkout</button> 
      <input disabled type="button" class="btn btn-primary Payment_btn floatn displayn" id="PaymentBtn" value="Payment Options"> 
     </div> 
     <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 panel panel-default padding0 top5"> 
      <div class="panel-body col-lg-6 col-md-6 col-sm-6 col-xs-6"> 
       <p id="Item_Count"><strong>Item Count: </strong><span class="CartCount">0 </span></p> 
       <p id="Cart_Total"><strong>Cart Total: </strong><span class="CartTotal">$0.00 </span></p> 
      </div> 
      <div id="Highest_Cart" class="panel-body col-lg-6 col-md-6 col-sm-6 col-xs-6 textr displayn"> 
       <p id="New_Cart_Title"><strong>Cart Total With Substitutions:</strong><a tabindex="0" id="Cart_Help" class="glyphicon glyphicon-question-sign"></a></p> 
       <p id="New_Cart_Total">$0.00</p> 
       <input id="CartHasSubstitutions" name="CartHasSubstitutions" type="hidden" value="False"> 
      </div> 
     </div> 
     <input id="singleStoId" name="singleStoId" type="hidden" value="0">
     <input id="multiStoreCart" name="multiStoreCart" type="hidden" value="False">
    </form> <!--VENDOR CART BEGINS--> 
    <script type="text/javascript">
    var token2 = $('input[name="__RequestVerificationToken"]').val();
    //This function is used on Shopping Cart to delete courses, Textbooks, or merchandise
    $(function () {
        // Document.ready -> link up remove event handler
        $('.RemoveLink').click(function (e) {
            var $item = $(this).attr('data-id');
            $('#vendorID').val($item);
            $('#removeVendor').modal('show');
        });
        $("#RemoveVendorConfirm").click(function () {
            $('#removeVendor').modal('hide');
            var itemToDelete = $('#vendorID').val();
            if (itemToDelete != '') {
                // Perform the ajax post
                $.ajax({
                    dataType: "json",
                    type: "POST",
                    url: 'ShoppingCart/delete',
                    data: {__RequestVerificationToken: token2, "id": itemToDelete },
                    success: function (deleted) {
                        if (deleted == true) {
                            //Hide the item
                            location.reload();
                            //  $('.div_' + itemToDelete).empty();
                        }

                    }
                });
            }

        });

        $(".vendor_purchase").click(function () {
            // Get the id from the link
            var itemToadd = $(this).attr("data-id");
            if (itemToadd != '') {
                // Perform the ajax post
                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: 'ShoppingCart/buy',
                    data: {__RequestVerificationToken: token2, "id": itemToadd },
                    success: function (added) {
                        if (added == true) {
                            //Hide the item
                            $("#add_" + itemToadd).hide();
                            $("#img_" + itemToadd).show();
                            var URL = $(".link_" + itemToadd).val();
                            window.open(URL, '_blank');
                            //window.location.href = URL
                        }

                    }
                });
            }

        });

        $(".vendor_purchase_all").click(function () {
            // Get the id from the link
            var itemToadd = $(this).attr("data-id");
            if (itemToadd != '') {
                // Perform the ajax post
                $.ajax({
                    type: "POST",
                    url: 'ShoppingCart/buyAll',
                    dataType: "json",
                    data: {__RequestVerificationToken: token2, "id": itemToadd },
                    success: function (urlStr) {
                            //Hide the item
                            $("#addall_" + itemToadd).hide();
                            $("#imgall_" + itemToadd).show();
                            window.open(urlStr, '_blank');
                          //  window.location.href = urlStr
                    },
                    error: function () {
                        alert("ERROR");
                    }
                });
            }

        });
    });
</script> <!--ONE VENDOR CART TITLE ENDS--> 
    <input id="global-subs" name="global-subs" type="hidden" value=""> 
    <input id="global-odu" name="global-odu" type="hidden" value=""> 
    <input id="global-pref" name="global-pref" type="hidden" value=""> 
    <input id="allowOdu" name="allowOdu" type="hidden" value="True"> 
    <input id="hasRental" name="hasRental" type="hidden" value="False"> 
    <input id="AllowSubs" name="AllowSubs" type="hidden" value="True"> 
    <input id="modalsAnswered" name="modalsAnswered" type="hidden" value="False"> 
    <input id="HasDuplicateEbookDurations" name="HasDuplicateEbookDurations" type="hidden" value="False"> 
    <input id="DuplicateDurationText" name="DuplicateDurationText" type="hidden" value=""> 
    <input id="HasDuplicateEBooks" name="HasDuplicateEBooks" type="hidden" value="False"> 
    <input id="DuplicateEbookText" name="DuplicateEbookText" type="hidden" value=""> 
    <input id="showModals" name="showModals" type="hidden" value="False"> <!--GENERAL ITEM ENDS--> <!--GENERAL BOOK ENDS--> <!--SUBSTITUTE MODAL BEGIN--> 
    <div class="modal fade" id="Sub_Preference" data-backdrop="static" role="dialog"> 
     <div class="modal-dialog"> <!--MODAL CONTENT--> 
      <div class="modal-content"> 
       <div class="modal-body" id="subPreferences"> 
        <p> If the condition (New/Used) of a textbook you ordered is no longer available, may we substitute with another condition? <a id="sub_help" class="glyphicon glyphicon-question-sign"></a></p> 
        <fieldset> <legend class="hidden_label border_none">If the condition (New/Used) of a textbook you ordered is no longer available, may we substitute with another condition?</legend> 
         <div class="radio"> <label> <input type="radio" name="SUB_OVERALL" value="YES">YES</label> 
         </div> 
         <div class="radio"> <label> <input type="radio" name="SUB_OVERALL" value="NO">NO</label> 
         </div> 
        </fieldset> 
        <p id="Sub_Error" role="alert" class="alert alert-warning displayn"> Please make a selection. </p> 
       </div> 
       <div class="modal-footer"> <a type="button" class="btn btn-default left5 bottom0 hover_pointer" id="Sub_Button">Continue</a> <a type="button" class="btn btn-default hover_pointer" data-dismiss="modal">Back</a> 
       </div> 
      </div> 
     </div> 
    </div> <!--SUBSTITUTE MODAL END--> <!-- SUBSTITUTE HELP MODAL BEGIN--> 
    <div class="modal fade" id="Sub_Preference_Help" data-backdrop="static" role="dialog"> 
     <div class="modal-dialog"> <!-- Modal content--> 
      <div class="modal-content"> 
       <div class="modal-body" id="subPreferencesHelp"> 
        <p>Every effort is made to fill the order with the condition of the textbook that you requested when you placed your order. If there are no more available when your order is processed, you can give the bookstore permission to fill the order with another condition by answering “Yes”. The order total will be adjusted for any price difference when shipped. You will be able to review the shopping cart and update this option for individual books before you submit the order.</p> 
       </div> 
       <div class="modal-footer"> <a id="sub_help_back" type="button" class="btn btn-default hover_pointer">Back</a> 
       </div> 
      </div> 
     </div> 
    </div> <!--SUBSTITUTE HELP MODAL END--> <!--1st ODU MODAL BEGIN--> 
    <div class="modal fade" id="ODU_Preference" data-backdrop="static" role="dialog"> 
     <div class="modal-dialog"> <!--MODAL CONTENT--> 
      <div class="modal-content"> 
       <div class="modal-body" id="oduPreferences"> 
        <p>In the event the instructor changes the materials for your course, how would you like us to update your order? <a id="ODU_help" class="glyphicon glyphicon-question-sign"></a></p> 
        <fieldset> <legend class="hidden_label border_none">In the event the instructor changes the materials for your course, how would you like us to update your order?</legend> 
         <div class="radio"> <label> <input type="radio" name="ODU_OVERALL" value="ADD ONLY REQUIRED" data-id="2">Add Only Required</label> 
         </div> 
         <div class="radio"> <label> <input type="radio" name="ODU_OVERALL" value="ADD ALL MATERIALS" data-id="1">Add All Materials</label> 
         </div> 
         <div class="radio"> <label> <input type="radio" name="ODU_OVERALL" value="DO NOT ADD TO ORDER" data-id="3">Do Not Add To Order</label> 
         </div> 
        </fieldset> 
        <p id="ODU_Error" role="alert" class="alert alert-warning displayn"> Please make a selection. </p> 
       </div> 
       <div class="modal-footer"> <a type="button" class="btn btn-default left5 bottom0 hover_pointer" id="ODU_Button">Continue</a> <a type="button" class="btn btn-default hover_pointer" data-dismiss="modal">Back</a> 
       </div> 
      </div> 
     </div> 
    </div> <!-- 1st ODU MODAL END--> <!--1st ODU HELP MODAL BEGIN--> 
    <div class="modal fade" id="ODU_Update_Help" data-backdrop="static" role="dialog"> 
     <div class="modal-dialog"> <!--MODAL CONTENT--> 
      <div class="modal-content"> 
       <div class="modal-body" id="oduUpdateHelp"> 
        <p> If an instructor changes course materials before an order is processed, we will remove unnecessary items. However, for materials your instructor may add to the course, please indicate if the bookstore should adjust your order when it is filled.</p> 
       </div> 
       <div class="modal-footer"> <a id="ODU_help_back" type="button" class="btn btn-default hover_pointer">Back</a> 
       </div> 
      </div> 
     </div> 
    </div> <!--1st ODU HELP MODAL END--> <!--2nd ODU MODAL BEGIN--> 
    <div class="modal fade" id="ODU_Update" data-backdrop="static" role="dialog"> 
     <div class="modal-dialog"> <!--MODAL CONTENT--> 
      <div class="modal-content"> 
       <div class="modal-body" id="oduUpdate"> 
        <div id="option1"> 
         <p>If we substitute or add course materials to your order, what condition would you prefer? <a id="ODU_Pref_help" class="glyphicon glyphicon-question-sign"></a></p> 
         <p>Select One:</p> 
         <fieldset> <legend class="hidden_label border_none">If we substitute or add course materials to your order, what condition would you prefer?</legend> 
          <div class="radio"> <label class="radio-inline"><input type="radio" name="ODU_OVERALL_N" value="NEW">NEW</label> 
          </div> 
          <div class="radio"> <label class="radio-inline"><input type="radio" name="ODU_OVERALL_N" value="USED">USED</label> 
          </div> 
         </fieldset> 
        </div> 
        <div id="option2" class="rentalQuestions"> 
         <p>Select One:</p> 
         <fieldset> <legend class="hidden_label border_none">If we substitute or add course materials to your order, what condition would you prefer?</legend> 
          <div class="radio"> <label class="radio-inline"><input type="radio" name="ODU_OVERALL_R" value="RENTAL">RENT</label> 
          </div> 
          <div class="radio"> <label class="radio-inline"><input type="radio" name="ODU_OVERALL_R" value="PURCHASE">PURCHASE</label> 
          </div> 
         </fieldset> 
        </div> 
        <div> 
         <p id="ODU_Pref_Error" role="alert" class="alert alert-warning displayn"> If you allow the bookstore to make changes to your order when it is filled, select the condition of textbook you prefer. An alternate condition is only shipped if your preference is not available at that time. </p> 
        </div> 
       </div> 
       <div class="modal-footer"> <a type="button" class="btn btn-default left5 bottom0 hover_pointer" id="ODU_Update_Button">Continue</a> <a type="button" class="btn btn-default hover_pointer" data-dismiss="modal">Back</a> 
       </div> 
      </div> 
     </div> 
    </div> <!--2nd ODU MODAL END--> <!--2nd ODU MODAL HELP BEGIN--> 
    <div class="modal fade" id="ODU_Pref_Update_Help" data-backdrop="static" role="dialog"> 
     <div class="modal-dialog"> <!--MODAL CONTENT--> 
      <div class="modal-content"> 
       <div class="modal-body" id="oduPrefUpdateHelp"> 
        <p>If you allow the bookstore to make changes to your order when it is filled, select the condition of textbook you prefer. An alternate condition is only shipped if your preference is not available at that time.</p> 
       </div> 
       <div class="modal-footer"> <a id="ODU_Pref_help_back" type="button" class="btn btn-default hover_pointer">Back</a> 
       </div> 
      </div> 
     </div> 
    </div> <!--2nd ODU MODAL HELP END--> 
   </div> <!-- Modal --> 
   <div class="modal fade" id="Question_Mark" role="dialog"> 
    <div class="modal-dialog"> <!-- Modal content--> 
     <div class="modal-content"> 
      <div class="modal-body"> 
       <p> The Cart Total with Substitutions is calculated using the New price for titles where you have allowed substitutions. Used prices will be applied at checkout if originally added to the cart and available when your order is filled. Your card or FA will be charged once your order has been fulfilled with your preferences of new or used.</p> 
      </div> 
      <div class="modal-footer"> <a type="button" class="btn btn-default hover_pointer" data-dismiss="modal">Close</a> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="modal fade" id="loyaltyError" role="dialog"> 
    <div class="modal-dialog"> <!-- Modal content--> 
     <div class="modal-content"> 
      <div class="modal-body loyaltyErrorBody"> 
      </div> 
      <div class="modal-footer"> <a type="button" class="btn btn-default hover_pointer" data-dismiss="modal">Close</a> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="modal fade" id="removeCourse" role="dialog"> 
    <div class="modal-dialog"> <!-- Modal content--> 
     <div class="modal-content"> 
      <div class="modal-header"> 
       <h3 class="modal-title">Remove Course?</h3> 
      </div> 
      <div class="modal-body"> 
       <p>You are about to remove a course. All items attached to this course will also be removed. Are you sure you want to delete this course?</p> 
       <input id="courseID" type="hidden" value=""> 
      </div> 
      <div class="modal-footer"> <a id="RemoveCourseConfirm" type="button" class="btn btn-default hover_pointer">Yes</a> <a type="button" class="btn btn-default hover_pointer" data-dismiss="modal">No</a> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="modal fade" id="removeText" role="dialog"> 
    <div class="modal-dialog"> <!-- Modal content--> 
     <div class="modal-content"> 
      <div class="modal-header"> 
       <h3 class="modal-title">Remove Item?</h3> 
      </div> 
      <div class="modal-body"> 
       <p class="modaltext"> Are you sure you want to delete this item?</p> 
       <input id="textID" type="hidden" value=""> 
      </div> 
      <div class="modal-footer"> <a id="RemoveTextConfirm" type="button" class="btn btn-default hover_pointer">Yes</a> <a type="button" class="btn btn-default hover_pointer" data-dismiss="modal">No</a> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="modal fade" id="removeMerch" role="dialog"> 
    <div class="modal-dialog"> <!-- Modal content--> 
     <div class="modal-content"> 
      <div class="modal-header"> 
       <h3 class="modal-title">Remove Item?</h3> 
      </div> 
      <div class="modal-body"> 
       <p> Are you sure you want to delete this item?</p> 
       <input id="merchID" type="hidden" value=""> 
      </div> 
      <div class="modal-footer"> <a id="RemoveMerchConfirm" type="button" class="btn btn-default hover_pointer">Yes</a> <a type="button" class="btn btn-default hover_pointer" data-dismiss="modal">No</a> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="modal fade" id="removeGeneral" role="dialog"> 
    <div class="modal-dialog"> <!-- Modal content--> 
     <div class="modal-content"> 
      <div class="modal-header"> 
       <h3 class="modal-title">Remove Item?</h3> 
      </div> 
      <div class="modal-body"> 
       <p> Are you sure you want to delete this item?</p> 
       <input id="generalID" type="hidden" value=""> 
      </div> 
      <div class="modal-footer"> <a id="RemoveGeneralConfirm" type="button" class="btn btn-default hover_pointer">Yes</a> <a type="button" class="btn btn-default hover_pointer" data-dismiss="modal">No</a> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="modal fade" id="removeVendor" role="dialog"> 
    <div class="modal-dialog"> <!-- Modal content--> 
     <div class="modal-content"> 
      <div class="modal-header"> 
       <h3 class="modal-title">Remove Item?</h3> 
      </div> 
      <div class="modal-body"> 
       <p> Are you sure you want to delete this item?</p> 
       <input id="vendorID" type="hidden" value=""> 
      </div> 
      <div class="modal-footer"> <a id="RemoveVendorConfirm" type="button" class="btn btn-default hover_pointer">Yes</a> <a type="button" class="btn btn-default hover_pointer" data-dismiss="modal">No</a> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="modal fade" id="duplicateDuration" role="dialog"> 
    <div class="modal-dialog"> <!-- Modal content--> 
     <div class="modal-content"> 
      <div class="modal-header"> 
       <h3 class="modal-title">Duplicate Duration</h3> 
      </div> 
      <div class="modal-body"> 
       <p id="duplicateDurationText"></p> 
      </div> 
      <div class="modal-footer"> <a id="duplicateDurationConfirm" type="button" class="btn btn-default hover_pointer">Yes</a> <a type="button" class="btn btn-default hover_pointer" data-dismiss="modal">No</a> 
      </div> 
     </div> 
    </div> 
   </div> 
   <div class="modal fade" id="duplicateEbook" role="dialog"> 
    <div class="modal-dialog"> <!-- Modal content--> 
     <div class="modal-content"> 
      <div class="modal-header"> 
       <h3 class="modal-title">Duplicate eBook</h3> 
      </div> 
      <div class="modal-body"> 
       <p id="duplicateEbookText"></p> 
      </div> 
      <div class="modal-footer"> <a id="duplicateEbookConfirm" type="button" class="btn btn-default hover_pointer">Yes</a> <a type="button" class="btn btn-default hover_pointer" data-dismiss="modal">No</a> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
 </div>  
 <div id="BottomSection" class="clear"> 
  <div class="container-fluid footerWrapper"> 
   <div class="innerWrapper"> 
    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12 location"> <span id="large">University Store</span>
     <br> 400 Cedar Ave.
     <br> West Long Branch, NJ
     <br> 07764-1898
     <br> Phone: 732-571-3453
    </div> 
    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12 hours"> <span id="large">Hours</span>
     <br> Monday 8:30am - 4pm
     <br> Tuesday 8:30am - 4pm
     <br> Wednesday 8:30am - 4pm
     <br> Thursday 8:30am - 4pm
     <br> Friday 8:30am - 4pm
     <br> Saturday Closed
     <br> Sunday Closed
    </div> 
    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12 info"> <span id="large">Information</span>
     <br> <a href="http://mubookstore.monmouth.edu/Contact">Contact</a>
     <br> <a href="http://mubookstore.monmouth.edu/storeabout">About</a>
     <br> <a href="http://mubookstore.monmouth.edu/SiteText?id=74451">Return Policy</a>
     <br> <a href="http://mubookstore.monmouth.edu/SiteText?id=74454">Textbook Rental Policy</a>
     <br> <a href="http://mubookstore.monmouth.edu/SiteText?id=74452">Shipping Policy</a>
     <br> <a href="http://mubookstore.monmouth.edu/SiteText?id=74453">Miscellaneous Policies</a>
     <br> <a href="http://mubookstore.monmouth.edu/SiteText?id=74459"></a>
    </div> 
    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12 social"> <a href="https://www.facebook.com/MonmouthUniversityBookstore/" target="_blank"><img alt="Monmouth Facebook" src="/SiteImages/27-SchoolImages/27-2019%20Redesign/27-icons/27-facebook.png"></a> <a href="https://www.instagram.com/monmouthuniversitybookstore/" target="_blank"><img alt="Monmouth Instagram" src="/SiteImages/27-SchoolImages/27-2019%20Redesign/27-icons/27-instagram.png"></a> <a href="https://twitter.com/MU_Bookstore_" target="_blank"><img alt="Monmouth Twitter" src="/SiteImages/27-SchoolImages/27-2019%20Redesign/27-icons/27-twitter.png"></a> <a href="https://www.pinterest.com/mustore/" target="_blank"><img alt="Monmouth Pinterest" src="/SiteImages/27-SchoolImages/27-2019%20Redesign/27-icons/27-pinterest.png"></a> 
    </div> 
   </div> 
  </div> 
  <input name="9280907" type="hidden" value="{ id = Text_Id }"> 
 </div> 
 <div class="modal fade" id="errorModal" role="dialog"> 
  <div class="modal-dialog"> <!-- Modal content--> 
   <div class="modal-content"> 
    <div class="modal-header"> 
     <p class="modal-title">Critical Error!</p> 
    </div> 
    <div class="modal-body"> 
     <p>Failed to call the server.</p> 
    </div> 
    <div class="modal-footer"> <a type="button" class="btn btn-default hover_pointer" data-dismiss="modal">Close</a> 
    </div> 
   </div> 
  </div> 
 </div> 
 <div id="dynamicModal" class="modal fade" role="dialog"> 
  <input type="hidden" value="" id="dynamicButton"> 
  <div class="modal-dialog"> <!-- Modal content--> 
   <div class="modal-content dynamicModalContent"> 
   </div> 
  </div> 
 </div> 
 <div id="sessionModal" class="modal fade" role="dialog" data-keyboard="false" data-backdrop="static"> 
  <div class="modal-dialog"> <!-- Modal content--> 
   <div class="modal-content"> 
    <div class="modal-header"> 
     <p class="modal-title">Session Timeout</p> 
    </div> 
    <div class="modal-body"> 
     <p>Your session has timed out and requires a page refresh.</p> 
    </div> 
    <div class="modal-footer"> <a class="btn btn-default sessionClose">Refresh Page</a> 
    </div> 
   </div> 
  </div> 
 </div> 
</main> 
<footer> 
</footer> 
<div id="div_privacy" class="textc">
 <a href="/Privacy" tabindex="0">Privacy and Disclaimer</a>
</div> 
<div id="Server">
 I.1.B 
</div> 
<script type="text/javascript">
        var token = $('input[name="__RequestVerificationToken"]').val();
         var sub = "";
        var odu = "";
        var combine = "";
        //shows hides New/Used Rental/Purchase if they select both "no" in course popover
        $(document).on('click', ':radio[name="ODU_IND"]', function () {
            var $subIndAnswer = $('input[name="SUB_IND"]:checked').val();
            var $oduIndAnswer = $('input[name="ODU_IND"]:checked').val();
            var $globalsub = $('#AllowSubs').val();
            if ($oduIndAnswer == "DO NOT ADD TO ORDER" && ($subIndAnswer == "NO" || $globalsub == "False")) {
                $('.changePref').hide();
            } else {
                var newCheck = $('input[name="ODU_IND_N"]:checked').val();
                var purchaseCheck = $('input[name="ODU_IND_R"]:checked').val();
                if (newCheck == undefined) {
                    $(':radio[name="ODU_IND_N"][value="NEW"]').prop('checked', true);
                }
                if (purchaseCheck == undefined) {
                    $(':radio[name="ODU_IND_R"][value="PURCHASE"]').prop('checked', true);
                }
                $('.changePref').show();
            }

        });
        //shows hides New/Used Rental/Purchase if they select both "no" in course popover
        $(document).on('click', ':radio[name="SUB_IND"]', function () {
            var $subIndAnswer = $('input[name="SUB_IND"]:checked').val();
            var $oduIndAnswer = $('input[name="ODU_IND"]:checked').val();
            var $globalODU = $("#allowOdu").val();
            if (($oduIndAnswer == "DO NOT ADD TO ORDER" || $globalODU == "False") && $subIndAnswer == "NO") {
                $('.changePref').hide();
            } else {
                var newCheck = $('input[name="ODU_IND_N"]:checked').val();
                var purchaseCheck = $('input[name="ODU_IND_R"]:checked').val();
                if (newCheck == undefined) {
                    $(':radio[name="ODU_IND_N"][value="NEW"]').prop('checked', true);
                }
                if (purchaseCheck == undefined) {
                    $(':radio[name="ODU_IND_R"][value="PURCHASE"]').prop('checked', true);
                }
                $('.changePref').show();
            }

        });
        //enter event when focus is on save button in course popover
        $(document).on("keyup", ".save_whole", function (e) {
            if (e.keyCode == 13) {
                $(this).click();
            }
        });
        //enter event when focus is on save button in individual popover
        $(document).on("keyup", ".save_one", function (e) {
            if (e.keyCode == 13) {
                $(this).click();
            }
        });
        //enter event when focus is on popover button
        $(document).on("keyup", ".popover_button_close", function (e) {
            if (e.keyCode == 13) {
                $(this).click();
            }
        });
        //enter event when focus is on popover button
        $(document).on("keyup", "[data-toggle='popover']", function (e) {
            if (e.keyCode == 13) {
                $(this).click();
            }
        });
        //click event on course popover
        $(document).on("click", "[data-toggle='popover']", function () {
            $("[data-toggle='popover']").not(this).popover('hide');
            var $showODU = $('#allowOdu').val();
            var $hasRental = $('#hasRental').val();
            var $allowSubs = $('#AllowSubs').val();
            var $subText = $(this).parent().parent().find('.Substitute').text();
            var $orderUpdateText = $(this).parent().next().next().find('span').text();
            var $orderPrefText = $(this).parent().next().next().next().find('span').text();
            var $orderSplitText = $orderPrefText.split('/');
            var $orderNew = $orderSplitText[0];
            var $orderRental = $orderSplitText[1];
            $orderUpdateText = $orderUpdateText.toUpperCase();
            $orderPrefText = $orderPrefText.toUpperCase();
            $orderNew = $orderNew.toUpperCase();
            if ($orderRental != undefined) {
                $orderRental = $orderRental.toUpperCase();
            }
            $(':radio[name="SUB_IND"][value="' + $subText + '"]').prop('checked', true);
            $(':radio[name="ODU_IND"][value="' + $orderUpdateText + '"]').prop('checked', true);
            $(':radio[name="ODU_IND_N"][value="' + $orderNew + '"]').prop('checked', true);
            $(':radio[name="ODU_IND_R"][value="' + $orderRental + '"]').prop('checked', true);
            if ($hasRental == "False") {
                $('.rentalQuestionsSingle').hide();
            } else {
                $('.rentalQuestionsSingle').show();
            }
            if ($allowSubs == "False") {
                $('.changeSub').hide();
            } else {
                $('.changeSub').show();
            }
            if ($showODU == "False") {
                $('.changeUpdate').hide();
            } else {
                $('.changeUpdate').show();
            }
            if ($orderPrefText == "N/A") {
                $('.changePref').hide();
            } else {
                $('.changePref').show();
            }

        });
        //click event on individual popover
        $(document).on("click", ".sub_popover_button", function () {
            var $subIndAnswer = $('input[name="SUB_IND"]:checked').val();
            if (typeof $subIndAnswer != 'undefined') {
                $(this).parent().parent().parent().parent().parent().find('.Substitute').text($subIndAnswer);
            }
            $('[data-toggle="popover"]').popover('hide');
            $subIndAnswer = undefined;
        });
        //save button on course popover click event
        $(document).on("click", ".save_whole", function () {
            var $thisclick = $(this);
            var $showODU = $('#allowOdu').val();
            var $hasRental = $('#hasRental').val();
            var $allowSubs = $('#AllowSubs').val();
            var $subIndAnswer = $('input[name="SUB_IND"]:checked').val();
            var $oduIndAnswer = $('input[name="ODU_IND"]:checked').val();
            var $oduIndAnswerID = $('input[name="ODU_IND"]:checked').attr('data-id');
            var $oduIndAnswerN = $('input[name="ODU_IND_N"]:checked').val();
            var $oduIndAnswerR = $('input[name="ODU_IND_R"]:checked').val();
            var $sub_ans, $oduCombine, pref;
            var cou_id = $(this).parent().parent().parent().parent().parent().parent().find('.csId').val();
            var $oduCombine;

            if ($subIndAnswer === "YES") {
                $sub_ans = "true";
            } else {
                $sub_ans = "false";
            }
            if ($hasRental == "False") {
                var $oduCombine = $oduIndAnswerN;
            } else {
                var $oduCombine = $oduIndAnswerN + "/" + $oduIndAnswerR;
            }
            if ($allowSubs == "True" && $showODU == "True") {
                if ($subIndAnswer == "NO" && $oduIndAnswer == "DO NOT ADD TO ORDER") {
                    //ajax call no 3
                    var model = {
                        globalSetting: '',
                        csId: '',
                        subs: '',
                        oduPref: '',
                        updatePref: '',
                        modal1_yes: '', //default to false when not selected
                        modal2_yes: '',
                        modal3_yes: '' //default to 2 when is not selected
                    };
                    model.globalSetting = false;
                    model.csId = cou_id;
                    model.subs = $sub_ans;
                    model.oduPref = $oduIndAnswerID;
                    model.updatePref = "2";
                    model.modal1_yes = "True";
                    model.modal2_yes = "True";
                    model.modal3_yes = "False";

                    $.ajax({
                        type: "POST",
                        url: 'ShoppingCart/odu',
                         data: {  __RequestVerificationToken: token,   "model": model },
                        dataType: "json",
                        error: function (xhr) {
                            $('#errorModal').modal('show');
                            $('#errorModal').focus();
                        },
                        success: function (data, jqXHR) {
                            var cart_total = data.incartTotal;
                            var cart_sub = data.subsTotal;
                            var cart_count = data.count;
                            var cart_has_subs = data.HasSubs;
                            if (cart_has_subs == true) {
                                $("#Highest_Cart").show();
                            } else {
                                $("#Highest_Cart").hide();
                            }
                            $("#ItemCount").text(cart_count);
                            $("#SubTotal").text(cart_total);
                            $('.CartCount').text(cart_count);
                            $('.CartTotal').text(cart_total);
                            $('#New_Cart_Total').text(cart_sub);
                            $($thisclick).parent().parent().parent().parent().parent().parent().find('.cou-upd-pref').val($oduIndAnswerID);
                            $($thisclick).parent().parent().parent().parent().parent().parent().find('.cou-odu-pref').val(pref);
                            $($thisclick).parent().parent().parent().parent().parent().parent().find('#cou-sub').val($sub_ans);
                            $($thisclick).parent().parent().parent().parent().next().find('span').text($subIndAnswer);
                            $($thisclick).parent().parent().parent().parent().next().next().find('.Update_Order').text($oduIndAnswer);
                            $($thisclick).parent().parent().parent().parent().next().next().next().find('span').text("N/A");


                            return;

                        }
                    });

                } else {
                    //call complete ajax
                    switch ($oduCombine) {
                        case 'NEW/PURCHASE':
                            pref = 4
                            break;
                        case 'NEW':
                            pref = 4
                            break;
                        case 'USED/PURCHASE':
                            pref = 2
                            break;
                        case 'NEW/PURCHASE':
                            pref = 4
                            break;
                        case 'USED':
                            pref = 2
                            break;
                        case 'NEW/RENTAL':
                            pref = 8
                            break;
                        case 'USED/RENTAL':
                            pref = 10
                            break;
                        default:
                            pref = 4
                    }
                    var model = {
                        globalSetting: '',
                        csId: '',
                        subs: '',
                        oduPref: '',
                        updatePref: '',
                        modal1_yes: '', //default to false when not selected
                        modal2_yes: '',
                        modal3_yes: '' //default to 2 when is not selected
                    };
                    model.globalSetting = false;
                    model.csId = cou_id;
                    model.subs = $sub_ans;
                    model.oduPref = $oduIndAnswerID;
                    model.updatePref = pref;
                    model.modal1_yes = "True";
                    model.modal2_yes = "True";
                    model.modal3_yes = "True";

                    $.ajax({
                        type: "POST",
                        url: 'ShoppingCart/odu',
                        data: {  __RequestVerificationToken: token,  "model": model },
                        dataType: "json",
                        error: function (xhr) {
                            $('#errorModal').modal('show');
                            $('#errorModal').focus();
                        },
                        success: function (data, jqXHR) {
                            var cart_total = data.incartTotal;
                            var cart_sub = data.subsTotal;
                            var cart_count = data.count;
                            var cart_has_subs = data.HasSubs;
                            $("#ItemCount").text(cart_count);
                            $("#SubTotal").text(cart_total);
                            $('.CartCount').text(cart_count);
                            $('.CartTotal').text(cart_total);
                            $('#New_Cart_Total').text(cart_sub);
                            $($thisclick).parent().parent().parent().parent().parent().parent().find('.cou-upd-pref').val($oduIndAnswerID);
                            $($thisclick).parent().parent().parent().parent().parent().parent().find('.cou-odu-pref').val(pref);
                            $($thisclick).parent().parent().parent().parent().parent().parent().find('#cou-sub').val($sub_ans);
                            $($thisclick).parent().parent().parent().parent().next().find('span').text($subIndAnswer);
                            $($thisclick).parent().parent().parent().parent().next().next().find('.Update_Order').text($oduIndAnswer);
                            $($thisclick).parent().parent().parent().parent().next().next().next().find('span').text($oduCombine);

                            if (cart_has_subs == true) {
                                $("#Highest_Cart").show();
                            } else {
                                $("#Highest_Cart").hide();
                            }

                            return;

                        }
                    });
                }

            } else if ($allowSubs == "True" && $showODU == "False") {
                if ($subIndAnswer == "NO") {
                    // call ajax no 2 or 3
                    var model = {
                        globalSetting: '',
                        csId: '',
                        subs: '',
                        oduPref: '',
                        updatePref: '',
                        modal1_yes: '', //default to false when not selected
                        modal2_yes: '',
                        modal3_yes: '' //default to 2 when is not selected
                    };
                    model.globalSetting = false;
                    model.csId = cou_id;
                    model.subs = $sub_ans;
                    model.oduPref = "4";
                    model.updatePref = "2";
                    model.modal1_yes = "True";
                    model.modal2_yes = "False";
                    model.modal3_yes = "False";

                    $.ajax({
                        type: "POST",
                        url: 'ShoppingCart/odu',
                        data: {  __RequestVerificationToken: token,  "model": model },
                        dataType: "json",
                        error: function (xhr) {
                            $('#errorModal').modal('show');
                            $('#errorModal').focus();
                        },
                        success: function (data, jqXHR) {
                            var cart_total = data.incartTotal;
                            var cart_sub = data.subsTotal;
                            var cart_count = data.count;
                            var cart_has_subs = data.HasSubs;
                            $("#ItemCount").text(cart_count);
                            $("#SubTotal").text(cart_total);
                            $('.CartCount').text(cart_count);
                            $('.CartTotal').text(cart_total);
                            $('#New_Cart_Total').text(cart_sub);
                            $($thisclick).parent().parent().parent().parent().parent().parent().find('.cou-upd-pref').val($oduIndAnswerID);
                            $($thisclick).parent().parent().parent().parent().parent().parent().find('.cou-odu-pref').val(pref);
                            $($thisclick).parent().parent().parent().parent().parent().parent().find('#cou-sub').val($sub_ans);
                            $($thisclick).parent().parent().parent().parent().next().find('span').text($subIndAnswer);
                            $($thisclick).parent().parent().parent().parent().next().next().find('.Update_Order').text("N/A");
                            $($thisclick).parent().parent().parent().parent().next().next().next().find('span').text("N/A");
                            if (cart_has_subs == true) {
                                $("#Highest_Cart").show();
                            } else {
                                $("#Highest_Cart").hide();
                            }
                            return;

                        }
                    });

                } else {
                    //cal ajax no 2
                    switch ($oduCombine) {
                        case 'NEW/PURCHASE':
                            pref = 4
                            break;
                        case 'NEW':
                            pref = 4
                            break;
                        case 'USED/PURCHASE':
                            pref = 2
                            break;
                        case 'NEW/PURCHASE':
                            pref = 4
                            break;
                        case 'USED':
                            pref = 2
                            break;
                        case 'NEW/RENTAL':
                            pref = 8
                            break;
                        case 'USED/RENTAL':
                            pref = 10
                            break;
                        default:
                            pref = 4
                    }
                    var model = {
                        globalSetting: '',
                        csId: '',
                        subs: '',
                        oduPref: '',
                        updatePref: '',
                        modal1_yes: '', //default to false when not selected
                        modal2_yes: '',
                        modal3_yes: '' //default to 2 when is not selected
                    };
                    model.globalSetting = false;
                    model.csId = cou_id;
                    model.subs = $sub_ans;
                    model.oduPref = "4";
                    model.updatePref = pref;
                    model.modal1_yes = "True";
                    model.modal2_yes = "False";
                    model.modal3_yes = "True";

                    $.ajax({
                        type: "POST",
                        url: 'ShoppingCart/odu',
                        data: {  __RequestVerificationToken: token,  "model": model },
                        dataType: "json",
                        error: function (xhr) {
                            $('#errorModal').modal('show');
                            $('#errorModal').focus();
                        },
                        success: function (data, jqXHR) {
                            var cart_total = data.incartTotal;
                            var cart_sub = data.subsTotal;
                            var cart_count = data.count;
                            var cart_has_subs = data.HasSubs;
                            $("#ItemCount").text(cart_count);
                            $("#SubTotal").text(cart_total);
                            $('.CartCount').text(cart_count);
                            $('.CartTotal').text(cart_total);
                            $('#New_Cart_Total').text(cart_sub);
                            $($thisclick).parent().parent().parent().parent().parent().parent().find('.cou-upd-pref').val($oduIndAnswerID);
                            $($thisclick).parent().parent().parent().parent().parent().parent().find('.cou-odu-pref').val(pref);
                            $($thisclick).parent().parent().parent().parent().parent().parent().find('#cou-sub').val($sub_ans);
                            $($thisclick).parent().parent().parent().parent().next().find('span').text($subIndAnswer);
                            $($thisclick).parent().parent().parent().parent().next().next().find('.Update_Order').text("N/A");
                            $($thisclick).parent().parent().parent().parent().next().next().next().find('span').text($oduCombine);
                            if (cart_has_subs == true) {
                                $("#Highest_Cart").show();
                            } else {
                                $("#Highest_Cart").hide();
                            }

                            return;

                        }
                    });
                }
            } else if ($allowSubs == "False" && $showODU == "True") {
                if ($oduIndAnswer == "DO NOT ADD TO ORDER") {
                    //call ajax no 1 or 3
                    var model = {
                        globalSetting: '',
                        csId: '',
                        subs: '',
                        oduPref: '',
                        updatePref: '',
                        modal1_yes: '', //default to false when not selected
                        modal2_yes: '',
                        modal3_yes: '' //default to 2 when is not selected
                    };
                    model.globalSetting = false;
                    model.csId = cou_id;
                    model.subs = "False";
                    model.oduPref = $oduIndAnswerID;
                    model.updatePref = "2";
                    model.modal1_yes = "False";
                    model.modal2_yes = "True";
                    model.modal3_yes = "False";

                    $.ajax({
                        type: "POST",
                        url: 'ShoppingCart/odu',
                        data: {  __RequestVerificationToken: token,  "model": model },
                        dataType: "json",
                        error: function (xhr) {
                            $('#errorModal').modal('show');
                            $('#errorModal').focus();
                        },
                        success: function (data, jqXHR) {
                            var cart_total = data.incartTotal;
                            var cart_sub = data.subsTotal;
                            var cart_count = data.count;
                            var cart_has_subs = data.HasSubs;
                            $("#ItemCount").text(cart_count);
                            $("#SubTotal").text(cart_total);
                            $('.CartCount').text(cart_count);
                            $('.CartTotal').text(cart_total);
                            $('#New_Cart_Total').text(cart_sub);
                            $($thisclick).parent().parent().parent().parent().parent().parent().find('.cou-upd-pref').val($oduIndAnswerID);
                            $($thisclick).parent().parent().parent().parent().parent().parent().find('.cou-odu-pref').val(pref);
                            $($thisclick).parent().parent().parent().parent().parent().parent().find('#cou-sub').val($sub_ans);
                            $($thisclick).parent().parent().parent().parent().next().find('span').text('N/A');
                            $($thisclick).parent().parent().parent().parent().next().next().find('.Update_Order').text($oduIndAnswer);
                            $($thisclick).parent().parent().parent().parent().next().next().next().find('span').text('N/A');
                            if (cart_has_subs == true) {
                                $("#Highest_Cart").show();
                            } else {
                                $("#Highest_Cart").hide();
                            }
                            return;

                        }
                    });
                } else {
                    //call ajax no 1
                    switch ($oduCombine) {
                        case 'NEW/PURCHASE':
                            pref = 4
                            break;
                        case 'NEW':
                            pref = 4
                            break;
                        case 'USED/PURCHASE':
                            pref = 2
                            break;
                        case 'NEW/PURCHASE':
                            pref = 4
                            break;
                        case 'USED':
                            pref = 2
                            break;
                        case 'NEW/RENTAL':
                            pref = 8
                            break;
                        case 'USED/RENTAL':
                            pref = 10
                            break;
                        default:
                            pref = 4
                    }
                    var model = {
                        globalSetting: '',
                        csId: '',
                        subs: '',
                        oduPref: '',
                        updatePref: '',
                        modal1_yes: '', //default to false when not selected
                        modal2_yes: '',
                        modal3_yes: '' //default to 2 when is not selected
                    };
                    model.globalSetting = false;
                    model.csId = cou_id;
                    model.subs = "False";
                    model.oduPref = $oduIndAnswerID;
                    model.updatePref = pref;
                    model.modal1_yes = "False";
                    model.modal2_yes = "True";
                    model.modal3_yes = "True";

                    $.ajax({
                        type: "POST",
                        url: 'ShoppingCart/odu',
                        data: {  __RequestVerificationToken: token,  "model": model },
                        dataType: "json",
                        error: function (xhr) {
                            $('#errorModal').modal('show');
                            $('#errorModal').focus();
                        },
                        success: function (data, jqXHR) {
                            var cart_total = data.incartTotal;
                            var cart_sub = data.subsTotal;
                            var cart_count = data.count;
                            var cart_has_subs = data.HasSubs;
                            $("#ItemCount").text(cart_count);
                            $("#SubTotal").text(cart_total);
                            $('.CartCount').text(cart_count);
                            $('.CartTotal').text(cart_total);
                            $('#New_Cart_Total').text(cart_sub);
                            $($thisclick).parent().parent().parent().parent().parent().parent().find('.cou-upd-pref').val($oduIndAnswerID);
                            $($thisclick).parent().parent().parent().parent().parent().parent().find('.cou-odu-pref').val(pref);
                            $($thisclick).parent().parent().parent().parent().parent().parent().find('#cou-sub').val($sub_ans);
                            $($thisclick).parent().parent().parent().parent().next().find('span').text('N/A');
                            $($thisclick).parent().parent().parent().parent().next().next().find('.Update_Order').text($oduIndAnswer);
                            $($thisclick).parent().parent().parent().parent().next().next().next().find('span').text($oduCombine);
                            if (cart_has_subs == true) {
                                $("#Highest_Cart").show();
                            } else {
                                $("#Highest_Cart").hide();
                            }
                            return;

                        }
                    });

                }

            }

            $('[data-toggle="popover"]').popover('hide');
        });
        //save button on individual popover click event
        $(document).on("click", ".save_one", function () {
            var thisclick = $(this);
            var $subIndAnswer = $('input[name="SUB_IND"]:checked').val();
            var $sub_ans;
            if ($subIndAnswer === "YES") {
                $sub_ans = "true";
            } else {
                $sub_ans = "false";
            }
            $(this).parent().parent().parent().parent().parent().parent().parent().parent().find('.txt-subs').val($sub_ans);
            var bookCartId = $(this).parent().parent().parent().parent().parent().parent().parent().next().next().next().next().next().val();

            $.ajax({
                type: "POST",
                url: 'ShoppingCart/bookSubs',
                dataType: "json",
                data: { "sc_id": bookCartId, "subs": $sub_ans },
                error: function (xhr) {
                    $('#errorModal').modal('show');
                    $('#errorModal').focus();
                },
                success: function (data, jqXHR) {
                    // Set mini cart values, Cart Total and substitute total values, values are coming from the db in these valriables
                    var cart_total = data.incartTotal;
                    var cart_sub = data.subsTotal;
                    var cart_count = data.count;
                    var cart_has_subs = data.HasSubs;
                    if (cart_has_subs == true) {
                        $("#Highest_Cart").show();
                    } else {
                        $("#Highest_Cart").hide();
                    }
                    //cart_total = parseFloat(Math.round(cart_total * 100) / 100).toFixed(2);
                    //cart_sub = parseFloat(Math.round(cart_sub * 100) / 100).toFixed(2);
                    //cart_total = "$" + cart_total;
                    //cart_sub = "$" + cart_sub;
                    $("#ItemCount").text(cart_count);
                    $("#SubTotal").text(cart_total);
                    $('.CartCount').text(cart_count);
                    $('.CartTotal').text(cart_total);
                    $('#New_Cart_Total').text(cart_sub);

                    return;

                }
            });

        });
        //click event on close button on course popover
        $(document).on("click", ".popover_button_close", function () {
            $('[data-toggle="popover"]').popover('hide');
        });
        //click event on close button on individual popover
        $(document).on("click", ".sub_popover_button_close", function () {
            $('[data-toggle="popover"]').popover('hide');
        });
        $(document).ready(function () {
            $('.giftCardNumberError').each(function () {
                var id = $(this).attr('data-id');
                $(this).addClass('giftCardNumberError' + id);
            });
            $('.giftCardPinError').each(function () {
                var id = $(this).attr('data-id');
                $(this).addClass('giftCardPinError' + id);
            });

            $('.Gift_Card_Email_Input').each(function () {
                $(this).attr('aria-label', 'Gift Card Email');
            });
            $('.Gift_Card_Message_Input').each(function () {
                $(this).attr('aria-label', 'Gift Card Message');
            });
            $('.Gift_Card_Number_Input').each(function () {
                $(this).attr('aria-label', 'Gift Card Number');
            });
            $('.Gift_Card_Pin_Input').each(function () {
                $(this).attr('aria-label', 'Gift Card Pin');
            });
            //assigns individual class names to price in merchandise to make it easier to target
            $('.merchPanel').each(function (e) {
                var merchID = $(this).attr('data-id');
                //give merch price an individual class name
                $(this).find('.merchPrice').addClass('merchPrice' + merchID);
            });
            //Payment Button Submit form.  Takes focus off of everything so that all change jquery events will fire.  
            $('#PaymentBtn').click(function () {
                $("#hiddenInput").focus();
                var i;
                var valid = document.getElementsByClassName("Gift_Card_Email_Input");
                var validNumber = document.getElementsByClassName('Gift_Card_Number_Input');
                var validPin = document.getElementsByClassName('Gift_Card_Pin_Input');
                for (i = 0; i < valid.length; i++) {
                    if (valid[i].checkValidity() == false) {
                        valid[i].reportValidity();
                        return;
                    }
                }
                for (i = 0; i < validNumber.length; i++) {
                    if (validNumber[i].checkValidity() == false) {
                        validNumber[i].reportValidity();
                        return;
                    }
                }
                for (i = 0; i < validPin.length; i++) {
                    if (validPin[i].checkValidity() == false) {
                        validPin[i].reportValidity();
                        return;
                    }
                }
               $("form").submit();
            });
            var $showODU = $('#allowOdu').val();
            var $hasRental = $('#hasRental').val();
            var $allowSubs = $('#AllowSubs').val();
            var $answered = $('#modalsAnswered').val();
            var $cart1 = $('#Cart_Total').text();
            var $cart2 = $('#New_Cart_Total').text();
            var $CartHasSubs = $("#CartHasSubstitutions").val();
            $cart1 = $cart1.replace('Cart Total: $', '');
            $cart1 = $cart1.trim();
            $cart2 = $cart2.replace('$', '');
            $cart2 = $cart2.trim();
            //Shows all modal answers on page load if they have already been answered
            if ($('#showModals').val() == "True") {
                if ($answered == "True") {
                    $('#PaymentBtn').show();
                    $('#PaymentBtn').prop('disabled', false);
                    $(".course_with_materials").show();
                    $(".course_with_no_materials").show();
                    $(".course_with_textbook").show();
                    $('#CheckoutBtn').hide();
                    if ($cart2 == "0.00") {
                        $('#Highest_Cart').hide();
                    } else if ($CartHasSubs == true) {
                        $('#Highest_Cart').show();
                    }
                }
                if ($showODU == "False" && $allowSubs == "False") {
                    $('#PaymentBtn').show();
                    $('#PaymentBtn').prop('disabled', false);
                    $(".course_with_materials").hide();
                    $(".course_with_no_materials").hide();
                    $(".course_with_textbook").hide();
                    $('#CheckoutBtn').hide();
                    $('#Highest_Cart').hide();
                }
                var $rental = $('#hasRental').val();
                if ($rental == "False") {
                    $('.rentalQuestions').hide();
                } else {
                    $('.rentalQuestions').show();
                }
                var $length = $('.validation-summary-errors');
                var $courseLength = $('#COURSES').length;
                if ($length.length) {
                    var errorcheck = $('.validation-summary-errors ul li').text();

                    if (errorcheck = "There are no items in your cart.") {
                        if ($courseLength >= 1) {
                            $($length).hide();
                        } else {
                            $('.Payment_btn').hide();
                            $('#CheckoutBtn').hide();
                            $('#Highest_Cart').hide();
                        }
                    }
                }
            } else {
                $('#PaymentBtn').show();
                $('#PaymentBtn').prop('disabled', false);
                $('#CheckoutBtn').hide();
                var $length = $('.validation-summary-errors');
                if ($length.length) {
                    var errorcheck = $('.validation-summary-errors ul li').text();
                    if (errorcheck = "There are no items in your cart.") {
                        if ($courseLength >= 1) {
                            $($length).hide();
                        } else {
                            $('.Payment_btn').hide();
                            $('#CheckoutBtn').hide();
                            $('#Highest_Cart').hide();
                        }
                    }
                }

            }
            //click event for cart help icon
            $('#Cart_Help').click(function () {
                $('#Question_Mark').modal('toggle');
                $('#Question_Mark').focus();
            });
            //enter event for cart help icon on focus
            $('#Cart_Help').keyup(function (e) {
                if (e.keyCode == 13) {
                    $(this).click();
                }

            });
            var pref_data = "<div class='changeSub'>Change Substitution Preference: <fieldset><legend class='hidden_label border_none'>Change Substitution Preferences</legend><div class='radio'><label><input type='radio' name='SUB_IND' value = 'YES'>YES</label></div><div class='radio'><label><input type='radio' name='SUB_IND' value = 'NO'>NO</label></div></fieldset></div><div class='changeUpdate'>Change Update Order:<fieldset><legend class='hidden_label border_none'>Change Update Order</legend><div class='radio top5'><label><input type='radio' name='ODU_IND' value='ADD ONLY REQUIRED' data-id='2'>Add Only Required</label></div><div class='radio'><label><input type='radio' name='ODU_IND' value='ADD ALL MATERIALS' data-id='1'>Add All Materials</label></div><div class='radio'><label><input type='radio' name='ODU_IND' value='DO NOT ADD TO ORDER' data-id='3'>Do Not Add To Order</label></div></fieldset></div><div class='changePref'>Change Update Preference:<div class='option1'><p class='small bottom-5'>Select One:</p><fieldset><legend class='hidden_label border_none'>Change Update Preferences New/Used</legend><div class='radio'><label class='radio-inline'><input type='radio' name='ODU_IND_N' value='NEW'>NEW</label></div><div class='radio'><label class='radio-inline'><input type='radio' name='ODU_IND_N' value='USED'>USED</label></div></fieldset></div><div class='option2 rentalQuestionsSingle'><p class='small bottom-5'>Select One:</p><fieldset><legend class='hidden_label border_none'>Change Update Preferences New/Rental</legend><div class='radio'><label class='radio-inline'><input type='radio' name='ODU_IND_R' value='RENTAL'>RENTAL</label></div><div class='radio'><label class='radio-inline'><input type='radio' name='ODU_IND_R' value='PURCHASE'>PURCHASE</label></div></fieldset></div></div><div><a tabindex='0' class='btn btn-default popover_button save_whole left5'>Save</a><a tabindex='0' class='btn btn-default popover_button_close close_whole'>Close</a></div>";
            var pref_whole = '<p class="clear col-xs-12"><strong>Preferences: </strong><a tabindex="0" data-toggle="popover" data-placement="bottom" data-content="' + pref_data + '" data-html="true" class="fa fa-pencil-square-o left5 hover_pointer"></a></p>';
            var sub_data = "Change Substitution Preference: <fieldset><legend class='hidden_label border_none'>Change Substitution Preferences</legend><div class='radio'><label><input type='radio' name='SUB_IND' value = 'YES'>YES</label></div><div class='radio'><label><input type='radio' name='SUB_IND' value='NO'>NO</label></div></fieldset><div><a tabindex='0' class='btn btn-default sub_popover_button save_one left5'>Save</a><a tabindex='0' class='btn btn-default sub_popover_button_close close_one'>Close</a></div></div>";
            var sub_whole = '<span class=""><a tabindex="0" data-toggle="popover" data-placement="bottom" data-content="' + sub_data + '" data-html="true" class="fa fa-pencil-square-o left5 hover_pointer"></a></span>';
            //adds popovers to all necessary courses and individual text books if allowed
            $('.course_with_materials').prepend(pref_whole);
            if ($allowSubs == "True") {
                $('.course_with_textbook').find('p').append(sub_whole);
            }
            //turns on popover click event
            $('[data-toggle="popover"]').popover();
            //opens correct textbook modal questions when they need to be answered
            $("#CheckoutBtn").click(function (e) {
                e.preventDefault();
                var $hasDuplicateDuration = $("#HasDuplicateEbookDurations").val();
                var $duplicateDurationText = $('#DuplicateDurationText').val();
                var $hasDuplicateEbooks = $('#HasDuplicateEBooks').val();
                var $duplicateEbookText = $('#DuplicateEbookText').val();
                var $showODU = $('#allowOdu').val();
                var $hasRental = $('#hasRental').val();
                var $allowSubs = $('#AllowSubs').val();
                if ($hasDuplicateDuration == "True") {
                    $('#duplicateDurationText').text($duplicateDurationText);
                    $('#duplicateDuration').modal('show');
                    $('#duplicateDuration').focus();
                } else if ($hasDuplicateEbooks == "True") {
                    $('#duplicateEbookText').text($duplicateEbookText);
                    $("#duplicateEbook").modal('show');
                    $("#duplicateEbook").focus();
                } else if ($allowSubs == "True") {
                    $("#Sub_Preference").modal('show');
                    $("#Sub_Preference").focus();
                } else if ($showODU == "True") {
                    $("#ODU_Preference").modal('show');
                    $("#ODU_Preference").focus();
                } else if ($allowSubs == "False" && $showODU == "False") {
                    $('#PaymentBtn').click();
                }
            });
            //opens modal when user selects same ebook with same durations
            $('#duplicateDurationConfirm').click(function (e) {
                e.preventDefault();
                $('#duplicateDuration').modal('hide');
                var $hasDuplicateDuration = $("#HasDuplicateEbookDurations").val();
                var $duplicateDurationText = $('#DuplicateDurationText').val();
                var $hasDuplicateEbooks = $('#HasDuplicateEBooks').val();
                var $duplicateEbookText = $('#DuplicateEbookText').val();
                var $showODU = $('#allowOdu').val();
                var $hasRental = $('#hasRental').val();
                var $allowSubs = $('#AllowSubs').val();
                if ($hasDuplicateEbooks == "True") {
                    $('#duplicateEbookText').text($duplicateEbookText);
                    $("#duplicateEbook").modal('show');
                    $("#duplicateEbook").focus();
                } else if ($allowSubs == "True") {
                    $("#Sub_Preference").modal('show');
                    $("#Sub_Preference").focus();
                } else if ($showODU == "True") {
                    $("#ODU_Preference").modal('show');
                    $("#ODU_Preference").focus();
                } else if ($allowSubs == "False" && $showODU == "False") {
                    $('#PaymentBtn').click();
                }
            });
            //opens modal when user selects same ebook
            $('#duplicateEbookConfirm').click(function (e) {
                e.preventDefault();
                $("#duplicateEbook").modal('hide');
                var $hasDuplicateDuration = $("#HasDuplicateEbookDurations").val();
                var $duplicateDurationText = $('#DuplicateDurationText').val();
                var $hasDuplicateEbooks = $('#HasDuplicateEBooks').val();
                var $duplicateEbookText = $('#DuplicateEbookText').val();
                var $showODU = $('#allowOdu').val();
                var $hasRental = $('#hasRental').val();
                var $allowSubs = $('#AllowSubs').val();
                if ($allowSubs == "True") {
                    $("#Sub_Preference").modal('show');
                    $("#Sub_Preference").focus();
                } else if ($showODU == "True") {
                    $("#ODU_Preference").modal('show');
                    $("#ODU_Preference").focus();
                } else if ($allowSubs == "False" && $showODU == "False") {
                    $('#PaymentBtn').click();
                }
            });
            //Click event on sub modal question
            $("#Sub_Button").click(function (e) {
                e.preventDefault();
                var $showODU = $('#allowOdu').val();
                var $hasRental = $('#hasRental').val();
                var $allowSubs = $('#AllowSubs').val();
                var $subAnswer = $('input[name="SUB_OVERALL"]:checked').val();
                if (typeof $subAnswer == 'undefined') {
                    $('#Sub_Error').show();
                } else {
                    $('#Sub_Error').hide();
                    $(".cou-subs").val(true);
                    if ($subAnswer == "NO") {
                        $("#global-subs").val(false);

                    } else {
                        $("#global-subs").val(true);
                    }
                    $(".txt-subs").val(true);
                    $("#Sub_Preference").modal('hide');
                    if ($showODU == "True") {
                        $("#ODU_Preference").modal('show');
                        $("#ODU_Preference").focus();
                    } else if ($subAnswer == "YES" && $showODU == "False") {
                        $("#ODU_Update").modal('show');
                        $("#ODU_Update").focus();
                    } else {
                        //Run Ajax no 2 and 3
                        var model = {
                            globalSetting: '',
                            csId: '',
                            subs: '',
                            oduPref: '',
                            updatePref: '',
                            modal1_yes: '', //default to false when not selected
                            modal2_yes: '',
                            modal3_yes: '' //default to 2 when is not selected
                        };
                        model.globalSetting = true;
                        model.csId = '0';
                        model.subs = $("#global-subs").val();
                        model.oduPref = "4";
                        model.updatePref = "2";
                        model.modal1_yes = "True";
                        model.modal2_yes = "False";
                        model.modal3_yes = "False";

                        $.ajax({
                            type: "POST",
                            url: 'ShoppingCart/odu',
                            data: {  __RequestVerificationToken: token,  "model": model },
                            dataType: "json",
                            error: function (xhr) {
                                $('#errorModal').modal('show');
                                $('#errorModal').focus();
                            },
                            success: function (data, jqXHR) {
                                // Set mini cart values, Cart Total and substitute total values, values are coming from the db in these valriables
                                var cart_total = data.incartTotal;
                                var cart_sub = data.subsTotal;
                                var cart_count = data.count;
                                var cart_has_subs = data.HasSubs;
                                if (cart_has_subs == true) {
                                    $("#Highest_Cart").show();
                                } else {
                                    $("#Highest_Cart").hide();
                                }
                                $("#ItemCount").text(cart_count);
                                $("#SubTotal").text(cart_total);
                                $('.CartCount').text(cart_count);
                                $('.CartTotal').text(cart_total);
                                $('#PaymentBtn').show();
                                $('#PaymentBtn').prop('disabled', false);
                                $('#New_Cart_Total').text(cart_sub);
                                $(".course_with_materials").show();
                                $(".course_with_no_materials").show();
                                $(".course_with_textbook").show();
                                $('#CheckoutBtn').hide();
                                //$('#Highest_Cart').hide();
                                $(".Update_Order").text("N/A");
                                $(".Update_Preference").text("N/A");
                                $(".Substitute").text($subAnswer);
                                return;

                            }
                        });
                    }
                }
            });
            //Click event on ODU modal question
            $("#ODU_Button").click(function (e) {
                e.preventDefault();
                var $showODU = $('#allowOdu').val();
                var $hasRental = $('#hasRental').val();
                var $allowSubs = $('#AllowSubs').val();
                var $subAnswer = $('input[name="SUB_OVERALL"]:checked').val();
                var $oduAnswer = $('input[name="ODU_OVERALL"]:checked').val();
                var $oduDataId = $('input[name="ODU_OVERALL"]:checked').attr('data-id');
                if (typeof $oduAnswer == 'undefined') {
                    $('#ODU_Error').show();
                } else {
                    if ($allowSubs == "True") {
                        if ($subAnswer == "YES") {
                            $("#ODU_Preference").modal('hide');
                            $('#ODU_Error').hide();
                            $("#ODU_Update").modal('show');
                            $("#ODU_Update").focus();
                        } else {
                            if ($oduAnswer != "DO NOT ADD TO ORDER") {
                                $("#ODU_Preference").modal('hide');
                                $('#ODU_Error').hide();
                                $("#ODU_Update").modal('show');
                                $("#ODU_Update").focus();
                            } else {
                                //call ajax no 3
                                var model = {
                                    globalSetting: '',
                                    csId: '',
                                    subs: '',
                                    oduPref: '',
                                    updatePref: '',
                                    modal1_yes: '', //default to false when not selected
                                    modal2_yes: '',
                                    modal3_yes: '' //default to 2 when is not selected
                                };
                                model.globalSetting = true;
                                model.csId = '0';
                                model.subs = $("#global-subs").val();
                                model.oduPref = $oduDataId;
                                model.updatePref = "2";
                                model.modal1_yes = "True";
                                model.modal2_yes = "True";
                                model.modal3_yes = "False";

                                $.ajax({
                                    type: "POST",
                                    url: 'ShoppingCart/odu',
                                    data: {  __RequestVerificationToken: token,  "model": model },
                                    dataType: "json",
                                    error: function (xhr) {
                                        $('#errorModal').modal('show');
                                        $('#errorModal').focus();
                                    },
                                    success: function (data, jqXHR) {
                                        var cart_total = data.incartTotal;
                                        var cart_sub = data.subsTotal;
                                        var cart_count = data.count;
                                        var cart_has_subs = data.HasSubs;
                                        if (cart_has_subs == true) {
                                            $("#Highest_Cart").show();
                                        } else {
                                            $("#Highest_Cart").hide();
                                        }
                                        $("#ItemCount").text(cart_count);
                                        $("#SubTotal").text(cart_total);
                                        $('.CartCount').text(cart_count);
                                        $('.CartTotal').text(cart_total);
                                        $('#New_Cart_Total').text(cart_sub);
                                        $('#PaymentBtn').show();
                                        $('#PaymentBtn').prop('disabled', false);
                                        $(".course_with_materials").show();
                                        $(".course_with_no_materials").show();
                                        $(".course_with_textbook").show();
                                        //if ($allowSubs == "True" && $CartHasSubs == true) {
                                        //    $("#Highest_Cart").show();
                                        //}

                                        $('#CheckoutBtn').hide();
                                        $(".Update_Order").text($oduAnswer);
                                        $(".Update_Preference").text("N/A");
                                        $(".Substitute").text($subAnswer);
                                        $("#ODU_Preference").modal('hide');
                                        return;

                                    }
                                });
                            }
                        }
                    } else {
                        if ($oduAnswer != "DO NOT ADD TO ORDER") {
                            $("#ODU_Preference").modal('hide');
                            $('#ODU_Error').hide();
                            $("#ODU_Update").modal('show');
                            $("#ODU_Update").focus();
                        } else {
                            //run ajax no 1 and 3
                            var model = {
                                globalSetting: '',
                                csId: '',
                                subs: '',
                                oduPref: '',
                                updatePref: '',
                                modal1_yes: '', //default to false when not selected
                                modal2_yes: '',
                                modal3_yes: '' //default to 2 when is not selected
                            };
                            model.globalSetting = true;
                            model.csId = '0';
                            model.subs = "False";
                            model.oduPref = $oduDataId;
                            model.updatePref = "2";
                            model.modal1_yes = "False";
                            model.modal2_yes = "True";
                            model.modal3_yes = "False";

                            $.ajax({
                                type: "POST",
                                url: 'ShoppingCart/odu',
                                data: {  __RequestVerificationToken: token,  "model": model },
                                dataType: "json",
                                error: function (xhr) {
                                    $('#errorModal').modal('show');
                                    $('#errorModal').focus();
                                },
                                success: function (data, jqXHR) {
                                    var cart_total = data.incartTotal;
                                    var cart_sub = data.subsTotal;
                                    var cart_count = data.count;
                                    var cart_has_subs = data.HasSubs;
                                    if (cart_has_subs == true) {
                                        $("#Highest_Cart").show();
                                    } else {
                                        $("#Highest_Cart").hide();
                                    }
                                    $("#ItemCount").text(cart_count);
                                    $("#SubTotal").text(cart_total);
                                    $('.CartCount').text(cart_count);
                                    $('.CartTotal').text(cart_total);
                                    $('#New_Cart_Total').text(cart_sub);
                                    $('#PaymentBtn').show();
                                    $('#PaymentBtn').prop('disabled', false);
                                    $(".course_with_materials").show();
                                    $(".course_with_no_materials").show();
                                    $(".course_with_textbook").show();
                                    $('#CheckoutBtn').hide();
                                    //$('#Highest_Cart').hide();
                                    $(".Update_Order").text($oduAnswer);
                                    $(".Update_Preference").text("N/A");
                                    $(".Substitute").text("N/A");
                                    $("#ODU_Preference").modal('hide');
                                    return;

                                }
                            });
                        }
                    }
                }
            });
            //Click event on ODU Update question
            $("#ODU_Update_Button").click(function (e) {
                e.preventDefault();
                var $showODU = $('#allowOdu').val();
                var $hasRental = $('#hasRental').val();
                var $allowSubs = $('#AllowSubs').val();
                var $subAnswer = $('input[name="SUB_OVERALL"]:checked').val();
                var $oduAnswer = $('input[name="ODU_OVERALL"]:checked').val();
                var $oduDataId = $('input[name="ODU_OVERALL"]:checked').attr('data-id');
                var $oduAnswerN = $('input[name="ODU_OVERALL_N"]:checked').val();
                var $oduAnswerR = $('input[name="ODU_OVERALL_R"]:checked').val();
                var $rental = $('#hasRental').val();
                var $pref, $oduCombine;
                if ($rental == "False") {
                    $oduCombine = $oduAnswerN;
                } else {
                    $oduCombine = $oduAnswerN + "/" + $oduAnswerR;
                }
                if (((typeof $oduAnswerN != 'undefined') && (typeof $oduAnswerR != 'undefined') && ($rental == "True")) || ((typeof $oduAnswerN != 'undefined') && ($rental == "False"))) {
                    //Update hidden filed value
                    switch ($oduCombine) {
                        case 'NEW/PURCHASE':
                            pref = 4
                            break;
                        case 'NEW':
                            pref = 4
                            break;
                        case 'USED/PURCHASE':
                            pref = 2
                            break;
                        case 'NEW/PURCHASE':
                            pref = 4
                            break;
                        case 'USED':
                            pref = 2
                            break;
                        case 'NEW/RENTAL':
                            pref = 8
                            break;
                        case 'USED/RENTAL':
                            pref = 10
                            break;
                        default:
                            pref = 4
                    }
                    if ($allowSubs == "True" && $showODU == "True") {
                        //call complete ajax
                        var model = {
                            globalSetting: '',
                            csId: '',
                            subs: '',
                            oduPref: '',
                            updatePref: '',
                            modal1_yes: '', //default to false when not selected
                            modal2_yes: '',
                            modal3_yes: '' //default to 2 when is not selected
                        };
                        model.globalSetting = true;
                        model.csId = '0';
                        model.subs = $("#global-subs").val();
                        model.oduPref = $oduDataId;
                        model.updatePref = pref;
                        model.modal1_yes = "True";
                        model.modal2_yes = "True";
                        model.modal3_yes = "True";

                        $.ajax({
                            type: "POST",
                            url: 'ShoppingCart/odu',
                            data: {  __RequestVerificationToken: token,  "model": model },
                            dataType: "json",
                            error: function (xhr) {
                                $('#errorModal').modal('show');
                                $('#errorModal').focus();
                            },
                            success: function (data, jqXHR) {
                                var cart_total = data.incartTotal;
                                var cart_sub = data.subsTotal;
                                var cart_count = data.count;
                                var cart_has_subs = data.HasSubs;
                                if (cart_has_subs == true) {
                                    $("#Highest_Cart").show();
                                } else {
                                    $("#Highest_Cart").hide();
                                }
                                $("#ItemCount").text(cart_count);
                                $("#SubTotal").text(cart_total);
                                $('.CartCount').text(cart_count);
                                $('.CartTotal').text(cart_total);
                                $('#New_Cart_Total').text(cart_sub);
                                $(".Update_Order").text($oduAnswer);
                                $(".Update_Preference").text($oduCombine);
                                $(".Substitute").text($subAnswer);
                                $('#PaymentBtn').show();
                                $('#PaymentBtn').prop('disabled', false);
                                $(".course_with_materials").show();
                                $(".course_with_no_materials").show();
                                $(".course_with_textbook").show();
                                //if ($allowSubs == "True" && $CartHasSubs == true) {
                                //    $("#Highest_Cart").show();
                                //}
                                $('#CheckoutBtn').hide();
                                $("#ODU_Update").modal('hide');
                                return;

                            }
                        });
                    } else if ($allowSubs == "True" && $showODU == "False") {
                        //call ajax no 2
                        var model = {
                            globalSetting: '',
                            csId: '',
                            subs: '',
                            oduPref: '',
                            updatePref: '',
                            modal1_yes: '', //default to false when not selected
                            modal2_yes: '',
                            modal3_yes: '' //default to 2 when is not selected
                        };
                        model.globalSetting = true;
                        model.csId = '0';
                        model.subs = $("#global-subs").val();
                        model.oduPref = "4";
                        model.updatePref = pref;
                        model.modal1_yes = "True";
                        model.modal2_yes = "False";
                        model.modal3_yes = "True";

                        $.ajax({
                            type: "POST",
                            url: 'ShoppingCart/odu',
                            data: {  __RequestVerificationToken: token,  "model": model },
                            dataType: "json",
                            error: function (xhr) {
                                $('#errorModal').modal('show');
                                $('#errorModal').focus();
                            },
                            success: function (data, jqXHR) {
                                var cart_total = data.incartTotal;
                                var cart_sub = data.subsTotal;
                                var cart_count = data.count;
                                var cart_has_subs = data.HasSubs;
                                if (cart_has_subs == true) {
                                    $("#Highest_Cart").show();
                                } else {
                                    $("#Highest_Cart").hide();
                                }
                                $("#ItemCount").text(cart_count);
                                $("#SubTotal").text(cart_total);
                                $('.CartCount').text(cart_count);
                                $('.CartTotal').text(cart_total);
                                $('#New_Cart_Total').text(cart_sub);
                                $(".Update_Order").text("N/A");
                                $(".Update_Preference").text($oduCombine);
                                $(".Substitute").text($subAnswer);
                                $('#PaymentBtn').show();
                                $('#PaymentBtn').prop('disabled', false);
                                $(".course_with_materials").show();
                                $(".course_with_no_materials").show();
                                $(".course_with_textbook").show();
                                //if ($allowSubs == "True" && $CartHasSubs == true) {
                                //    $("#Highest_Cart").show();
                                //}
                                $('#CheckoutBtn').hide();
                                $("#ODU_Update").modal('hide');

                                return;

                            }
                        });
                    } else if ($allowSubs == "False" && $showODU == "True") {
                        //call ajax no 1
                        var model = {
                            globalSetting: '',
                            csId: '',
                            subs: '',
                            oduPref: '',
                            updatePref: '',
                            modal1_yes: '', //default to false when not selected
                            modal2_yes: '',
                            modal3_yes: '' //default to 2 when is not selected
                        };
                        model.globalSetting = true;
                        model.csId = '0';
                        model.subs = "False";
                        model.oduPref = $oduDataId;
                        model.updatePref = pref;
                        model.modal1_yes = "False";
                        model.modal2_yes = "True";
                        model.modal3_yes = "True";

                        $.ajax({
                            type: "POST",
                            url: 'ShoppingCart/odu',
                            data: {  __RequestVerificationToken: token,  "model": model },
                            dataType: "json",
                            error: function (xhr) {
                                $('#errorModal').modal('show');
                                $('#errorModal').focus();
                            },
                            success: function (data, jqXHR) {
                                var cart_total = data.incartTotal;
                                var cart_sub = data.subsTotal;
                                var cart_count = data.count;
                                var cart_has_subs = data.HasSubs;
                                if (cart_has_subs == true) {
                                    $("#Highest_Cart").show();
                                } else {
                                    $("#Highest_Cart").hide();
                                }
                                $("#ItemCount").text(cart_count);
                                $("#SubTotal").text(cart_total);
                                $('.CartCount').text(cart_count);
                                $('.CartTotal').text(cart_total);
                                $('#New_Cart_Total').text(cart_sub);
                                $(".Update_Order").text($oduAnswer);
                                $(".Update_Preference").text($oduCombine);
                                $(".Substitute").text("N/A");
                                $('#PaymentBtn').show();
                                $('#PaymentBtn').prop('disabled', false);
                                $(".course_with_materials").show();
                                $(".course_with_no_materials").show();
                                $(".course_with_textbook").show();
                                //if ($allowSubs == "True" && $CartHasSubs == true) {
                                //    $("#Highest_Cart").show();
                                //}
                                $('#CheckoutBtn').hide();
                                $("#ODU_Update").modal('hide');
                                return;

                            }
                        });

                    }
                } else {
                    $('#ODU_Pref_Error').show();
                }


            });
            //Click event on sub help modal question
            $("#sub_help").click(function (e) {
                e.preventDefault();
                $("#Sub_Preference").modal('hide');
                $("#Sub_Preference_Help").modal('show');
                $("#Sub_Preference_Help").focus();
            });
            //click event on sub help modal close
            $("#sub_help_back").click(function (e) {
                e.preventDefault();
                $("#Sub_Preference").modal('show');
                $("#Sub_Preference").focus();
                $("#Sub_Preference_Help").modal('hide');
            });
            //click event on ODU help modal question
            $("#ODU_help").click(function (e) {
                e.preventDefault();
                $("#ODU_Preference").modal('hide');
                $("#ODU_Update_Help").modal('show');
                $("#ODU_Update_Help").focus();
            });
            //click event on ODU help modal close
            $("#ODU_help_back").click(function (e) {
                e.preventDefault();
                $("#ODU_Preference").modal('show');
                $("#ODU_Preference").focus();
                $("#ODU_Update_Help").modal('hide');
            });
            //click event on ODU Update help modal question
            $("#ODU_Pref_help").click(function (e) {
                e.preventDefault();
                $("#ODU_Update").modal('hide');
                $("#ODU_Pref_Update_Help").modal('show');
                $("#ODU_Pref_Update_Help").focus();
            });
            //click event on ODU Update help modal close
            $("#ODU_Pref_help_back").click(function (e) {
                e.preventDefault();
                $("#ODU_Update").modal('show');
                $("#ODU_Update").focus();
                $("#ODU_Pref_Update_Help").modal('hide');
            });
            //Enter event on remove course focus
            $(".Remove_Course").keyup(function (e) {
                if (e.keyCode == 13) {
                    $(this).click();
                }
            });
            //Remove Course Click Event Opens Modal
            $(".Remove_Course").click(function (e) {
                e.preventDefault();
                var $id = $(this).parent().parent().parent().find('.csId').val();
                $("#courseID").val($id);
                $('#removeCourse').modal();
                $('#removeCourse').focus();
            });
            //Remove Course Modal click event
            $('#RemoveCourseConfirm').click(function (e) {
                $('#remoceCourse').modal('hide');
                var removeCourse = $(this);
                $('#removeCourse').modal('hide');
                var $course_id = $('#courseID').val();

                $.ajax({
                    type: "POST",
                    url: 'ShoppingCart/DeleteCourse',
                    data: { __RequestVerificationToken: token,  "id": $course_id },
                    dataType: "json",
                    error: function (xhr) {
                        $('#errorModal').modal('show');
                        $('#errorModal').focus();
                    },
                    success: function (data, jqXHR) {
                        location.reload();
                    }
                });
            });
            //Enter event on remove text focus
            $(".Remove_Text").keyup(function (e) {
                if (e.keyCode == 13) {
                    $(this).click();
                }
            });
            //Remove Textbook Click Event Opens Modal
            $('.Remove_Text').click(function (e) {
                e.preventDefault();
                var $txt_id = $(this).parent().attr('id');
                var dataNumber = $(this).parent().attr('data-mbsNumberCSId');
                var PRDelete = $(".PRConfirm-" + dataNumber).val();
                if (PRDelete == "True") {
                    //hidden element was found with same value
                    //hidden element was found with same value
                    $('.modaltext').html('The discounted access code products that can be purchased with the rental title will also be removed from the shopping cart.');

                } else {
                    $('.modaltext').html('Are you sure you want to delete this item?');
                }
                $('#textID').val($txt_id);
                $('#removeText').modal();
                $('#removeText').focus();
            });
            //Remove Course Modal click event
            $('#RemoveTextConfirm').click(function (e) {
                e.preventDefault();
                $('#removeText').modal('hide');
                var $txt_id = $("#textID").val();

                $.ajax({
                    type: "POST",
                    url: 'ShoppingCart/DeleteTextbook',
                    data: { __RequestVerificationToken: token,  "id": $txt_id },
                    dataType: "json",
                    error: function (xhr) {
                        $('#errorModal').modal('show');
                        $('#errorModal').focus();
                    },
                    success: function (data, jqXHR) {
                        location.reload();
                    }
                });
            });
            //Enter event on remove course focus
            $(".Remove_Merch").keyup(function (e) {
                if (e.keyCode == 13) {
                    $(this).click();
                }
            });
            //Remove Merch Item Click Event opens modal
            $('.Remove_Merch').click(function (e) {
                e.preventDefault();
                var $txt_id = $(this).parent().attr('id');
                $('#merchID').val($txt_id);
                $('#removeMerch').modal();
                $('#removeMerch').focus();
            });
            //Remove Merch Modal click event
            $('#RemoveMerchConfirm').click(function (e) {
                e.preventDefault();
                var $txt_id = $('#merchID').val();
                $('#removeMerch').modal('hide');

                $.ajax({
                    type: "POST",
                    url: 'ShoppingCart/DeleteMerchandise',
                    data: { __RequestVerificationToken: token,  "id": $txt_id },
                    dataType: "json",
                    error: function (xhr) {
                        $('#errorModal').modal('show');
                        $('#errorModal').focus();
                    },
                    success: function (data, jqXHR) {
                        location.reload();
                    }
                });
            });
            //Enter event on remove general focus
            $(".Remove_General").keyup(function (e) {
                if (e.keyCode == 13) {
                    $(this).click();
                }
            });
            //Remove General Item clicke event opens modal
            $('.Remove_General').click(function (e) {
                e.preventDefault();
                var $txt_id = $(this).parent().attr('id');
                $('#generalID').val($txt_id);
                $('#removeGeneral').modal();
                $('#removeGeneral').focus();
            });
            //Remove General Modal Click event
            $('#RemoveGeneralConfirm').click(function (e) {
                e.preventDefault();
                var $txt_id = $('#generalID').val();
                $('#generalMerch').modal('hide');

                $.ajax({
                    type: "POST",
                    url: 'ShoppingCart/DeleteMerchandise',
                    data: { __RequestVerificationToken: token,  "id": $txt_id },
                    dataType: "json",
                    error: function (xhr) {
                        $('#errorModal').modal('show');
                        $('#errorModal').focus();
                    },
                    success: function (data, jqXHR) {
                        location.reload();
                    }
                });
            });
            //adds original quantity to value in case of error
            $('.txt-QTY').focus(function () {
                $qty = $(this).val();
                $(this).attr('data', $qty);
            });
            //Text quantity keyup event
            $('.txt-QTY').keyup(function (e) {
                var event = e.keyCode;
                var $data = $(this).attr('data');
                var $qty = $(this).val();
                var iNum = parseInt($qty);
                if ($qty > 99) {
                    var $string2 = $qty.substring(0, 2);
                    $(this).val($string2);
                }
            });
            //Text quantity change event
            $('.txt-QTY').change(function (e) {
                //Set ScId
                var $data = $(this).attr('data');
                var txtqty = $(this);
                var $txt_id = $(this).attr('data-txtid');
                var qty = $(this).val();
                if (qty == "0" || qty == "00" || qty == "000" || qty == "") {
                    var $remove = $(this).parent().next().find('.Remove_Text');
                    $remove.click();
                    $(this).val($data);
                } else {
                    var $subtotal = $(txtqty).parent().next().find('p').find('strong').next();

                    $.ajax({
                        type: "POST",
                        url: 'ShoppingCart/Updatetext',
                        data: { "scId": $txt_id, "qty": qty },
                        dataType: "json",
                        error: function (xhr) {
                            $('#errorModal').modal('show');
                            $('#errorModal').focus();
                        },
                        success: function (data, jqXHR) {
                            if (data.updated = true) {
                                var subsTotal = data.subsTotal;
                                var incartTotal = data.incartTotal;
                                var count = data.count;
                                var miniTotal = data.miniTotal;
                                $("#New_Cart_Total").text(subsTotal);
                                $('.CartCount').text(count);
                                $('.CartTotal').text(incartTotal);
                                $("#ItemCount").text(count);
                                $("#SubTotal").text(miniTotal);
                            }

                        }
                    });
                }
            });
            //add original quantity to value in case of error
            $('.merch-QTY').focus(function () {
                $qty = $(this).val();
                $(this).attr('data-value', $qty);
            });
            //Merch quantity keyup event
            $('.merch-QTY').keyup(function (e) {
                var $data = $(this).attr('data-value');
                var $qty = $(this).val();
                var iNum = parseInt($qty);
                if ($qty > 999) {
                    var $string2 = $qty.substring(0, 3);
                    $(this).val($string2);
                }
            });
            //Merch quantity change event
            $('.merch-QTY').change(function (e) {
                var $datavalue = $(this).attr('data-value');
                var data = $(this).attr('data');
                var merchQty = $(this);
                var itemid = $(this).parent().next().find('.Remove_Merch').parent().attr('id')
                var qty = $(this).val();
                var mtId = $(this).parent().prev().find('.Merchandise_Type_Code option:selected').val();
                var price = $(this).parent().next().find('div').find('p').find('strong').last().text();
                price = price.substr(price.indexOf("$") + 1);
                var GCNum = $(".merchNumber" + data).val();
                var email = $(".merchEmail" + data).val();
                var giftMesg = $('.merchMessage' + data).val();
                var cardPin = $(".merchPin" + data).val();
                var isGC = $('.giftCard' + data).val();
                var isGCReload = $('.giftReload' + data).val();
                var isPinVisible = $(this).parent().parent().parent().next().next().next().val();
                var itemflag = $('.itemFlag' + data).val();
                var $subtotal = $(this).parent().next().find('p').find('strong').next();
                if (qty == "0" || qty == "00" || qty == "000" || qty == "") {
                    var $remove = $(this).parent().next().find('.Remove_Text');
                    $remove.click();
                    $(this).val($datavalue);
                } else {

                    var model = {
                        scId: '',
                        qty: '',
                        mtId: '',
                        price: '',
                        GCNumber: '',
                        email: '',
                        giftMesg: '',
                        cardPin: '',
                        isGC: '',
                        isGCReload: '',
                        isPinVisible: '',
                        itemFlag: ''
                    };
                    model.scId = itemid;//ItemId,
                    model.qty = qty;//item quantity,
                    model.mtId = mtId;//drop down list value,
                    model.price = price;//item price,
                    model.GCNumber = GCNum;//Gift card number,
                    model.email = email;//email address,
                    model.giftMesg = giftMesg; //message,
                    model.cardPin = cardPin;//card pin,
                    model.isGC = isGC;//true when gift card section is visible
                    model.isGCReload = isGCReload;//true when gift card reload section is visible,
                    model.isPinVisible = isGCReload; //true when gift card pin section is visible
                    model.itemFlag = itemflag; // itm_flag hidden field value

                    var updateGC = "false";

                    $.ajax({
                        type: "POST",
                        url: 'ShoppingCart/Updatemerch?updateGC=' + updateGC,
                        data: (model),
                        dataType: "json",
                        error: function (xhr) {
                            $('#errorModal').modal('show');
                            $('#errorModal').focus();
                        },
                        success: function (data, jqXHR) {
                            if (data.updated = true) {
                                //Show error message if there is an error
                                var error = data.mesg;
                                var indexError = error.indexOf('The item(s) require more');
                                //Subsitiute total:
                                var subsTotal = data.subsTotal;

                                //Cart Total:
                                var incartTotal = data.incartTotal;

                                //incart count:
                                var count = data.count;
                                //mini cart total:
                                if (error === "" || error === "Item updated successfully.") {
                                    var miniTotal = data.miniTotal;
                                    $("#New_Cart_Total").text(subsTotal);
                                    $('.CartCount').text(count);
                                    $('.CartTotal').text(incartTotal);
                                    $("#ItemCount").text(count);
                                    $("#SubTotal").text(miniTotal);
                                } else if (indexError >= 0) {
                                    $('.loyaltyErrorBody').html(error);
                                    $('#loyaltyError').modal('show');
                                    $('#loyaltyError').focus()
                                } else {
                                    $('#errorModal').modal('show');
                                    $('#errorModal').focus();
                                }
                            } else {
                                var error = data.mesg;
                                if (error === "") {
                                    $('#errorModal').modal('show');
                                    $('#errorModal').focus();
                                } else {
                                    $('.loyaltyErrorBody').html(error);
                                    $('#loyaltyError').modal('show');
                                    $('#loyaltyError').focus()
                                }
                            } 
                        }
                    });
                }
            });
            //add original quantity to value in case of error
            $('.gen-QTY').focus(function () {
                $qty = $(this).val();
                $(this).attr('data-value', $qty);
            });
            //General quantity keyup event
            $('.gen-QTY').keyup(function (e) {
                var $data = $(this).attr('data-value');
                var $qty = $(this).val();
                var iNum = parseInt($qty);
                if ($qty > 999) {
                    var $string2 = $qty.substring(0, 3);
                    $(this).val($string2);
                }
            });
            //General quantity change event
            $('.gen-QTY').change(function (e) {
                var $data = $(this).attr('data-value');
                var genQty = $(this);
                //Set ScId
                var $txt_id = $(this).parent().parent().parent().find('.Remove_General').parent().attr('id');
                var $subtotal = $(this).parent().next().find('p').find('strong').next();

                var qty = $(this).val();
                if (qty == "0" || qty == "00" || qty == "000" || qty == "") {
                    var $remove = $(this).parent().next().find('.Remove_General');
                    $remove.click();
                    $(this).val($data);
                } else {

                    $.ajax({
                        type: "POST",
                        url: 'ShoppingCart/UpdateGB',
                        data: { "scId": $txt_id, "qty": qty },
                        dataType: "json",
                        error: function (xhr) {
                            $('#errorModal').modal('show');
                            $('#errorModal').focus();
                        },
                        success: function (data, jqXHR) {
                            if (data.updated = true) {
                                //Show error message if there is an error
                                var error = data.mesg;

                                //Subsitiute total:
                                var subsTotal = data.subsTotal;

                                //Cart Total:
                                var incartTotal = data.incartTotal;

                                //incart count:
                                var count = data.count;
                                //mini cart total:
                                if (error === "" || error === "Item updated successfully.") {
                                    var miniTotal = data.miniTotal;
                                    $("#New_Cart_Total").text(subsTotal);
                                    $('.CartCount').text(count);
                                    $('.CartTotal').text(incartTotal);
                                    $("#ItemCount").text(count);
                                    $("#SubTotal").text(miniTotal);
                                } else {
                                    $('#errorModal').modal('show');
                                    $('#errorModal').focus();
                                }
                            }

                        }
                    });
                }
            });
            //Merchandise Type Code change event
            $('.Merchandise_Type_Code').change(function (e) {
                var merchID, id, qty, mtID, price, GCNum, email, giftMesg, cardPin, isGC, type, typeDollar, typeNumber, typePrice;
                merchID = $(this).attr('data');
                merchID = merchID.replace('merchCode', '');
                id = merchID;
                qty = $('.merchQTY' + merchID).val();
                mtID = $(this).find('option:selected').val();
                type = $(this).find('option:selected').text();
                typeDollar = type.lastIndexOf("($");
                if (typeDollar != -1) {
                    typeNumber = typeDollar + 2;
                    typePrice = type.substr(typeNumber);
                    typePrice = typePrice.replace(')', '');
                    price = typePrice;
                } else {
                    price = $('.merchPrice' + merchID).text();
                    price = price.substr(price.indexOf("$") + 1);
                }
                GCNum = $('.merchNumber' + merchID).val();
                email = $('.merchEmail' + merchID).val();
                giftMesg = $('.merchMessage' + merchID).val();
                cardPin = $('.merchPin' + merchID).val();
                isGC = $('.giftCard' + merchID).val();
                if (GCNum == undefined) {
                    GCNum = "";
                }
                if (email == undefined) {
                    email = "";
                }
                if (giftMesg == undefined) {
                    giftMesg = "";
                }
                if (cardPin == undefined) {
                    cardPin = "";
                }
                var model = {
                    scId: '',
                    qty: '',
                    isLoyalty: '',
                    mtId: '',
                    price: '',
                    GCNumber: '',
                    email: '',
                    giftMesg: '',
                    cardPin: '',
                };
                model.scId = id;//ItemId,
                model.qty = qty;//item quantity,
                model.mtId = mtID;//drop down list value,
                model.price = price;//item price,
                model.GCNumber = GCNum;//Gift card number,
                model.email = email;//email address,
                model.giftMesg = giftMesg; //message,
                model.cardPin = cardPin;//card pin,
                model.isGC = isGC;//true when gift card section is visible
                var updateGC = "false";
                $.ajax({
                    type: "POST",
                    url: 'ShoppingCart/Updatemerch?updateGC=' + updateGC,
                    data: (model),
                    dataType: "json",
                    error: function (xhr) {
                        $('#errorModal').modal('show');
                        $('#errorModal').focus();
                    },
                    success: function (data, jqXHR) {
                        if (data.updated = true) {
                            //Show error message if there is an error
                            var error = data.mesg;

                            //Subsitiute total:
                            var subsTotal = data.subsTotal;

                            //Cart Total:
                            var incartTotal = data.incartTotal;

                            //incart count:
                            var count = data.count;
                            //mini cart total:
                            if (error === "" || error === "Item updated successfully.") {
                                var miniTotal = data.miniTotal;
                                $('#New_Cart_Total').text(subsTotal);
                                $('.CartCount').text(count);
                                $('.CartTotal').text(incartTotal);
                                $("#ItemCount").text(count);
                                $("#SubTotal").text(miniTotal);
                                $('.merchPrice' + merchID).text("$" + price);
                            } else {
                            }
                        }
                    }
                });


            });
            //Gift Card Email Change Event
            $('.Gift_Card_Email_Input').change(function (e) {

                var merchID, id, qty, mtID, price, GCNum, email, giftMesg, cardPin, isGC, itemflag, value;
                value = $(this).val();
                if (value != "") {
                    merchID = $(this).attr('data');
                    merchID = merchID.replace('merchEmail', '');
                    itemflag = $('.itemFlag' + merchID).val();
                    id = merchID;
                    qty = $('.merchQTY' + merchID).val();
                    mtID = $('.merchCode' + merchID).find('option:selected').val();
                    price = $('.merchPrice' + merchID).text();
                    price = price.substr(price.indexOf("$") + 1);
                    GCNum = $('.merchNumber' + merchID).val();
                    email = $('.merchEmail' + merchID).val();
                    giftMesg = $('.merchMessage' + merchID).val();
                    cardPin = $('.merchPin' + merchID).val();
                    isGC = $('.giftCard' + merchID).val();
                    if (GCNum == undefined) {
                        GCNum = "";
                    }
                    if (email == undefined) {
                        email = "";
                    }
                    if (giftMesg == undefined) {
                        giftMesg = "";
                    }
                    if (cardPin == undefined) {
                        cardPin = "";
                    }
                    var model = {
                        scId: '',
                        qty: '',
                        isLoyalty: '',
                        mtId: '',
                        price: '',
                        GCNumber: '',
                        email: '',
                        giftMesg: '',
                        cardPin: '',
                        itemFlag: ''
                    };
                    model.scId = id;//ItemId,
                    model.qty = qty;//item quantity,
                    model.mtId = mtID;//drop down list value,
                    model.price = price;//item price,
                    model.GCNumber = GCNum;//Gift card number,
                    model.email = email;//email address,
                    model.giftMesg = giftMesg; //message,
                    model.cardPin = cardPin;//card pin,
                    model.isGC = isGC;//true when gift card section is visible
                    model.itemFlag = itemflag; // itm_flag hidden field value
                    var updateGC = "true";
                    $.ajax({
                        type: "POST",
                        url: 'ShoppingCart/Updatemerch?updateGC=' + updateGC,
                        data: (model),
                        dataType: "json",
                        error: function (xhr) {
                            $('#errorModal').modal('show');
                            $('#errorModal').focus();
                        },
                        success: function (data, jqXHR) {
                            if (data.updated = true) {
                                //Show error message if there is an error
                                var error = data.mesg;

                                //Subsitiute total:
                                var subsTotal = data.subsTotal;

                                //Cart Total:
                                var incartTotal = data.incartTotal;

                                //incart count:
                                var count = data.count;
                                //mini cart total:
                                if (error === "" || error === "Item updated successfully.") {
                                    var miniTotal = data.miniTotal;
                                    $('#New_Cart_Total').text(subsTotal);
                                    $('.CartCount').text(count);
                                    $('.CartTotal').text(incartTotal);
                                    $("#ItemCount").text(count);
                                    $("#SubTotal").text(miniTotal);
                                } else {
                                }
                            }
                        }
                    });
                } else {
                    var valid = document.getElementsByClassName("Gift_Card_Email_Input");
                    for (var i = 0; i < valid.length; i++) {
                        if (valid[i].checkValidity() == false) {
                            valid[i].reportValidity();
                            return;
                        }
                    }
                }
            });
            //Gift Card Message change event
            $('.Gift_Card_Message_Input').change(function (e) {
                var merchID, id, qty, mtID, price, GCNum, email, giftMesg, cardPin, isGC, itemflag;
                var emailText = $('.Gift_Card_Email_Input').text();
                if (emailText.trim() === '') {
                    return false;
                }
                merchID = $(this).attr('data');
                merchID = merchID.replace('merchMessage', '');
                itemflag = $('.itemFlag' + merchID).val();
                id = merchID;
                qty = $('.merchQTY' + merchID).val();
                mtID = $('.merchCode' + merchID).find('option:selected').val();
                price = $('.merchPrice' + merchID).text();
                price = price.substr(price.indexOf("$") + 1);
                GCNum = $('.merchNumber' + merchID).val();
                email = $('.merchEmail' + merchID).val();
                giftMesg = $('.merchMessage' + merchID).val();
                cardPin = $('.merchPin' + merchID).val();
                isGC = $('.giftCard' + merchID).val();
                if (GCNum == undefined) {
                    GCNum = "";
                }
                if (email == undefined) {
                    email = "";
                }
                if (giftMesg == undefined) {
                    giftMesg = "";
                }
                if (cardPin == undefined) {
                    cardPin = "";
                }
                var model = {
                    scId: '',
                    qty: '',
                    isLoyalty: '',
                    mtId: '',
                    price: '',
                    GCNumber: '',
                    email: '',
                    giftMesg: '',
                    cardPin: '',
                    itemFlag: ''
                };
                model.scId = id;//ItemId,
                model.qty = qty;//item quantity,
                model.mtId = mtID;//drop down list value,
                model.price = price;//item price,
                model.GCNumber = GCNum;//Gift card number,
                model.email = email;//email address,
                model.giftMesg = giftMesg; //message,
                model.cardPin = cardPin;//card pin,
                model.isGC = isGC;//true when gift card section is visible
                model.itemFlag = itemflag; // itm_flag hidden field value
                var updateGC = "true";
                $.ajax({
                    type: "POST",
                    url: 'ShoppingCart/Updatemerch?updateGC=' + updateGC,
                    data: (model),
                    dataType: "json",
                    error: function (xhr) {
                        $('#errorModal').modal('show');
                        $('#errorModal').focus();
                    },
                    success: function (data, jqXHR) {
                        if (data.updated = true) {
                            //Show error message if there is an error
                            var error = data.mesg;

                            //Subsitiute total:
                            var subsTotal = data.subsTotal;

                            //Cart Total:
                            var incartTotal = data.incartTotal;

                            //incart count:
                            var count = data.count;
                            //mini cart total:
                            if (error === "" || error === "Item updated successfully.") {
                                var miniTotal = data.miniTotal;
                                $('#New_Cart_Total').text(subsTotal);
                                $('.CartCount').text(count);
                                $('.CartTotal').text(incartTotal);
                                $("#ItemCount").text(count);
                                $("#SubTotal").text(miniTotal);
                            } else {
                            }
                        }
                    }
                });


            });
            //Gift Card number chang event
            $('.Gift_Card_Number_Input').change(function (e) {
                var merchID, id, qty, mtID, price, GCNum, email, giftMesg, cardPin, isGC, itemflag;
                merchID = $(this).attr('data');
                merchID = merchID.replace('merchNumber', '');
                var thisNumber = $('.merchNumber' + merchID);
                var thisPin = $('.merchPin' + merchID);
                itemflag = $('.itemFlag' + merchID).val();
                id = merchID;
                qty = $('.merchQTY' + merchID).val();
                mtID = $('.merchCode' + merchID).find('option:selected').val();
                price = $('.merchPrice' + merchID).text();
                price = price.substr(price.indexOf("$") + 1);
                GCNum = $('.merchNumber' + merchID).val();
                email = $('.merchEmail' + merchID).val();
                giftMesg = $('.merchMessage' + merchID).val();
                cardPin = $('.merchPin' + merchID).val();
                isGC = $('.giftCard' + merchID).val();
                if (GCNum === undefined) {
                    GCNum = "";
                }
                if (email === undefined) {
                    email = "";
                }
                if (giftMesg === undefined) {
                    giftMesg = "";
                }
                if (cardPin === undefined) {
                    cardPin = "";
                }
                if (cardPin === "") {
                    return;
                }
                var model = {
                    scId: '',
                    qty: '',
                    isLoyalty: '',
                    mtId: '',
                    price: '',
                    GCNumber: '',
                    email: '',
                    giftMesg: '',
                    cardPin: '',
                    itemFlag: ''
                };
                model.scId = id;//ItemId,
                model.qty = qty;//item quantity,
                model.mtId = mtID;//drop down list value,
                model.price = price;//item price,
                model.GCNumber = GCNum;//Gift card number,
                model.email = email;//email address,
                model.giftMesg = giftMesg; //message,
                model.cardPin = cardPin;//card pin,
                model.isGC = isGC;//true when gift card section is visible
                model.itemFlag = itemflag; // itm_flag hidden field value
                model.isGCreload = "true";
                var updateGC = "true";
                $.ajax({
                    type: "POST",
                    url: 'ShoppingCart/Updatemerch?updateGC=' + updateGC,
                    data: (model),
                    dataType: "json",
                    error: function (xhr) {
                        $('#errorModal').modal('show');
                        $('#errorModal').focus();
                    },
                    success: function (data, jqXHR) {
                        if (data.updated = true) {
                            //Show error message if there is an error
                            var error = data.mesg;

                            //Subsitiute total:
                            var subsTotal = data.subsTotal;

                            //Cart Total:
                            var incartTotal = data.incartTotal;

                            //incart count:
                            var count = data.count;
                            //mini cart total:
                            if (error === "" || error === "Item updated successfully.") {
                                var miniTotal = data.miniTotal;
                                $('#New_Cart_Total').text(subsTotal);
                                $('.CartCount').text(count);
                                $('.CartTotal').text(incartTotal);
                                $("#ItemCount").text(count);
                                $("#SubTotal").text(miniTotal);
                                $('.giftCardNumberError' + merchID).hide();
                                $('.giftCardPinError' + merchID).hide();
                            } else if (error === "The gift card number you entered is not valid.") {
                                $('.giftCardNumberError' + merchID).show();
                                $('.giftCardPinError' + merchID).hide();
                                $(thisNumber).val('');
                                $(thisNumber).focus();
                            } else if (error === "The gift card pin you entered is not valid.") {
                                $('.giftCardNumberError' + merchID).hide();
                                $('.giftCardPinError' + merchID).show();
                                $(thisPin).val('');
                                $(thisPin).focus();
                            }
                        }
                    }
                });


            });
            //GIft Card Pin Number chang event
            $('.Gift_Card_Pin_Input').change(function (e) {
                var merchID, id, qty, mtID, price, GCNum, email, giftMesg, cardPin, isGC, itemflag;
                merchID = $(this).attr('data');
                merchID = merchID.replace('merchPin', '');
                var thisNumber = $('.merchNumber' + merchID);
                var thisPin = $('.merchPin' + merchID);
                itemflag = $('.itemFlag' + merchID).val();
                id = merchID;
                qty = $('.merchQTY' + merchID).val();
                mtID = $('.merchCode' + merchID).find('option:selected').val();
                price = $('.merchPrice' + merchID).text();
                price = price.substr(price.indexOf("$") + 1);
                GCNum = $('.merchNumber' + merchID).val();
                email = $('.merchEmail' + merchID).val();
                giftMesg = $('.merchMessage' + merchID).val();
                cardPin = $('.merchPin' + merchID).val();
                isGC = $('.giftCard' + merchID).val();
                if (GCNum === "") {
                    return;
                }
                if (GCNum == undefined) {
                    GCNum = "";
                }
                if (email == undefined) {
                    email = "";
                }
                if (giftMesg == undefined) {
                    giftMesg = "";
                }
                if (cardPin == undefined) {
                    cardPin = "";
                }
                var model = {
                    scId: '',
                    qty: '',
                    isLoyalty: '',
                    mtId: '',
                    price: '',
                    GCNumber: '',
                    email: '',
                    giftMesg: '',
                    cardPin: '',
                    itemFlag: ''
                };
                model.scId = id;//ItemId,
                model.qty = qty;//item quantity,
                model.mtId = mtID;//drop down list value,
                model.price = price;//item price,
                model.GCNumber = GCNum;//Gift card number,
                model.email = email;//email address,
                model.giftMesg = giftMesg; //message,
                model.cardPin = cardPin;//card pin,
                model.isGC = isGC;//true when gift card section is visible
                model.itemFlag = itemflag; // itm_flag hidden field value
                model.isGCreload = "true";
                var updateGC = "true";
                $.ajax({
                    type: "POST",
                    url: 'ShoppingCart/Updatemerch?updateGC=' + updateGC,
                    data: (model),
                    dataType: "json",
                    error: function (xhr) {
                        $('#errorModal').modal('show');
                        $('#errorModal').focus();
                    },
                    success: function (data, jqXHR) {
                        if (data.updated = true) {
                            //Show error message if there is an error
                            var error = data.mesg;

                            //Subsitiute total:
                            var subsTotal = data.subsTotal;

                            //Cart Total:
                            var incartTotal = data.incartTotal;

                            //incart count:
                            var count = data.count;
                            //mini cart total:
                            if (error === "" || error === "Item updated successfully.") {
                                var miniTotal = data.miniTotal;
                                $('#New_Cart_Total').text(subsTotal);
                                $('.CartCount').text(count);
                                $('.CartTotal').text(incartTotal);
                                $("#ItemCount").text(count);
                                $("#SubTotal").text(miniTotal);
                                $('.giftCardNumberError' + merchID).hide();
                                $('.giftCardPinError' + merchID).hide();
                            } else if (error === "The gift card number you entered is not valid.") {
                                $('.giftCardNumberError' + merchID).show();
                                $('.giftCardPinError' + merchID).hide();
                                $(thisNumber).val('');
                                $(thisNumber).focus();
                            } else if (error === "The gift card pin you entered is not valid.") {
                                $('.giftCardNumberError' + merchID).hide();
                                $('.giftCardPinError' + merchID).show();
                                $(thisPin).val('');
                                $(thisPin).focus();
                            }
                        }
                    }
                });


            });
        });
    </script> 
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85960054-1', 'auto');
  ga('send', 'pageview');

</script> 
<script>
$('#H_Search').prependTo('.search-here');
</script> <!--old stuff--------------------> 
<script>
    $(document).ready(function () {

        //checkout messaging was put here because checkout.aspx page would not show up under inSite pages
        var loc = window.location.href;
        loc = loc.toLowerCase();
        if (loc.indexOf('checkout.aspx') >= 1) {
            $('#ctl00_ctl00_Content_Content_pi_acct_num').parent().append(
                '<p id="account-entry-instructions">Please enter ID# without the "S" and without leading zero.</p>'
            );
        }

        //sfa cart messaging was put here because sfacart.aspx page would not show up under inSite pages
        var loc2 = window.location.href;
        loc2 = loc2.toLowerCase();
        if (loc2.indexOf('sfacart.aspx') >= 1) {
            $('#ctl00_ctl00_Content_Content_Label1').parent().parent().after(
                '<tr><td><p id="account-entry-instructions">Please enter ID# without the "S" and without leading zero.</p></td></tr>'
            );
            $('#account-entry-instructions').parent().css({
                'min-width': '700px',
                'position': 'absolute'
            });
        }

        //customerregister.aspx messaging modified here because customerregister.aspx page would not show up under inSite pages
        var loc3 = window.location.href;
        loc3 = loc3.toLowerCase();
        if (loc3.indexOf('customerregister.aspx') >= 1) {
            $('#ctl00_ctl00_Content_Content_txtEmail').attr('placeholder',
                ' Use @monmouth.edu email if you have one.');
        }

        //checkout.aspx messaging modified here because checkout page would not show up under inSite pages
        var loc4 = window.location.href;
        loc4 = loc4.toLowerCase();
        if (loc4.indexOf('checkout.aspx') >= 1) {
            $('#ctl00_ctl00_Content_Content_lblBillAddress1').before(
                '<span style="color:red">If rentals are in your cart, the email you are registered with must end in "@monmouth.edu."  Please update your email address if necessary by clicking the "Change" link above.</span><br><br>'
            );
        }

        //hide compare prices for ISBN 9781581581584 per Liz' request, coursematerials.aspx page not accessible in accordian so script put here 
        var $isbnElement = $('tr[id$=pnlItemTxtDisplayISBN]:contains(781581581584)');
        var $containingElement = $isbnElement.closest(".course_info");
        $compareBox = $containingElement.find('div[id$="updateCompare"]');
        $compareBox.css('display', 'none');

    });
</script> <!--Checkout message styling--> 
<style>
    p#account-entry-instructions {
        line-height: 1;
        margin-bottom: 7px;
        color: red;
        margin-top: 4px;
    }

    label#ctl00_ctl00_Content_Content_Label30 {
        white-space: nowrap;
    }

    /*sfa cart page styling*/

    input#ctl00_ctl00_Content_Content_submitButton {
        margin-top: 30px;
    }
</style> 
<script type="text/javascript">
        $(document).ready(function () {
                //ADA fix keeps .ui-dialog from loading twice on the page
                $('.ui-dialog').each(function (e) {
                    if (e != 0) {
                        $(this).remove();
                    }
                });
            });

    </script> 
<script type="text/javascript">
        //allowing maintain scroll position on postbacks for mvc
        $(document).scroll(function(){
            localStorage['ControllerPageName'] = document.URL;
            localStorage['MaintainScrollPosition'] = $(document).scrollTop();
        });
        $(document).ready(function () {
            var postMethod = "GET";
            var scrollPositionIgnore = $('#scrollPositionIgnore').length;
            if (postMethod === "POST" && scrollPositionIgnore <= 0) {
                if (localStorage['ControllerPageName'] == document.URL) {
                    $(document).scrollTop(localStorage['MaintainScrollPosition']);
                }
            }
            $('.ui-dialog-titlebar-close').html('X');
            $('.sessionClose').click(function () {
                window.location.reload();
            });
        });
        window.onload = function () {
            setTimeout(SessionAlert, 59 * 60000);
        }
        function SessionAlert() {
           $('#sessionModal').modal('show');
           $('body').css('overflow', 'hidden');
        }
    </script>
</body>
</doc>