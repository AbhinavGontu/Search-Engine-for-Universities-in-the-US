<doc>
<filename>monmouth.edu5.html</filename>
<url>http://mubookstore.monmouth.edu/selecttermdept</url>
<ip>67.133.85.172</ip>
<title>Select Textbooks</title>
<body>
<header> 
 <div data-role="header"> 
 </div> 
</header> <a href="#contentSection" tabindex="0" class="hidden_label">Skip to main content</a> 
<p class="hiddenForm" hidden></p> 
<div class="reloadPage" hidden>
 No
</div> 
<main id="page_wrapper"> 
 <div id="topSection"> 
  <div class="container-fluid"> 
   <div class="topHeader"> 
    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 head"> <a href="http://mubookstore.monmouth.edu/Home"><img class="img-responsive" alt="Monmouth University Store Logo" src="/SiteImages/27-SchoolImages/27-2019%20Redesign/27-top/27-UniversityStoreD.jpg"></a>
    </div> 
    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 head mob-bg"> 
     <div class=" topRight"> <a class="topLink" href="http://mubookstore.monmouth.edu/RegisterType"><em class="fa fa-pencil" aria-hidden="true"></em>&nbsp;Register</a> <a class="topLink" href="http://mubookstore.monmouth.edu/Login"><em class="fa fa-sign-in" aria-hidden="true"></em>&nbsp;Login</a> <a class="topLink" href="http://mubookstore.monmouth.edu/ShoppingCart"><em class="fa fa-shopping-cart" aria-hidden="true"></em>&nbsp;Cart</a> <span class="search-here"></span> 
     </div> 
    </div> 
   </div> 
  </div> 
  <input name="9280902" type="hidden" value="{ id = Text_Id }">
  <nav class="navbar navbar-default"> 
   <div class="container-fluid"> 
    <div class="navbar-header"> <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#myNavbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> 
    </div> 
    <div class="collapse navbar-collapse" id="myNavbar"> 
     <ul class="nav navbar-nav"> 
      <li class="dropdown"> <a class="dropdown-toggle" href="#" data-toggle="dropdown">Textbooks <span class="caret mob-caret"></span></a> 
       <ul class="dropdown-menu"> 
        <li><a href="http://mubookstore.monmouth.edu/selecttermdept">Order Textbooks</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74457">Ordering Instructions</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74454">Textbook Rental Policies</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74455">eBook Information</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/FacultyAdoptions/DefaultN">Faculty Adoptions</a></li> 
        <li><a href="http://onlinebuyback.mbsbooks.com/index.php?jde=8406" target="_blank">Online Buyback</a></li> 
       </ul> </li> 
      <li><a href="http://mubookstore.monmouth.edu/MerchList?ID=1968">Tradebooks</a></li> <!-- <li><a href="http://mubookstore.monmouth.edu/Buyback">Buyback</a></li>-----> 
      <li class="dropdown"> <a class="dropdown-toggle" href="#" data-toggle="dropdown">Apparel <span class="caret mob-caret"></span></a> 
       <ul class="dropdown-menu"> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74447">Men's Apparel</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74448">Women's Apparel</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74449">Kid's Apparel</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=75454">Family Apparel</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=75455">Under Armour</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=75456">Gear</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=75458">Champion</a></li> 
       </ul> </li> 
      <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74450">Gifts</a></li> 
      <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74458">MU Sports</a></li> 
      <li><a href="http://mubookstore.monmouth.edu/MerchList?ID=5240">Course Materials</a></li> 
      <li><a href="#">Office Supplies</a></li> 
      <li class="dropdown"> <a class="dropdown-toggle" href="#" data-toggle="dropdown">About <span class="caret mob-caret"></span></a> 
       <ul class="dropdown-menu"> 
        <li><a href="http://mubookstore.monmouth.edu/storeabout">About Us</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/contact">Contact</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74451">Return Policy</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74452">Shipping Policy</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74453">Miscellaneous Policies</a></li> 
        <li><a href="http://mubookstore.monmouth.edu/SiteText?id=74454">Textbook Rental Policies</a></li> 
       </ul> </li> 
     </ul> 
    </div> <!--collapse--------> 
   </div> <!--.container-----> 
  </nav> <!--/.navbar navbar-default----> 
  <input name="9280904" type="hidden" value="{ id = Text_Id }">
  <div id="stripe">
   &nbsp;
  </div> 
  <input name="9280903" type="hidden" value="{ id = Text_Id }"> 
  <div class="clear"></div> 
 </div> 
 <div> 
  <div id="ContainDiv" class="contain container clear"> 
   <div id="contentSection" class="col-lg-12 col-md-12 col-sm-12 col-xs-12"> 
    <form action="/selecttermdept" method="post">
     <input name="__RequestVerificationToken" type="hidden" value="DebmEfsHYDiMByFt3ouz3vfgoC7JX87OQ0-QDJK94SiQmwXnqa4THd8I8DEcnn9SEtSEr81J_3pIi3I3SqotwNBibPA1">
    </form>
    <div id="search_hidden"></div> <label class="hidden_label" for="txtSearch">Search for Book</label> <label class="hidden_label" for="SelectedTerm">Select Term</label> 
    <div id="errorMesg" class="error red"> 
    </div> 
    <div id="errorMesg2" class="error red"> 
    </div> 
    <h1 class="page-header textc" id="SelectTermDeptHeader">Select Term and Departments</h1> 
    <div id="HiddenCourse" class="modal fade" role="dialog"> 
     <div class="modal-dialog modal-sm"> <!-- Modal content--> 
      <div class="modal-content"> 
       <div id="HiddenCourseCRN" class="modal-body"> 
        <div class="One_Course bottom_border bottom10"> 
         <div class="Course_Section col-xs-11 padding0"> 
          <div class="form-group"> 
           <div id="" class="Term_Search col-sm-4 col-xs-12 hover_pointer top5 padding0"> 
            <div class="col-xs-2 padding0 textc"> <em class="fa fa-chevron-circle-down fa-25x ordering_enabled" aria-hidden="true"></em> 
            </div> 
            <div class="col-xs-10 Term_Name_Div"> 
             <p class="term_name min-height25em padding-top5 ordering_enabled" id=""></p> 
             <input class="TermId term_value" name="$VB$Local_item.termId" type="hidden" value=""> <label class="displayb"><span class="hidden_label">Search for Term:</span><input type="hidden" class="termInput -control height3em top3 term_input" placeholder="Your Term"></label> 
            </div> 
            <ul class="term_list top10 clear textl displayn padding0"></ul> 
           </div> 
           <div id="" class="Dept_Search col-sm-4 col-xs-12 hover_pointer top5 padding0"> 
            <div class="col-xs-2 padding0 textc"> <em class="fa fa-search fa-25x ordering_enabled" aria-hidden="true"></em> 
            </div> 
            <div class="col-xs-10 Dept_Name_Div"> 
             <input type="hidden" class="form-control height3em top3 dept_input" placeholder="Department"> 
             <p class="dept_hidden ordering_enabled top7 dept_p"></p> <label class="displayb"><span class="hidden_label">Search for Department:</span><input class="deptId dept_value" name="$VB$Local_item.termId" type="hidden" value=""></label> 
            </div> 
            <ul class="dept_list top10 clear textl displayn"></ul> 
           </div> 
           <div id="" class="Section_Search col-sm-4 col-xs-12 hover_pointer top5 padding0"> 
            <div class="col-xs-2 padding0 textc"> <em class="fa fa-search fa-25x ordering_enabled" aria-hidden="true"></em> 
            </div> 
            <div class="col-xs-10 Section_Name_Div"> 
             <input type="hidden" class="form-control height3em top3 sect_input" placeholder="Course-Section-Instructor"> 
             <p class="sect_hidden ordering_enabled top7 sect_p"></p> <label class="displayb"><span class="hidden_label">Search for Course-Section-Instructor:</span><input class="courseId section_value" name="$VB$Local_item.termId" type="hidden" value=""></label> 
            </div> 
            <ul class="sect_list top10 clear textl displayn"></ul> 
           </div> 
          </div> 
         </div> 
         <div class="Remove_Course col-xs-1"> <em class="fa fa-times-circle-o remove_enabled remove_disabled" aria-hidden="true"></em> 
         </div> 
         <div class="clear"></div> 
        </div> 
       </div> 
       <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div id="Book_Search" class="col-lg-6 col-md-6 col-sm-6 col-xs-12"> 
     <div class="panel panel-info"> 
      <div class="panel-heading">
       Search for Book
      </div> 
      <div class="panel-body"> 
       <div class="form-group"> 
        <div id="Book_Input" class="col-xs-10"> 
         <input id="txtSearch" accesskey="b" type="text" class="form-control height3em" placeholder="Search for Book"> 
         <div id="Book_Error" style="margin-top: 5px;"></div> 
        </div> 
        <div id="Book_Button" class="col-xs-2 top-5"> 
         <div id="Book_Search_Arrow" onclick="" class="fa fa-arrow-circle-o-right fa-25x book_search_button hover_pointer" aria-hidden="true"></div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div id="Course_Search" class="col-lg-12 col-md-12 col-sm-12 col-xs-12"> 
     <div class="panel panel-info"> 
      <div class="panel-heading">
       Search by Course
      </div> 
      <div class="panel-body" id="div-course"> 
       <div class="One_Course bottom_border bottom10"> 
        <div class="Course_Section col-xs-11 padding0"> 
         <div class="form-group"> 
          <div class="Term_Search col-sm-4 col-xs-12 hover_pointer top5 padding0"> 
           <div class="col-xs-2 padding0 textc"> <em class="fa fa-chevron-circle-down fa-25x ordering_enabled" aria-hidden="true"></em> 
           </div> 
           <div class="col-xs-10 Term_Name_Div"> 
            <p class="term_name min-height25em padding-top5 ordering_enabled" data-id="10178">SPRING 21 (Order Now) </p> 
            <input class="TermId term_value" name="$VB$Local_item.termId" type="hidden" value="10178"> <label class="displayb"><span class="hidden_label">Search for Term:</span><input type="hidden" class="termInput form-control height3em top3 term_input" placeholder="Your Term"></label> 
           </div> 
           <ul class="term_list top10 clear textl displayn padding0"> 
            <li data-id="ter-10178" class="ordering_hover_color ordering_enabled padding10 hover_pointer bottom_border list_display"><a tabindex="0" class="listLink displayb">SPRING 21 (Order Now)</a></li> 
           </ul> 
          </div> 
          <div id="" class="Dept_Search col-sm-4 col-xs-12 hover_pointer top5 padding0"> 
           <div class="col-xs-2 padding0 textc"> <em class="fa fa-search fa-25x ordering_enabled ordering_disabled" aria-hidden="true"></em> 
           </div> 
           <div class="col-xs-10 Dept_Name_Div"> <label class="displayb"> <span class="hidden_label">Search for Department:</span><input type="hidden" class="deptInput form-control height3em top3 dept_input" placeholder="Department"></label> 
            <p class="dept_hidden ordering_enabled ordering_disabled top7 dept_p">Department</p> 
            <input class="deptId dept_value" name="$VB$Local_item.termId" type="hidden" value="0"> 
           </div> 
           <ul class="dept_list top10 clear textl displayn"> 
           </ul> 
          </div> 
          <div id="" class="Section_Search col-sm-4 col-xs-12 hover_pointer top5 padding0"> 
           <div class="col-xs-2 padding0 textc"> <em class="fa fa-search fa-25x ordering_enabled ordering_disabled" aria-hidden="true"></em> 
           </div> 
           <div class="col-xs-10 Section_Name_Div"> <label class="displayb"><span class="hidden_label">Search for Course-Section-Instructor:</span><input type="hidden" class="sectInput form-control height3em top3 sect_input" placeholder="Course-Section-Instructor"></label> 
            <p class="sect_hidden ordering_enabled ordering_disabled top7 sect_p">Course-Section-Instructor</p> 
            <input class="courseId section_value" name="$VB$Local_item.termId" type="hidden" value="0"> 
           </div> 
           <ul class="sect_list top10 clear textl displayn"> 
           </ul> 
          </div> 
         </div> 
        </div> 
        <div class="Remove_Course col-xs-1" id="0"> <em class="fa fa-times-circle-o remove_enabled remove_disabled" aria-hidden="true"></em> 
        </div> 
        <div class="clear"></div> 
       </div> 
       <div id="Bottom_Buttons"> 
        <div id="Add_Another_Course" tabindex="0" accesskey="a" class="col-lg-6 col-md-6 col-sm-6 col-xs-12"> 
         <p class="add_another_course_button_enabled hover_pointer font18 add_another_course_button_enabled"><span class="glyphicon glyphicon-plus-sign right5"></span>Add Another Course</p> 
        </div> 
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12"> 
         <p class="col-lg-6 col-md-6 col-sm-6 col-xs-12"> </p> 
         <div id="Get_Materials" tabindex="0" accesskey="v" class="col-lg-6 col-md-6 col-sm-6 col-xs-12 textc ordering_enabled hover_pointer"> <em class="fa fa-arrow-circle-o-right fa-4x" aria-hidden="true"></em> <!--All selected sourses are saved to a session send user to course material page--> 
          <p class="">View Your Materials</p> 
         </div> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div id="Modal" class="modal fade" role="dialog"> 
     <div class="modal-dialog"> <!-- Modal content--> 
      <div class="modal-content"> 
       <div class="modal-body divCaptcha_Modal"> 
       </div> 
       <div class="modal-footer"> <a type="button" class="btn btn-default hover_pointer" data-dismiss="modal">Close</a> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div id="NoSelection" class="modal fade" role="dialog"> 
     <div class="modal-dialog modal-sm"> <!-- Modal content--> 
      <div class="modal-content"> 
       <div class="modal-body"> 
        <p> Please make a selection first.</p> 
       </div> 
       <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div id="filledRow" class="modal fade" role="dialog"> 
     <div class="modal-dialog"> <!-- Modal content--> 
      <div class="modal-content"> 
       <div class="modal-body"> 
        <p> Course selection cannot be changed once added. Would you Like To remove this course?</p> 
       </div> 
       <div class="modal-footer"> <button data-id="" id="AddCourseModal" type="button" class="btn btn-default">Yes</button> <button type="button" class="btn btn-default" data-dismiss="modal">No</button> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div id="TermInput" class="modal fade" role="dialog"> 
     <div class="modal-dialog modal-sm"> <!-- Modal content--> 
      <div class="modal-content"> 
       <div class="modal-body"> 
        <p> Please enter a valid Term</p> 
       </div> 
       <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div id="DeptInput" class="modal fade" role="dialog"> 
     <div class="modal-dialog modal-sm"> <!-- Modal content--> 
      <div class="modal-content"> 
       <div class="modal-body"> 
        <p> Please enter a valid Department</p> 
       </div> 
       <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> 
       </div> 
      </div> 
     </div> 
    </div> 
    <div id="SelectInput" class="modal fade" role="dialog"> 
     <div class="modal-dialog modal-sm"> <!-- Modal content--> 
      <div class="modal-content"> 
       <div class="modal-body"> 
        <p> Please enter a valid Course-Section-Instructor</p> 
       </div> 
       <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
 </div> 
 <div id="BottomSection" class="clear"> 
  <div class="container-fluid footerWrapper"> 
   <div class="innerWrapper"> 
    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12 location"> <span id="large">University Store</span>
     <br> 400 Cedar Ave.
     <br> West Long Branch, NJ
     <br> 07764-1898
     <br> Phone: 732-571-3453
    </div> 
    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12 hours"> <span id="large">Hours</span>
     <br> Monday 8:30am - 4pm
     <br> Tuesday 8:30am - 4pm
     <br> Wednesday 8:30am - 4pm
     <br> Thursday 8:30am - 4pm
     <br> Friday 8:30am - 4pm
     <br> Saturday Closed
     <br> Sunday Closed
    </div> 
    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12 info"> <span id="large">Information</span>
     <br> <a href="http://mubookstore.monmouth.edu/Contact">Contact</a>
     <br> <a href="http://mubookstore.monmouth.edu/storeabout">About</a>
     <br> <a href="http://mubookstore.monmouth.edu/SiteText?id=74451">Return Policy</a>
     <br> <a href="http://mubookstore.monmouth.edu/SiteText?id=74454">Textbook Rental Policy</a>
     <br> <a href="http://mubookstore.monmouth.edu/SiteText?id=74452">Shipping Policy</a>
     <br> <a href="http://mubookstore.monmouth.edu/SiteText?id=74453">Miscellaneous Policies</a>
     <br> <a href="http://mubookstore.monmouth.edu/SiteText?id=74459"></a>
    </div> 
    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12 social"> <a href="https://www.facebook.com/MonmouthUniversityBookstore/" target="_blank"><img alt="Monmouth Facebook" src="/SiteImages/27-SchoolImages/27-2019%20Redesign/27-icons/27-facebook.png"></a> <a href="https://www.instagram.com/monmouthuniversitybookstore/" target="_blank"><img alt="Monmouth Instagram" src="/SiteImages/27-SchoolImages/27-2019%20Redesign/27-icons/27-instagram.png"></a> <a href="https://twitter.com/MU_Bookstore_" target="_blank"><img alt="Monmouth Twitter" src="/SiteImages/27-SchoolImages/27-2019%20Redesign/27-icons/27-twitter.png"></a> <a href="https://www.pinterest.com/mustore/" target="_blank"><img alt="Monmouth Pinterest" src="/SiteImages/27-SchoolImages/27-2019%20Redesign/27-icons/27-pinterest.png"></a> 
    </div> 
   </div> 
  </div> 
  <input name="9280907" type="hidden" value="{ id = Text_Id }"> 
 </div> 
 <div class="modal fade" id="errorModal" role="dialog"> 
  <div class="modal-dialog"> <!-- Modal content--> 
   <div class="modal-content"> 
    <div class="modal-header"> 
     <p class="modal-title">Critical Error!</p> 
    </div> 
    <div class="modal-body"> 
     <p>Failed to call the server.</p> 
    </div> 
    <div class="modal-footer"> <a type="button" class="btn btn-default hover_pointer" data-dismiss="modal">Close</a> 
    </div> 
   </div> 
  </div> 
 </div> 
 <div id="dynamicModal" class="modal fade" role="dialog"> 
  <input type="hidden" value="" id="dynamicButton"> 
  <div class="modal-dialog"> <!-- Modal content--> 
   <div class="modal-content dynamicModalContent"> 
   </div> 
  </div> 
 </div> 
 <div id="sessionModal" class="modal fade" role="dialog" data-keyboard="false" data-backdrop="static"> 
  <div class="modal-dialog"> <!-- Modal content--> 
   <div class="modal-content"> 
    <div class="modal-header"> 
     <p class="modal-title">Session Timeout</p> 
    </div> 
    <div class="modal-body"> 
     <p>Your session has timed out and requires a page refresh.</p> 
    </div> 
    <div class="modal-footer"> <a class="btn btn-default sessionClose">Refresh Page</a> 
    </div> 
   </div> 
  </div> 
 </div> 
</main> 
<footer> 
</footer> 
<div id="div_privacy" class="textc">
 <a href="/Privacy" tabindex="0">Privacy and Disclaimer</a>
</div> 
<div id="Server">
 I.1.B 
</div> 
<script type="text/javascript">
        var token = $('input[name="__RequestVerificationToken"]').val();
        $(document).ready(function () {
            $('.ui-dialog-titlebar-close').attr('aria-label', 'Titlebar Close');
            //accesskey functionality
            $('body').keydown(function (e) {
                var $firstTerm = $(this).find("#Course_Search").find('.Term_Search').first();
                /*ALT + T this is for the first access key to select the first term*/
                if (e.which == 84 && e.altKey) {
                    $($firstTerm).click();
                }
                /*ALT + S (THis is for the select box in CRN Search)*/
                if (e.which == 83 && e.altKey) {
                    $("#SelectedTerm").focus();
                }
                /*ALT + C (THis is for the input box in CRN Search)*/
                if (e.which == 67 && e.altKey) {
                    $("#txtCrn").focus();
                }
                /*ALT + B (THis is for the input box in Book Search)*/
                if (e.which == 66 && e.altKey) {
                    $("#txtSearch").focus();
                }
                /*ALT + V (THis is for the Get Materials Link box in Book Search)*/
                if (e.which == 86 && e.altKey) {
                    $("#Get_Materials").click();
                }
                /*ALT + A (THis is for the add another course Link box in Book Search)*/
                if (e.which == 65 && e.altKey) {
                    $("#Add_Another_Course").click();
                }
            });
            //add tab functionality on the CRN
            $('#txtCrn').keydown(function (e) {
                var $lastTerm = $('.Term_Search').last();
                var $hidden = $($lastTerm).find('.term_name').attr('hidden');
                var $focus = $($lastTerm).find('.termInput');
                var $remove = $('.One_Course').last().find('.Remove_Course').attr('id');

                if (e.keyCode == 9) {
                    if (!e.shiftKey) {
                        if ($('#Book_Search').length <= 0) {
                            if ($remove != "") {
                                e.preventDefault();
                                $('#Add_Another_Course').click();
                                $('.Term_Search').last().click();
                            } else {
                                e.preventDefault();
                                if ($hidden === "hidden") {
                                    $focus.focus();
                                } else {
                                    $($lastTerm).click();
                                }
                            }
                        }
                    }
                }
            });
            //add tab functionality on book search
            $('#txtSearch').keydown(function (e) {
                var $lastTerm = $('.Term_Search').last();
                var $hidden = $($lastTerm).find('.term_name').attr('hidden');
                var $focus = $($lastTerm).find('.termInput');
                var $remove = $('.One_Course').last().find('.Remove_Course').attr('id');
                if (e.keyCode == 9) {
                    if (!e.shiftKey) {
                        if ($remove != "") {
                            e.preventDefault();
                            $('#Add_Another_Course').click();
                            $('.Term_Search').last().click();
                        } else {
                            e.preventDefault();
                            if ($hidden === "hidden") {
                                $focus.focus();
                            } else {
                                $($lastTerm).click();
                            }
                        }
                    }
                }
            });
            //screen reader functionality for CRN focus
            $("#txtCrn").focusin(function () {
                var $selectedHtml = '<label id="search_hidden_text" role="alert" class="hidden_label">Search by CRN/Unique ID</label>'
                $('#search_hidden_text').remove();
                $('#search_hidden').html($selectedHtml);
            });
            //screen reader functionality for book search focus
            $("#txtSearch").focusin(function () {
                var $selectedHtml = '<label id="search_hidden_text" role="alert" class="hidden_label">Search for book using ISBN or book description</label>'
                $('#search_hidden_text').remove();
                $('#search_hidden').html($selectedHtml);
            });
            //screen reader functionality for term input field on focus
            $('.term_input').focusin(function () {
                $('.list_display').removeClass('order_hover_color_down_up');
                $(this).val('');
                var $selectedHtml = '<label id="search_hidden_text" role="alert" class="hidden_label">Term Selection. Please press up or down arrow to make a selection and then press enter</label>'
                $('#search_hidden_text').remove();
                $('#search_hidden').html($selectedHtml);

            });
            //screen reader functionality for department field on focus
            $('.dept_input').focusin(function () {
                $('.list_display').removeClass('order_hover_color_down_up');
                var $selectedHtml = '<label id="search_hidden_text" role="alert" class="hidden_label">Department Selection. Please press up or down arrow to make a selection and then press enter</label>'
                $('#search_hidden_text').remove();
                $('#search_hidden').html($selectedHtml);

            });
            //screen reader functionality for course field on focus
            $('.sect_input').focusin(function () {
                $('.list_display').removeClass('order_hover_color_down_up');
                var $selectedHtml = '<label id="search_hidden_text" role="alert" class="hidden_label">Course-Section-Instructor Selection. Please press up or down arrow to make a selection and then press enter</label>'
                $('#search_hidden_text').remove();
                $('#search_hidden').html($selectedHtml);

            });
            //allows screen reader to read input in term input field when user types up or down
            $('.term_input').keyup(function (e) {
                if (e.keyCode == 38 || e.keyCode == 40) {
                    var $selectedTerm = $(this).val();
                    var $selectedHtml = '<label id="search_hidden_text" role="alert" class="hidden_label">' + $selectedTerm + '</label>'
                    $('#search_hidden_text').remove();
                    $('#search_hidden').html($selectedHtml);
                }
            });
            //allows screen reader to read input in department input field when user types up or down
            $('.dept_input').keyup(function (e) {
                if (e.keyCode == 38 || e.keyCode == 40) {
                    var $selectedTerm = $(this).val();
                    var $selectedHtml = '<label id="search_hidden_text" role="alert" class="hidden_label">' + $selectedTerm + '</label>'
                    $('#search_hidden_text').remove();
                    $('#search_hidden').html($selectedHtml);

                }
            });
            //allows screen reader to read input in course input field when user types up or down
            $('.sect_input').keyup(function (e) {
                if (e.keyCode == 38 || e.keyCode == 40) {
                    var $selectedTerm = $(this).val();
                    var $selectedHtml = '<label id="search_hidden_text" role="alert" class="hidden_label">' + $selectedTerm + '</label>'
                    $('#search_hidden_text').remove();
                    $('#search_hidden').html($selectedHtml);

                }
            });
            //adds the correct class name to show disabled/not ready on course input
            $('.sect_p').each(function () {
                if ($(this).text() == "Course-Section-Instructor") {
                    $(this).addClass('ordering_disabled');
                    $(this).parent().prev().find('em').addClass('ordering_disabled');
                } else {
                    $(this).addClass('ordering_enabled');
                    $(this).removeClass('ordering_disabled');
                    $(this).parent().prev().find('em').addClass('ordering_enabled');
                    $(this).parent().prev().find('em').removeClass('ordering_disabled');

                }

            });
            //adds the correct class name to show disabled/not ready on department input
            $('.dept_p').each(function () {
                $dept_this = $(this);
                if ($(this).text() == "Department") {
                    $(this).addClass('ordering_disabled');
                    $(this).parent().prev().find('em').addClass('ordering_disabled');
                } else {
                    $(this).addClass('ordering_enabled');
                    $(this).removeClass('ordering_disabled');
                    $(this).parent().prev().find('em').addClass('ordering_enabled');
                    $(this).parent().prev().find('em').removeClass('ordering_disabled');
                    var $dept_test = $(this).next().val();
                    var $term_test = $(this).parent().parent().prev().find('.Term_Name_Div').find('input').first().val();
                }

            });
            //adds the correct class name to show disabled/not ready on term input
            $('.term_name').each(function () {
                var $term_this = $(this);
                if ($(this).text() == "Your Term") {
                    $(this).addClass('ordering_disabled');
                    $(this).parent().prev().find('em').addClass('ordering_disabled');
                } else {
                    $(this).addClass('ordering_enabled');
                    $(this).removeClass('ordering_disabled');
                    $(this).parent().prev().find('em').addClass('ordering_enabled');
                    $(this).parent().prev().find('em').removeClass('ordering_disabled');
                    var $term_test = $(this).next().val();
                    $(this).parent().parent().next().find('.dept_p').addClass('ordering_enabled');
                    $(this).parent().parent().next().find('.dept_p').removeClass('ordering_disabled');
                    $(this).parent().parent().next().find('em').addClass('ordering_enabled');
                    $(this).parent().parent().next().find('em').removeClass('ordering_disabled');
                }

            });
            var $add_button_test = $('.One_Course').last().find('.sect_p').text();
            var value_final = "";
            //allows the book search box to match the height of the CRN box only when on screen
            if ($("#CRN").length) {
                var CRN_Height = $('#CRN .panel .panel-body').height();
                $('#Book_Search .panel .panel-body').css('min-height', CRN_Height + 10);
            }
            //add disabled to input field on course search if it has correct class
            $("#Course_Search input[type=text]").each(function (i) {
                var test = $(this).height();
                if ($(this).parent().prev().find('em').hasClass('ordering_disabled')) {
                    $(this).attr("disabled", 'disabled');
                } else {
                    $(this).focus();
                }
            });
            //add another course click function
            $('#Add_Another_Course').click(function () {
                var courseCount = 1;
                $('.Remove_Course').each(function () {
                    courseCount += 1;
                });
                if (courseCount == 2) {
                    location.reload();
                } else {
                    var new_section = $('.One_Course').last().clone(true);
                    //need to remove "remove Course" id so it doens't conflict with other scripts.
                    $(new_section).find('.Remove_Course').attr('id', '');
                    var new_section_text = $('.One_Course').last().find('.sect_p').text();
                    if (new_section_text !== "Course-Section-Instructor") {
                        $(new_section).insertBefore('#Bottom_Buttons');
                    }
                    if (new_section_text !== "Course-Section-Instructor") {
                        var $term_Value = $('.One_Course').last().find('.term_value').val();
                        var $dept_last = $('.One_Course').last().find('.dept_list');
                        $term_Value = $term_Value.replace('ter-', '');
                        $.ajax({
                            type: "POST",
                            url: 'SelectTermDept/Department',
                            updateTargetId: "department_list",
                            datatype: "json",
                            data: {__RequestVerificationToken: token, "termId": $term_Value },
                            error: function (xhr) {
                                $('#errorModal').modal('show');
                                $('#errorModal').focus();
                            },
                            success: function (data, jqXHR) {
                                if (data.length == 0) {
                                    $('#errorMesg').append("<li>There are no term selected.</li>");
                                    return;
                                }
                                // Bind Departments
                                $($dept_last).html(data);

                                return;

                            }
                        });
                        $('.One_Course').find('ul').each(function () {
                            $(this).hide();
                        });
                        $('.One_Course').find('input').each(function () {
                            $(this).attr('type', 'hidden');
                        });
                        $('.One_Course').find('.dept_p').each(function () {
                            $(this).removeAttr('hidden');
                        });
                        $('.One_Course').find('.sect_p').each(function () {
                            $(this).removeAttr('hidden');
                        });
                        $('.One_Course').find('.term_name').each(function () {
                            $(this).removeAttr('hidden');
                        });
                        $('.One_Course').last().find('.Section_Name_Div').find('p').text('Course-Section-Instructor');
                        //need to remove "remove Course" id so it doens't conflict with other scripts.
                        $('.One_Course').last().find('.Remove_Course').attr('id', '');
                        $('.One_Course').last().find('.sect_list').html('');
                        $('.One_Course').last().find('.Section_Search').find('em').addClass('ordering_disabled');
                        $('.One_Course').last().find('.Section_Name_Div').find('p').addClass('ordering_disabled');
                        $('.One_Course').last().find('.Section_Name_Div').find('input').last().val('');
                        $('.One_Course').last().find('.Dept_Name_Div').find('p').text('Department');
                        $('.One_Course').last().find('.Dept_Name_Div').find('p').attr('hidden', 'hidden');
                        $('.One_Course').last().find('.Dept_Name_Div').find('input').first().attr('type', 'text');
                        $('.One_Course').last().find('.Dept_Name_Div').find('input').first().focus();
                        $('.One_Course').last().find('.Dept_Name_Div').find('input').last().val('');
                        $('.One_Course').last().find('.dept_list').show();
                        $('.One_Course').last().find('.deptInput').focus();
                    }
                }
            });
            //add another course press enter on focus
            $('#Add_Another_Course').keyup(function (e) {
                if (e.keyCode == 13) {
                    $(this).click();
                }
            });
            //Search for book funcionality
            $("#Book_Search_Arrow").click(function () {
                var search = $("#txtSearch").val();
                if (search == '') {
                    $('#Book_Error').html('');
                    $('#Book_Error').append("<div role='alert'>Please enter search criteria.</div>");
                    return;
                }
                $.ajax({
                    url: 'SelectTermDept/Search',
                    type: "POST",
                    data: {__RequestVerificationToken: token, "sh": search },
                    dataType: "json",
                    error: function (xhr) {
                        $('#errorModal').modal('show');
                        $('#errorModal').focus();
                    },
                    success: function (data, jqXHR) {
                        if (data.valid == false) {
                            $('#Book_Error').html('');
                            $('#Book_Error').append("<div>" + data.message + "</div>");
                            return;
                        }
                        //send user to Course material page
                        var url = 'CourseMaterials?ids=' + data.retval + '&search=' +  search;
                        window.location.href = url;
                        return;
                    }
                });

            });
            //Search for book funcionality when user types enter in search for book input field
            $('#txtSearch').keyup(function (e) {
                if (e.keyCode == 13) {
                    $("#Book_Search_Arrow").click();
                }
            });
            //Search for Course by UniqueId
            $("#CRN_Arrow").click(function () {
                var courseId = $("#txtCrn").val();
                $('#CRN_Error').html('');
                var termId = $("#SelectedTerm").val();
                if (courseId == '') {
                    $('#CRN_Error').append("<div role='alert' style='color: red;'>Please enter search criteria.</div>");
                    return;
                }
                $.ajax({
                    type: "POST",
                    url: 'SelectTermDept/CourseIds',
                    data: {__RequestVerificationToken: token, "id": courseId, "trmId": termId },
                    dataType: "json",
                    error: function (xhr) {
                        $('#errorModal').modal('show');
                        $('#errorModal').focus();
                    },
                    success: function (data, jqXHR) {
                        if (data.valid == false) {
                            $('#CRN_Error').append("<div role='alert' style='color: red;'>" + data.message + "</div>");
                            return;
                        } else {
                            //Data coming back from the server in HTML format ("_CoursesPartial")
                            $("#HiddenCourseCRN").append(data.retval);
                            var $hidden = $('#HiddenCourse').find('.One_Course').last();
                            var $newCRN = $('#HiddenCourse').find('.One_Course').first();
                            var $termName = $($hidden).find('.term_name').text();
                            $termName = $termName.trim();
                            $($newCRN).find('.term_name').text($termName);
                            var $termValue = $($hidden).find('.TermId').val();
                            $($newCRN).find('.TermId').val($termValue);
                            var $dptName = $($hidden).find('.dept_hidden').text();
                            $dptName = $dptName.trim();
                            $($newCRN).find('.dept_hidden').text($dptName);
                            var $dptValue = $($hidden).find('.deptId').val();
                            $($newCRN).find('.deptId').val($dptValue);
                            var $secName = $($hidden).find('.sect_hidden').text();
                            $secName = $secName.trim();
                            $($newCRN).find('.sect_hidden').text($secName);
                            var $secValue = $($hidden).find('.courseId').val();
                            $($newCRN).find('.courseId').val($secValue);
                            $($newCRN).find('.Remove_Course').attr('id', $secValue);
                            var $newCRN2 = $('#HiddenCourse').find('.One_Course').first();//clone this
                            var $newRow = $($newCRN2).clone(true);
                            $("#div-course ").prepend($newRow);
                            $($hidden).remove();
                            return;
                        }
                    }
                });
                $("#txtCrn").val('');

            });
            //Search for CRN functionalty when user types enter in CRN input field
            $('#txtCrn').keyup(function (e) {
                if (e.keyCode == 13) {
                    $("#CRN_Arrow").click();
                }
            });
        });
        //filledRow modal yes answer script
        $('#AddCourseModal').click(function () {
            $removeId = $(this).attr('data-id');
            $removeButton = $("body").find('#' + $removeId);
            $removeButton.click();
            $('#filledRow').modal('toggle');
            $('#filledRow').focus();
        });
        //Term Search Function Returns Terms on click.
        $('.Term_Search').on('click', function () {
            var $term_Search = $(this);
            var $removeValue = $(this).parent().parent().parent().find('.Remove_Course').attr('id');
            if ($removeValue != "" && $removeValue != "0") {
                $('#AddCourseModal').attr('data-id', $removeValue);
                $('#filledRow').modal('show');
                $('#filledRow').focus();
            } else {
                $.ajax({
                    type: "POST",
                    url: 'SelectTermDept/Terms',
                    updateTargetId: "term_list",
                    dataType: "json",
                    data: {__RequestVerificationToken: token},
                    error: function (xhr) {
                        $('#errorModal').modal('show');
                        $('#errorModal').focus();
                    },
                    success: function (data, jqXHR) {
                        if (data.length == 0) {
                            $('#errorMesg').append("<li>There are no terms available for ordering or inquiry.</li>");
                            return;
                        }
                        //Bind Terms list
                        $($term_Search).find(".term_list").html(data);
                        return;
                    }
                });
                var $ul = $(this).find('ul');
                if ($(this).find('ul').find('li').length) {
                    if ($(this).find('ul').css('display') == 'none') {
                        $(this).find('input').last().attr("type", "text");
                        $(this).find('input').last().focus();
                        $(this).find('p').first().attr("hidden", "hidden");
                    } else {
                        $(this).find('input').last().attr("type", "hidden");
                        $(this).find('p').first().removeAttr("hidden");
                    }
                    $('.One_Course').find('ul').not($ul).slideUp();
                    $(this).find('ul').slideToggle();
                    $('#Course_Search').find('li').removeClass("order_hover_color_down_up");
                    $('#Course_Search').find('li').removeClass("displayn");
                    $('#Course_Search').find('li').addClass('list_display');
                    $('.dept_list').slideUp();
                    $('.sect_list').slideUp();
                    $('.dept_input').attr("type", "hidden");
                    $('.dept_p').removeAttr("hidden");
                    $('.sect_input').attr("type", "hidden");
                    $('.sect_p').removeAttr("hidden");
                }
            }
        });
        //Term_List List Click function
        $('.term_list').on('click', 'li', function (e) {
            e.stopPropagation();
            var $term_list_selection = $(this);
            var li_text = $(this).text();
            var li_id = $(this).attr('data-id');
            var $li_id = li_id.replace("ter-", "");
            var term_var = $(this).parent().prev().find('p').text();
            //run code here to send to server for department data
            if (term_var !== li_text) {
                $(this).parent().parent().next().find(".dept_hidden").first().text('Department');
                $(this).parent().parent().next().find(".deptId").first().attr('value', "");
                $(this).parent().parent().next().next().find(".sect_hidden").first().text('Course-Section-Instructor');
                $(this).parent().parent().next().next().find("#sectionId").first().attr('value', '');
            }
            $(this).parent().slideUp();
            $(this).parent().prev().find('input').first().attr('value', li_id);
            $(this).parent().prev().find('p').text(li_text);
            $(this).parent().prev().find('p').removeAttr('hidden');
            $(this).parent().prev().find('input').last().attr('type', 'hidden');
            $('#Course_Search').find('li').removeClass("order_hover_color_down_up");
            $('#Course_Search').find('li').removeClass("displayn");
            $('#Course_Search').find('li').addClass('list_display');
            $(this).parent().parent().next().find('input').first().val("");
            $(this).parent().parent().next().find('input').first().attr("type", "text");
            $(this).parent().parent().next().find('em').removeClass("ordering_disabled");
            $(this).parent().parent().next().find('p').removeClass("ordering_disabled");
            $(this).parent().parent().next().find('p').first().attr("hidden", "hidden");
            $(this).parent().parent().next().find('input').first().attr("type", "text");
            $(this).parent().parent().next().find('input').first().focus();
            //Put Ajax for Department Here
            $.ajax({
                type: "POST",
                url: 'SelectTermDept/Department',
                updateTargetId: "department_list",
                dataType: "json",
                data: {__RequestVerificationToken: token, "termId": $li_id },
                error: function (xhr) {
                    $('#errorModal').modal('show');
                    $('#errorModal').focus();
                },
                success: function (data, jqXHR) {
                    if (data.length == 0) {
                        $('#errorMesg').append("<li>There are no term selected.</li>");
                        return;
                    }
                    // Bind Departments
                    $($term_list_selection).parent().parent().next().find('ul').html(data);
                    return;

                }
            });
            $(this).parent().parent().next().find('ul').show();
        });
        //Department search click function
        $('.Dept_Search').on('click', function () {
            var $Dept_Search = $(this);
            var $removeValue = $(this).parent().parent().parent().find('.Remove_Course').attr('id');
            if ($removeValue != "" && $removeValue != "0") {
                $('#AddCourseModal').attr('data-id', $removeValue);
                $('#filledRow').modal('show');
                $('#filledRow').focus();
            } else {
                var $term_id = $(this).prev().find('.Term_Name_Div').find('input').first().attr('value');
                $term_id = $term_id.replace('ter-', '');
                //ajax goes here to pull department list.
                $.ajax({
                    type: "POST",
                    url: 'SelectTermDept/Department',
                    updateTargetId: "department_list",
                    dataType: "json",
                    data: {__RequestVerificationToken: token, "termId": $term_id },
                    error: function (xhr) {
                        $('#errorModal').modal('show');
                        $('#errorModal').focus();
                    },
                    success: function (data, jqXHR) {
                        if (data.length == 0) {
                            $('#errorMesg').append("<li>There are no term selected.</li>");
                            return;
                        }
                        // Bind Departments
                        $($Dept_Search).find('.dept_list').html(data);

                        return;

                    }
                });
                var $ul = $(this).find('ul');
                if (!$(this).find('.dept_p').hasClass('ordering_disabled')) {
                    if ($(this).find('ul').css('display') == 'none') {
                        $(this).find('input').first().attr("type", "text");
                        $(this).find('input').first().focus();
                        $(this).find('p').first().attr("hidden", "hidden");
                    } else {
                        $(this).find('input').first().attr("type", "hidden");
                        $(this).find('p').first().removeAttr("hidden");
                    }
                    $('.One_Course').find('ul').not($ul).slideUp();
                    $(this).find('ul').slideToggle();
                    $('li').removeClass('order_hover_color_down_up');
                    $(this).find('input').first().val('');
                    $('#Course_Search').find('li').removeClass("order_hover_color_down_up");
                    $('#Course_Search').find('li').removeClass("displayn");
                    $('#Course_Search').find('li').addClass('list_display');
                    $('.term_list').slideUp();
                    $('.sect_list').slideUp();
                    $('.sect_input').attr("type", "hidden");
                    $('.sect_p').removeAttr("hidden");
                    $('.term_input').attr('type', 'hidden');
                    $('.term_name').removeAttr('hidden');
                }
            }
        });
        //Select Department List Click Function
        $('.dept_list').on('click', 'li', function (e) {
            e.stopPropagation();
            var $dept_list_selection = $(this);
            var dept_text = $(this).text();
            var dept_id = $(this).attr('data-id');
            var $dept_id = dept_id.replace("dpt-", '');
            var term_id = $(this).parent().parent().prev().find('.Term_Name_Div').find('input').first().val();
            var $term_id = term_id.replace('ter-', '');
            var dept_var = $(this).parent().prev().find('p').text();
            //run code here to send to server for section data
            if (dept_var !== dept_text) {
                $(this).parent().parent().next().find('.sect_hidden').first().text('Course-Section-Instructor');
                $(this).parent().parent().next().find("#sectionId").first().attr('value', '');
            }
            $(this).parent().prev().find('input').last().attr('value', dept_id);
            $(this).parent().prev().find('p').first().text(dept_text);
            $(this).parent().prev().find('input').first().attr('type', 'hidden');
            $(this).parent().prev().find('p').first().removeAttr('hidden');
            $(this).parent().prev().find('p').first().removeClass('ordering_disabled');
            $(this).parent().parent().next().find('input').first().attr('type', 'text');
            $(this).parent().parent().next().find('p').first().attr('hidden', 'hidden');
            $(this).parent().parent().next().find('input').val('');
            $(this).parent().parent().next().find('p').first().text('Course-Section-Instructor');
            $(this).parent().parent().next().find('button').val('');
            $(this).parent().slideUp();
            $(this).parent().parent().next().find('input').first().focus();
            $(this).parent().parent().next().find('em').removeClass("ordering_disabled");
            $(this).parent().parent().next().find('p').removeClass("ordering_disabled");
            //Ajax goes here
            $.ajax({
                cache: false,
                type: "POST",
                datatype: "json",
                url: 'SelectTermDept/Courses',
                data: {__RequestVerificationToken: token, "termId": $term_id, "deptId": $dept_id },
				updateTargetId: "course_list",
                error: function (xhr) {
                    $('#errorModal').modal('show');
                    $('#errorModal').focus();
                },
                success: function (data, jqXHR) {

                    // There is no problem with the validation
                    $($dept_list_selection).parent().parent().next().find('ul').html(data);

                    //});
                    return;
                }
            });

            $(this).parent().parent().next().find('ul').first().show();
            $('#Course_Search').find('li').removeClass("order_hover_color_down_up");
            $('#Course_Search').find('li').removeClass("displayn");
            $('#Course_Search').find('li').addClass('list_display');
        });
        //Section Search Click Event
        $('.Section_Search').on('click', function () {
            var $Sect_Search = $(this);
            var $removeValue = $(this).parent().parent().parent().find('.Remove_Course').attr('id');
            if ($removeValue != "" && $removeValue != "0") {
                $('#AddCourseModal').attr('data-id', $removeValue);
                $('#filledRow').modal('show');
                $('#filledRow').focus();
            } else {

                //ajax goes here to pull department list.
                var $dept_test = $(this).prev().find('.dept_value').val();
                $dept_test = $dept_test.replace("dpt-", '');
                var $term_test = $(this).prev().prev().find('.term_value').val();
                $term_test = $term_test.replace('ter-', '');
                $.ajax({
                    cache: false,
                    type: "POST",
                    datatype: "json",
                    url: 'SelectTermDept/Courses',
                    data: {__RequestVerificationToken: token, "termId": $term_test, "deptId": $dept_test },
                    updateTargetId: "course_list",
                    error: function (xhr) {
                        $('#errorModal').modal('show');
                        $('#errorModal').focus();
                    },
                    success: function (data, jqXHR) {

                        // There is no problem with the validation
                        $($Sect_Search).find('.sect_list').html(data);

                        //});
                        return;
                    }
                });

                var $ul = $(this).find('ul');
                if (!$(this).find('.sect_p').hasClass('ordering_disabled')) {
                    if ($(this).find('ul').css('display') == 'none') {
                        $(this).find('input').first().attr("type", "text");
                        $(this).find('input').first().focus();
                        $(this).find('p').first().attr("hidden", "hidden");
                    } else {
                        $(this).find('input').first().attr("type", "hidden");
                        $(this).find('p').first().removeAttr("hidden");
                    }
                    $('.One_Course').find('ul').not($ul).slideUp();
                    $(this).find('ul').slideToggle();
                    $(this).find('input').first().val('');
                    $('#Course_Search').find('li').removeClass("order_hover_color_down_up");
                    $('#Course_Search').find('li').removeClass("displayn");
                    $('#Course_Search').find('li').addClass('list_display');
                    $('.term_list').slideUp();
                    $('.dept_list').slideUp();
                    $('.dept_input').attr("type", "hidden");
                    $('.dept_p').removeAttr("hidden");
                    $('.term_input').attr('type', 'hidden');
                    $('.term_name').removeAttr('hidden');
                }
            }
        });
        //Section List Click Event Function
        $('.sect_list').on('click', 'li', function (e) {
            $('.duplicate_warning').remove();
            var $sect_list_selection = $(this);
            var $term_id = $(this).parent().parent().prev().prev().find('.Term_Name_Div').find('input').first().val();
            var $dept_id = $(this).parent().parent().prev().find('.Dept_Name_Div').find('input').last().val();
            $term_id = $term_id.replace('ter-', '');
            $dept_id = $dept_id.replace('dpt-', '');
            var $course_id = $(this).attr('data-id');
            $course_id = $course_id.replace('cou-', '');
            var $term_name = $(this).parent().parent().prev().prev().find('.Term_Name_Div').find('p').first().text();
            var $dept_name = $(this).parent().parent().prev().find('.Dept_Name_Div').find('p').first().text();
            var $course_name = $(this).text();

            var outer = $(this);
            e.stopPropagation();
            var sect_text = $(this).text();
            var sect_id = $(this).attr('data-id');
            var term_name = $(this).parent().parent().parent().parent().find('.term_name').first().text();
            var term_name_check = $(this).parent().parent().parent().parent().parent().next().find('.term_name').text();
            var term_one = $(this).parent().parent().prev().prev().find('.term_value').attr('value');
            var dept_one = $(this).parent().parent().prev().find('.deptId').attr('value');
            var total_value = term_one + dept_one + sect_id;
            $($sect_list_selection).parent().parent().parent().parent().next().attr('id', $course_id);
            $(this).parent().prev().find('input').last().attr('value', sect_id);
            $(this).parent().prev().find('.sect_hidden').text(sect_text);
            $(this).parent().prev().find('input').first().attr('type', 'hidden');
            $(this).parent().prev().find('p').first().removeAttr('hidden');
            $(this).parent().hide();
            if ($(this).parent().parent().parent().parent().parent().next().find('.Course_Section').length) {
                $(this).parent().parent().parent().parent().parent().next().find('.Course_Section').find('.Term_Search').find('em').removeClass('ordering_disabled');
                $(this).parent().parent().parent().parent().parent().next().find('.Course_Section').find('.Term_Search').find('em').addClass('ordering_enabled');
                $(this).parent().parent().parent().parent().parent().next().find('.Course_Section').find('.Term_Search').find('p').removeClass('ordering_disabled');
                $(this).parent().parent().parent().parent().parent().next().find('.Course_Section').find('.Term_Search').find('p').addClass('ordering_enabled');
                if (term_name_check == "YOUR TERM") {
                    $(this).parent().parent().parent().parent().parent().next().find('.term_name').text(term_name);
                    $(this).parent().parent().parent().parent().parent().next().find('.term_value').attr('value', term_one);
                }
                $(this).parent().parent().parent().parent().parent().next().find('.Dept_Search').find('em').removeClass("ordering_disabled");
                $(this).parent().parent().parent().parent().parent().next().find('.Dept_Search').find('p').removeClass("ordering_disabled");
                $(this).parent().parent().parent().parent().parent().next().find('.Dept_Search').find('input').first().attr('type', 'text');
                $(this).parent().parent().parent().parent().parent().next().find('.Dept_Search').find('input').first().focus();
                $(this).parent().parent().parent().parent().parent().next().find('.Dept_Search').find('p').attr('hidden', 'hidden');
                //ajax for department search on next line needs to go on twice.
                var model = {
                    term: '',
                    termId: '',
                    department: '',
                    deptId: '',
                    courseSection: '',
                    courseId: ''
                };
                model.deptId = $dept_id;
                model.termId = $term_id;
                model.courseId = $course_id;
                model.department = $dept_name;
                model.term = $term_name;
                model.courseSection = $course_name;
                $.ajax({
                    cache: false,
                    type: "POST",
                    url: 'SelectTermDept/CourseList',
                    dataType: "json",
                    data: { __RequestVerificationToken: token, "model": model },
                    error: function (xhr) {
                        $('#errorModal').modal('show');
                        $('#errorModal').focus();
                    },
                    success: function (data, jqXHR) {
                        if (data.retval == false) {
                            var html = data.mesg;
                            var html_before = $($sect_list_selection).parent().parent().parent().parent().parent();
                            $(html).insertBefore(html_before);
                            $($sect_list_selection).parent().prev().find('input').first().attr('type', 'text');
                            $($sect_list_selection).parent().prev().find('input').first().focus();
                            $($sect_list_selection).parent().prev().find('p').first().text("Course-Section-Instructor");
                            $($sect_list_selection).parent().prev().find('p').first().attr('hidden', 'hidden');
                            $($sect_list_selection).parent().prev().find('input').last().attr("value", "");
                            $($sect_list_selection).parent().show();
                            $($sect_list_selection).parent().parent().parent().parent().parent().next().find('.dept_list').first().hide();
                            $($sect_list_selection).parent().parent().parent().parent().parent().next().find('.Dept_Search').find('input').first().attr('type', 'hidden');
                            $($sect_list_selection).parent().parent().parent().parent().parent().next().find('.Dept_Search').find('p').removeAttr('hidden');
                            $($sect_list_selection).parent().parent().parent().parent().next().attr('id', '');
                        }
                        // Do nothing course has been added to the session

                        //});
                        return;

                    }
                });


                $(this).parent().parent().parent().parent().parent().next().find('.dept_list').first().show();
            } else {
                var new_term = $('.One_Course').last().clone(true);
                var prev_term = $(this).parent().parent().parent().parent().parent().parent();
                //need to remove "remove Course" id so it doens't conflict with other scripts.
                $(new_term).find('.Remove_Course').attr('id', '');
                $(new_term).insertBefore("#Bottom_Buttons");
                $(this).parent().parent().parent().parent().parent().next().find('.Section_Search').first().find('ul').first().html('');
                $('.Dept_Search').last().find('ul').show();
                //ajax for department search list on next line 2nd version
                var model = {
                    term: '',
                    termId: '',
                    department: '',
                    deptId: '',
                    courseSection: '',
                    courseId: ''
                };
                model.deptId = $dept_id;
                model.termId = $term_id;
                model.courseId = $course_id;
                model.department = $dept_name;
                model.term = $term_name;
                model.courseSection = $course_name;
                $.ajax({
                    cache: false,
                    type: "POST",
                    url: 'SelectTermDept/CourseList',
                    data: { __RequestVerificationToken: token, "model": model },
                    dataType: "json",
                    error: function (xhr) {
                        $('#errorModal').modal('show');
                        $('#errorModal').focus();
                    },
                    success: function (data, jqXHR) {
                        if (data.retval == false) {
                            var html = data.mesg;
                            var html_before = $($sect_list_selection).parent().parent().parent().parent().parent();
                            $(html).insertBefore(html_before);
                            $($sect_list_selection).parent().prev().find('input').first().attr('type', 'text');
                            $($sect_list_selection).parent().prev().find('input').first().focus();
                            $($sect_list_selection).parent().prev().find('p').first().text("Course-Section-Instructor");
                            $($sect_list_selection).parent().prev().find('p').first().attr('hidden', 'hidden');
                            $($sect_list_selection).parent().prev().find('input').last().attr("value", "");
                            $($sect_list_selection).parent().show();
                            $($sect_list_selection).parent().parent().parent().parent().parent().next().find('.dept_list').first().hide();
                            $($sect_list_selection).parent().parent().parent().parent().parent().next().find('.Dept_Search').find('input').first().attr('type', 'hidden');
                            $($sect_list_selection).parent().parent().parent().parent().parent().next().find('.Dept_Search').find('p').removeAttr('hidden');
                            $($sect_list_selection).parent().parent().parent().parent().next().attr('id', '');
                            // I return a message as html string that contain selected Term-department-section
                            //var html = "<div class='duplicate_warning alert alert-warning'><strong>" + term_name + " | " + dept_name + " | " + sect_name + "</strong> has already been added please choose a different section. </div>'";

                            // preappend the returned value assigned in data.mesg in the appropriate location
                        }

                        //});
                        return;
                    }
                });
                $('.Section_Search').last().find('ul').hide();
                $('.Dept_Search').last().find('input').first().attr('type', 'text');
                $('.Dept_Search').last().find('input').first().val('');
                $('.Dept_Search').last().find('p').first().text('Department');
                $('.Dept_Search').last().find('input').last().attr('value', '');
                $('.Dept_Search').last().find('input').first().focus();
                $('.Dept_Search').last().find('.dept_hidden').attr('hidden', 'hidden');
                $('.Section_Search').last().find('input').first().val('');
                $('.Section_Search').last().find('input').last().attr('value', '');
                $('.Section_Search').last().find('p').first().text('Course-Section-Instructor');
                $('.Section_Search').last().find('p').first().addClass('ordering_disabled');
                $('.Section_Search').last().find('em').addClass('ordering_disabled');
            }
            $(this).parent().parent().parent().parent().next().find('em').removeClass('ordering_disabled');
            $(this).parent().prev().find('button').attr('value', total_value);
            var value_array = [];
            var dept_name = $(this).parent().parent().prev().find('.dept_hidden').text();
            var sect_name = $(this).parent().prev().find('p').text();
            //tests for duplicate course selection
            $('#Course_Search').find('li').removeClass("order_hover_color_down_up");
            $('#Course_Search').find('li').removeClass("displayn");
            $('#Course_Search').find('li').addClass('list_display');
        });
        //term arrow up and down when in search box function
        $('.term_input').on('keyup', function (e) {
            e.preventDefault();
            var $term_input_list_selection = $(this);
            var $highlight = $('li.order_hover_color_down_up'), $li = $(this).parent().parent().next().find('li.list_display');
            var input_value = $(this).val();
            var input_value_upper = input_value.toUpperCase();
            if (e.keyCode == 40) {
                $highlight.removeClass('order_hover_color_down_up');
                $highlight.nextAll('li.list_display').first().addClass('order_hover_color_down_up');
                var $dept_text = $highlight.nextAll('li.list_display').first().text();
                if ($highlight.nextAll('li.list_display').length == 0) {
                    $li.eq(0).addClass('order_hover_color_down_up');
                    var $dept_text = $li.eq(0).text();
                    $(this).parent().parent().next().scrollTop(0);
                } else {
                    if ($(this).parent().parent().next().prop('scrollHeight') > $(this).parent().parent().next().height()) {
                        $highlight.scrollIntoView();
                    }
                }
                $(this).val($dept_text);
            } else if (e.keyCode == 38) {
                $highlight.removeClass('order_hover_color_down_up');
                $highlight.prevAll('li.list_display').first().addClass('order_hover_color_down_up');
                var $dept_text = $highlight.prevAll('li.list_display').first().text();
                if ($highlight.prevAll('li.list_display').length == 0) {
                    $li.eq(-1).addClass('order_hover_color_down_up');
                    var $dept_text = $li.eq(-1).text();
                    $(this).parent().parent().next().scrollTop(10000);
                } else {
                    if ($highlight.prev().prev().length == 0) {
                        $(this).parent().parent().next().scrollTop(0);
                    } else {
                        if ($(this).parent().parent().next().prop('scrollHeight') > $(this).parent().parent().next().height()) {
                            $highlight.prev().prev().scrollIntoView();
                        }
                    }
                }
                $(this).val($dept_text);
            } else if (e.keyCode == 13) { //13 is when user clicks enter on keyboard
                var $highlight_text = $highlight.text();
                var $highlight_id = $highlight.attr('data-id');
                if ($highlight_id == undefined) {
                    $("#TermInput").modal();
                    $("#TermInput").focus();
                    return false;
                }
                var $li_id = $highlight_id.replace('ter-', '');
                if ($highlight_text != "") {
                    $(this).attr('type', 'hidden');
                    $(this).parent().parent().find('p').text($highlight_text);
                    $(this).parent().parent().find('p').removeAttr('hidden');
                    $(this).parent().parent().find('input').first().val($highlight_id);
                    $(this).parent().parent().next().first().slideUp();
                    $(this).parent().parent().parent().next().find('input').first().attr('type', 'text');
                    $(this).parent().parent().parent().next().find('input').val('');
                    $(this).parent().parent().parent().next().find('p').text('Course-Section-Instructor');
                    $(this).parent().parent().parent().next().find('button').val('');
                    $(this).parent().parent().parent().next().find('input').first().focus();
                    $(this).parent().parent().parent().next().find('p').first().attr('hidden', 'hidden');
                    $(this).parent().parent().parent().next().find('p').first().removeClass('ordering_disabled');
                    $(this).parent().parent().parent().next().find('em').first().removeClass('ordering_disabled');
                    //ajax for department list in next option
                    $.ajax({
                        cache: false,
                        type: "POST",
                        url: 'SelectTermDept/Department',
                        updateTargetId: "department_list",
                        datatype: "json",
                        data: {__RequestVerificationToken: token, "termId": $li_id },
                        error: function (xhr) {
                            $('#errorModal').modal('show');
                            $('#errorModal').focus();
                        },
                        success: function (data, jqXHR) {
                            if (data.length == 0) {
                                $('#errorMesg').append("<li>There are no term selected.</li>");
                                return;
                            }
                            // Bind Departments
                            $($term_input_list_selection).parent().parent().parent().next().find('ul').html(data);

                            return;
                        }
                    });

                    $(this).parent().parent().parent().next().find('ul').first().show();
                    $('#Course_Search').find('li').removeClass("order_hover_color_down_up");
                    $('#Course_Search').find('li').removeClass("displayn");
                    $('#Course_Search').find('li').addClass('list_display');
                }
            } else if (e.keyCode != 9){
                //moved this ahead of script to solve script conflict
                $(this).parent().parent().next().find('.list_display').removeClass('order_hover_color_down_up');
                $(this).parent().parent().next().find('li').each(function () {
                    var li_text = $(this).text();
                    var index_text = li_text.indexOf(input_value_upper);

                    if (index_text >= 0) {
                        $(this).removeClass('displayn');
                        $(this).addClass('list_display');
                    } else {
                        $(this).addClass('displayn');
                        $(this).removeClass('list_display');
                    }
                });
                $(this).parent().parent().next().find('.list_display').first().addClass('order_hover_color_down_up');

            }
        });
        //set tab feature when inside the input field.
        $('.term_input').on('keydown', function (e) {
            if (e.keyCode == 9) {
                if (e.shiftKey) {

                }
                else {
                    $(this).parent().parent().parent().click();
                }
            }
        });
        //depertment arrow up and down when in search box function
        $('.dept_input').on('keyup', function (e) {
            var $dept_input_list_selection = $(this);
            var $highlight = $('li.order_hover_color_down_up'), $li = $(this).parent().parent().next().find('li.list_display');
            var input_value = $(this).val();
            var input_value_upper = input_value.toUpperCase();
            if (e.keyCode == 40) {
                $highlight.removeClass('order_hover_color_down_up');
                $highlight.nextAll('li.list_display').first().addClass('order_hover_color_down_up');
                var $dept_text = $highlight.nextAll('li.list_display').first().text();
                if ($highlight.nextAll('li.list_display').length == 0) {
                    $li.eq(0).addClass('order_hover_color_down_up');
                    var $dept_text = $li.eq(0).text();
                    $(this).parent().parent().next().scrollTop(0);
                } else {
                    if ($(this).parent().parent().next().prop('scrollHeight') > $(this).parent().parent().next().height()) {
                        $highlight.scrollIntoView();
                    }
                }
                $dept_text = $.trim($dept_text);
                $(this).val($dept_text);
            } else if (e.keyCode == 38) {
                $highlight.removeClass('order_hover_color_down_up');
                $highlight.prevAll('li.list_display').first().addClass('order_hover_color_down_up');
                var $dept_text = $highlight.prevAll('li.list_display').first().text();
                if ($highlight.prevAll('li.list_display').length == 0) {
                    $li.eq(-1).addClass('order_hover_color_down_up');
                    var $dept_text = $li.eq(-1).text();
                    $(this).parent().parent().next().scrollTop(10000);
                } else {
                    if ($highlight.prev().prev().length == 0) {
                        $(this).parent().parent().next().scrollTop(0);
                    } else {
                        if ($(this).parent().parent().next().prop('scrollHeight') > $(this).parent().parent().next().height()) {
                            $highlight.prev().prev().scrollIntoView();
                        }
                    }
                }
                $(this).val($dept_text);
            } else if (e.keyCode == 13) {
                var $highlight_text = $highlight.text();
                var $highlight_id = $highlight.attr('data-id');
                if ($highlight_id == undefined) {
                    $("#DeptInput").modal();
                    $("#DeptInput").focus();
                    return false;
                }
                var $dept_id = $highlight_id.replace('dpt-', '');
                var $term_id = $(this).parent().parent().parent().prev().find('.Term_Name_Div').find('input').first().val();
                $term_id = $term_id.replace('ter-', '');
                if ($highlight_text !== "") {
                    $(this).attr('type', 'hidden');
                    $(this).parent().next('p').text($highlight_text);
                    $(this).parent().next('p').removeAttr('hidden');
                    $(this).parent().next().next().val($highlight_id);
                    $(this).parent().parent().next().first().slideUp();
                    $(this).parent().parent().parent().next().find('input').first().attr('type', 'text');
                    $(this).parent().parent().parent().next().find('input').val('');
                    $(this).parent().parent().parent().next().find('p').text('Course-Section-Instructor');
                    $(this).parent().parent().parent().next().find('button').val('');
                    $(this).parent().parent().parent().next().find('input').first().focus();
                    $(this).parent().parent().parent().next().find('p').first().attr('hidden', 'hidden');
                    $(this).parent().parent().parent().next().find('p').first().removeClass('ordering_disabled');
                    $(this).parent().parent().parent().next().find('em').first().removeClass('ordering_disabled');
                    //ajax for section list or enter of department
                    $.ajax({
                        cache: false,
                        type: "POST",
                        datatype: "json",
                        url: 'SelectTermDept/Courses',
                        data: {__RequestVerificationToken: token, "termId": $term_id, "deptId": $dept_id },
                        updateTargetId: "course_list",
                        error: function (xhr) {
                            $('#errorModal').modal('show');
                            $('#errorModal').focus();
                        },
						success: function (data, jqXHR) {

                            // There is no problem with the validation
                            $($dept_input_list_selection).parent().parent().parent().next().find('ul').html(data);

                            //});
                            return;

                        }
                    });

                    $(this).parent().parent().parent().next().find('ul').first().show();
                    $('#Course_Search').find('li').removeClass("order_hover_color_down_up");
                    $('#Course_Search').find('li').removeClass("displayn");
                    $('#Course_Search').find('li').addClass('list_display');
                }
            } else if (e.keyCode != 9) {
                //moved this ahead of script to solve script conflict
                $(this).parent().parent().next().find('.list_display').removeClass('order_hover_color_down_up');
                $(this).parent().parent().next().find('li').each(function () {
                    var li_text = $(this).text();
                    var index_text = li_text.indexOf(input_value_upper);
                    if (index_text >= 0) {
                        $(this).removeClass('displayn');
                        $(this).addClass('list_display');
                    } else {
                        $(this).addClass('displayn');
                        $(this).removeClass('list_display');
                    }
                });
                $(this).parent().parent().next().find('.list_display').first().addClass('order_hover_color_down_up');
            }
        });
        //set tab feature when inside the input field.
        $('.dept_input').on('keydown', function (e) {
            if (e.which == 9) {
                if (e.shiftKey) {
                    e.preventDefault();
                    $(this).parent().parent().parent().parent().parent().find('.Term_Search').click();
                }
                else {
                    $(this).parent().parent().parent().click();
                }
            }
        });
        //Section arrow up and down in search function
        $('.sect_input').on('keyup', function (e) {
            var $highlight = $('li.order_hover_color_down_up'), $li = $(this).parent().parent().next().find('li.list_display');
            var input_value = $(this).val();
            var input_value_upper = input_value.toUpperCase();
            var $sect_list_selection = $(this);
            var $term_id = $(this).parent().parent().parent().prev().prev().find('.Term_Name_Div').find('input').first().val();
            $term_id = $term_id.replace('ter-', '');
            var $term_name = $(this).parent().parent().parent().prev().prev().find('.Term_Name_Div').find('p').first().text();
            var $dept_id = $(this).parent().parent().parent().prev().find('.Dept_Name_Div').find('input').last().val();
            $dept_id = $dept_id.replace('dpt-', '');
            var $dept_name = $(this).parent().parent().parent().prev().find('.Dept_Name_Div').find('p').first().text();
            var $course_id;
            var $course_name;

            if (e.keyCode == 40) {
                $highlight.removeClass('order_hover_color_down_up');
                $highlight.nextAll('li.list_display').first().addClass('order_hover_color_down_up');
                var $dept_text = $highlight.nextAll('li.list_display').first().text();
                if ($highlight.nextAll('li.list_display').length == 0) {
                    $li.eq(0).addClass('order_hover_color_down_up');
                    var $dept_text = $li.eq(0).text();
                    $(this).parent().parent().next().scrollTop(0);
                } else {
                    if ($(this).parent().parent().next().prop('scrollHeight') > $(this).parent().parent().next().height()) {
                        $highlight.scrollIntoView();
                    }
                }
                $(this).val($dept_text);
            } else if (e.keyCode == 38) {
                $highlight.removeClass('order_hover_color_down_up');
                $highlight.prevAll('li.list_display').first().addClass('order_hover_color_down_up');
                var $dept_text = $highlight.prevAll('li.list_display').first().text();
                if ($highlight.prevAll('li.list_display').length == 0) {
                    $li.eq(-1).addClass('order_hover_color_down_up');
                    var $dept_text = $li.eq(-1).text();
                    $(this).parent().parent().next().scrollTop(10000);
                } else {
                    if ($highlight.prev().prev().length == 0) {
                        $(this).parent().parent().next().scrollTop(0);
                    } else {
                        if ($(this).parent().parent().next().prop('scrollHeight') > $(this).parent().parent().next().height()) {
                            $highlight.prev().prev().scrollIntoView();
                        }
                    }
                }
                $(this).val($dept_text);
            } else if (e.keyCode == 13) {
                $('.duplicate_warning').remove();
                $('#Course_Search').find('li').removeClass("order_hover_color_down_up");
                $('#Course_Search').find('li').removeClass("displayn");
                $('#Course_Search').find('li').addClass('list_display');
                var outer = $(this);
                e.stopPropagation();
                var term_name = $(this).parent().parent().parent().parent().parent().find('.term_name').first().text();
                var term_name_check = $(this).parent().parent().parent().parent().parent().parent().next().find('.term_name').text();

                var term_one = $(this).parent().parent().parent().prev().prev().find('.term_value').attr('value');

                var dept_one = $(this).parent().parent().parent().prev().find('.deptId').attr('value');
                var $highlight_text = $highlight.text();
                var $highlight_id = $highlight.attr('data-id');
                if ($highlight_id == undefined) {
                    $("#SelectInput").modal();
                    $("#SelectInput").focus();
                    return false;
                }
                $course_id = $highlight_id.replace('cou-', '');
                $course_name = $highlight_text;
                var total_value = term_one + dept_one + $highlight_id;
                $($sect_list_selection).parent().parent().parent().parent().parent().next().attr('id', $course_id);
                if ($highlight_text !== "") {
                    $(this).attr('type', 'hidden');

                    $(this).parent().next('p').text($highlight_text);
                    $(this).parent().next('p').removeAttr('hidden');
                    $(this).parent().next().next().val($highlight_id);
                    $(this).parent().parent().next().first().slideUp();
                    if ($(this).parent().parent().parent().parent().parent().parent().next().find('.Course_Section').length) {
                        $(this).parent().parent().parent().parent().parent().parent().next().find('.Course_Section').find('.Term_Search').find('em').removeClass('ordering_disabled');
                        $(this).parent().parent().parent().parent().parent().parent().next().find('.Course_Section').find('.Term_Search').find('em').addClass('ordering_enabled');
                        $(this).parent().parent().parent().parent().parent().parent().next().find('.Course_Section').find('.Term_Search').find('p').removeClass('ordering_disabled');
                        $(this).parent().parent().parent().parent().parent().parent().next().find('.Course_Section').find('.Term_Search').find('p').addClass('ordering_enabled');
                        if (term_name_check == "YOUR TERM") {
                            $(this).parent().parent().parent().parent().parent().parent().next().find('.term_name').text(term_name);
                            $(this).parent().parent().parent().parent().parent().parent().next().find('.term_value').attr('value', term_one);
                        }
                        $(this).parent().parent().parent().parent().parent().parent().next().find('.Dept_Search').find('em').removeClass("ordering_disabled");
                        $(this).parent().parent().parent().parent().parent().parent().next().find('.Dept_Search').find('p').removeClass("ordering_disabled");
                        $(this).parent().parent().parent().parent().parent().parent().next().find('.Dept_Search').find('input').first().attr('type', 'text');
                        $(this).parent().parent().parent().parent().parent().parent().next().find('.Dept_Search').find('input').first().focus();
                        $(this).parent().parent().parent().parent().parent().parent().next().find('.Dept_Search').find('p').attr('hidden', 'hidden');
                        //ajax first option for department list on next line
                        var model = {
                            term: '',
                            termId: '',
                            department: '',
                            depId: '',
                            courseSection: '',
                            courseId: ''
                        };
                        model.depId = $dept_id;
                        model.termId = $term_id;
                        model.courseId = $course_id;
                        model.department = $dept_name;
                        model.term = $term_name;
                        model.courseSection = $course_name;
                        $.ajax({
                            cache: false,
                            type: "POST",
                            url: 'SelectTermDept/CourseList',
                            data: { __RequestVerificationToken: token, "model": model },
                            dataType: "json",
                            error: function (xhr) {
                                $('#errorModal').modal('show');
                                $('#errorModal').focus();
                            },
                            success: function (data, jqXHR) {
                                if (data.retval == false) {
                                    var html = data.mesg;
                                    var html_before = $(outer).parent().parent().parent().parent().parent().parent();
                                    $(html).insertBefore(html_before);
                                    $(outer).parent().parent().find('input').first().attr('type', 'text');
                                    $(outer).parent().parent().find('input').first().focus();
                                    $(outer).parent().parent().find('input').first().val("");
                                    $(outer).parent().parent().find('p').first().text("Course-Section-Instructor");
                                    $(outer).parent().parent().find('p').first().attr('hidden', 'hidden');
                                    $(outer).parent().parent().find('input').last().attr("value", "");
                                    $(outer).parent().parent().next().slideDown();
                                    $(outer).parent().parent().parent().parent().parent().parent().next().find('.dept_list').first().hide();
                                    $(outer).parent().parent().parent().parent().parent().parent().next().find('.Dept_Search').find('input').first().attr('type', 'hidden');
                                    $(outer).parent().parent().parent().parent().parent().parent().next().find('.Dept_Search').find('p').removeAttr('hidden');
                                    $($sect_list_selection).parent().parent().parent().parent().parent().next().attr('id', '');
                                    //display duplicate message block
                                    // I return a message as html string that contain selected Term-department-section
                                    //var html = "<div class='duplicate_warning alert alert-warning'><strong>" + term_name + " | " + dept_name + " | " + sect_name + "</strong> has already been added please choose a different section. </div>'";

                                    // preappend the returned value assigned in data.mesg in the appropriate location
                                }

                                //});
                                return;
                            }
                        });


                        $(this).parent().parent().parent().parent().parent().parent().next().find('.dept_list').first().show();
                    } else {
                        var new_term = $('.One_Course').last().clone(true);
                        var prev_term = $(this).parent().parent().parent().parent().parent().parent().parent();
                        //need to remove "remove Course" id so it doens't conflict with other scripts.
                        $(new_term).find('.Remove_Course').attr('id', '');
                        $(new_term).insertBefore("#Bottom_Buttons");
                        $(this).parent().parent().parent().parent().parent().parent().next().find('.Section_Search').first().find('ul').first().html('');
                        //ajax section option for department list on next line
                        var model = {
                            term: '',
                            termId: '',
                            department: '',
                            depId: '',
                            courseSection: '',
                            courseId: ''
                        };
                        model.depId = $dept_id;
                        model.termId = $term_id;
                        model.courseId = $course_id;
                        model.department = $dept_name;
                        model.term = $term_name;
                        model.courseSection = $course_name;
                        $.ajax({
                            cache: false,
                            type: "POST",
                            url: 'SelectTermDept/CourseList',
                            data: { __RequestVerificationToken: token, "model": model },
                            dataType: "json",
                            error: function (xhr) {
                                $('#errorModal').modal('show');
                                $('#errorModal').focus();
                            },
                            success: function (data, jqXHR) {
                                if (data.retval == false) {
                                    var html = data.mesg;
                                    var html_before = $(outer).parent().parent().parent().parent().parent().parent();
                                    $(html).insertBefore(html_before);
                                    $(outer).parent().parent().find('input').first().attr('type', 'text');
                                    $(outer).parent().parent().find('input').first().focus();
                                    $(outer).parent().parent().find('input').first().val("");
                                    $(outer).parent().parent().find('p').first().text("Course-Section-Instructor");
                                    $(outer).parent().parent().find('p').first().attr('hidden', 'hidden');
                                    $(outer).parent().parent().find('input').last().attr("value", "");
                                    $(outer).parent().parent().next().slideDown();
                                    $(outer).parent().parent().parent().parent().parent().parent().next().find('.dept_list').first().hide();
                                    $(outer).parent().parent().parent().parent().parent().parent().next().find('.Dept_Search').find('input').first().attr('type', 'hidden');
                                    $(outer).parent().parent().parent().parent().parent().parent().next().find('.Dept_Search').find('p').removeAttr('hidden');
                                    $($sect_list_selection).parent().parent().parent().parent().parent().next().attr('id', '');
                                }

                                //});
                                return;
                            }
                        });


                        $('.Dept_Search').last().find('ul').show();
                        $('.Section_Search').last().find('ul').hide();
                        $('.Dept_Search').last().find('input').first().attr('type', 'text');
                        $('.Dept_Search').last().find('input').first().val('');
                        $('.Dept_Search').last().find('p').first().text('Department');
                        $('.Dept_Search').last().find('input').last().attr('value', '');
                        $('.Dept_Search').last().find('input').first().focus();
                        $('.Dept_Search').last().find('.dept_hidden').attr('hidden', 'hidden');
                        $('.Section_Search').last().find('input').first().val('');
                        $('.Section_Search').last().find('input').last().attr('value', '');
                        $('.Section_Search').last().find('p').first().text('Course-Section-Instructor');
                        $('.Section_Search').last().find('p').first().addClass('ordering_disabled');
                        $('.Section_Search').last().find('em').addClass('ordering_disabled');
                    }
                    $(this).parent().parent().parent().parent().parent().next().find('em').removeClass('ordering_disabled');
                    $(this).parent().parent().find('button').attr('value', total_value);
                    var value_array = [];
                    var dept_name = $(this).parent().parent().parent().prev().find('.dept_hidden').text();
                    var sect_name = $(this).parent().parent().prev().find('p').text();
                }
            } else if (e.keyCode != 9) {
                //moved this ahead of script to solve script conflict
                $(this).parent().parent().next().find('.list_display').removeClass('order_hover_color_down_up');
                $(this).parent().parent().next().find('li').each(function () {
                    var li_text = $(this).text();
                    var index_text = li_text.indexOf(input_value_upper);
                    if (index_text >= 0) {
                        $(this).removeClass('displayn');
                        $(this).addClass('list_display');
                    } else {
                        $(this).addClass('displayn');
                        $(this).removeClass('list_display');
                    }
                });
                $(this).parent().parent().next().find('.list_display').first().addClass('order_hover_color_down_up');
            }
        });
        //set tab feature when inside the input field.
        $('.sect_input').on('keydown', function (e) {
            if (e.which == 9) {
                if (e.shiftKey) {
                    e.preventDefault();
                    $(this).parent().parent().parent().parent().parent().find('.Dept_Search').click();
                }
                else {
                    $(this).parent().parent().parent().click();
                }
            }
        });
        //remove button click event
        $('.Remove_Course').on('click', function () {
            var courseCount = 0;
            $('.duplicate_warning').remove();
            $('.Remove_Course').each(function () {
                courseCount += 1;
            });
            if (courseCount >= 1) {
                var cou_id = $(this).attr("id");
                var $remove_section_name = $(this).prev().find('input').last().val();
                //$remove_section_name = $remove_section_name.replace('cou-', '');
                //var dept_value = '';
                //var sect_value = '';
                //dept_value = $(this).parent().find('.Course_Section').find('.Dept_Search').find('input').last().attr('value');
                //sect_value = $(this).parent().find('.Course_Section').find('.Section_Search').find('input').last().attr('value');

                if (cou_id !== '') {
                    $(this).parent().remove();
                    $.ajax({
                        cache: false,
                        type: "POST",
                        dataType: "json",
                        url: 'SelectTermDept/Remove',
                        data: {__RequestVerificationToken: token, "id": cou_id },
                        error: function (xhr) {
                            $('#errorModal').modal('show');
                            $('#errorModal').focus();
                        },
                        success: function (data, textStatus, jqXHR) {
                            return;
                        }
                    });
                }
            }

        });
        //view your materials click event
        $("#Get_Materials").click(function () {
            var counter = 0;
            var Idlist = '';
            var Idcount = '0';
            $('.Remove_Course').each(function () {
                var id = $(this).attr('id');
                if (id !== undefined) {
                    Idcount = Idcount + id;
                    Idlist = Idlist + id + ',';
                    counter += 1;
                }
            });
            if (counter >= 20) {
               // var link = '/test?action=captcha&amp;controller=SelectTermDept';

                var ajaxCallURL = 'SelectTermDept/captcha';
                $.ajax({
                    type: "GET",
                    url: ajaxCallURL,
                    contentType: "application/json; charset=utf-8",
                    datatype: "json",
                    success: function (data) {

                        $('.divCaptcha_Modal').html(data);

                        $('#Modal').modal('show');
                        $('#Modal').focus();
                    },
                    error: function () {
                        $('#errorModal').modal('show');
                        $('#errorModal').focus();
                    }
                });
            }
            else if (Idcount >= 1) {
                    var link = 'CourseMaterials'
                    window.location.href = link
            } else {
                $('#NoSelection').modal('show');
                $('#NoSelection').focus();
            }
        });
        //Get Materials press enter on focus
        $('#Get_Materials').keyup(function (e) {
            if (e.keyCode == 13) {
                $(this).click();
            }
        });
        //these stop the list from closing when user clicks insite of the input fields.
        $('.term_input').on('click', function (e) {
            e.stopPropagation();
        });
        $('.dept_input').on('click', function (e) {
            e.stopPropagation();
        });
        $('.sect_input').on('click', function (e) {
            e.stopPropagation();
        });

        </script> 
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85960054-1', 'auto');
  ga('send', 'pageview');

</script> 
<script>
$('#H_Search').prependTo('.search-here');
</script> <!--old stuff--------------------> 
<script>
    $(document).ready(function () {

        //checkout messaging was put here because checkout.aspx page would not show up under inSite pages
        var loc = window.location.href;
        loc = loc.toLowerCase();
        if (loc.indexOf('checkout.aspx') >= 1) {
            $('#ctl00_ctl00_Content_Content_pi_acct_num').parent().append(
                '<p id="account-entry-instructions">Please enter ID# without the "S" and without leading zero.</p>'
            );
        }

        //sfa cart messaging was put here because sfacart.aspx page would not show up under inSite pages
        var loc2 = window.location.href;
        loc2 = loc2.toLowerCase();
        if (loc2.indexOf('sfacart.aspx') >= 1) {
            $('#ctl00_ctl00_Content_Content_Label1').parent().parent().after(
                '<tr><td><p id="account-entry-instructions">Please enter ID# without the "S" and without leading zero.</p></td></tr>'
            );
            $('#account-entry-instructions').parent().css({
                'min-width': '700px',
                'position': 'absolute'
            });
        }

        //customerregister.aspx messaging modified here because customerregister.aspx page would not show up under inSite pages
        var loc3 = window.location.href;
        loc3 = loc3.toLowerCase();
        if (loc3.indexOf('customerregister.aspx') >= 1) {
            $('#ctl00_ctl00_Content_Content_txtEmail').attr('placeholder',
                ' Use @monmouth.edu email if you have one.');
        }

        //checkout.aspx messaging modified here because checkout page would not show up under inSite pages
        var loc4 = window.location.href;
        loc4 = loc4.toLowerCase();
        if (loc4.indexOf('checkout.aspx') >= 1) {
            $('#ctl00_ctl00_Content_Content_lblBillAddress1').before(
                '<span style="color:red">If rentals are in your cart, the email you are registered with must end in "@monmouth.edu."  Please update your email address if necessary by clicking the "Change" link above.</span><br><br>'
            );
        }

        //hide compare prices for ISBN 9781581581584 per Liz' request, coursematerials.aspx page not accessible in accordian so script put here 
        var $isbnElement = $('tr[id$=pnlItemTxtDisplayISBN]:contains(781581581584)');
        var $containingElement = $isbnElement.closest(".course_info");
        $compareBox = $containingElement.find('div[id$="updateCompare"]');
        $compareBox.css('display', 'none');

    });
</script> <!--Checkout message styling--> 
<style>
    p#account-entry-instructions {
        line-height: 1;
        margin-bottom: 7px;
        color: red;
        margin-top: 4px;
    }

    label#ctl00_ctl00_Content_Content_Label30 {
        white-space: nowrap;
    }

    /*sfa cart page styling*/

    input#ctl00_ctl00_Content_Content_submitButton {
        margin-top: 30px;
    }
</style> 
<script type="text/javascript">
        $(document).ready(function () {
                //ADA fix keeps .ui-dialog from loading twice on the page
                $('.ui-dialog').each(function (e) {
                    if (e != 0) {
                        $(this).remove();
                    }
                });
            });

    </script> 
<script type="text/javascript">
        //allowing maintain scroll position on postbacks for mvc
        $(document).scroll(function(){
            localStorage['ControllerPageName'] = document.URL;
            localStorage['MaintainScrollPosition'] = $(document).scrollTop();
        });
        $(document).ready(function () {
            var postMethod = "GET";
            var scrollPositionIgnore = $('#scrollPositionIgnore').length;
            if (postMethod === "POST" && scrollPositionIgnore <= 0) {
                if (localStorage['ControllerPageName'] == document.URL) {
                    $(document).scrollTop(localStorage['MaintainScrollPosition']);
                }
            }
            $('.ui-dialog-titlebar-close').html('X');
            $('.sessionClose').click(function () {
                window.location.reload();
            });
        });
        window.onload = function () {
            setTimeout(SessionAlert, 59 * 60000);
        }
        function SessionAlert() {
           $('#sessionModal').modal('show');
           $('body').css('overflow', 'hidden');
        }
    </script>
</body>
</doc>